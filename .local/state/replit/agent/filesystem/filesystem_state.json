{"file_contents":{"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":261,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4281,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1209,"size_tokens":null},"client/src/pages/profile-page.tsx":{"content":"import { useAuth } from \"@/hooks/use-auth\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { User, Shield } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\n\nconst profileSchema = z.object({\n  name: z.string().min(1, \"Nome é obrigatório\"),\n  email: z.string().email(\"Email inválido\"),\n  password: z.string().min(6, \"A senha deve ter no mínimo 6 caracteres\").optional().or(z.literal(\"\")),\n});\n\ntype ProfileFormData = z.infer<typeof profileSchema>;\n\nexport default function ProfilePage() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n\n  const form = useForm<ProfileFormData>({\n    resolver: zodResolver(profileSchema),\n    defaultValues: {\n      name: user?.name || \"\",\n      email: user?.email || \"\",\n      password: \"\",\n    },\n  });\n\n  const updateProfile = useMutation({\n    mutationFn: async (data: ProfileFormData) => {\n      const payload = {\n        name: data.name,\n        email: data.email,\n        ...(data.password && data.password.length > 0 ? { password: data.password } : {}),\n      };\n      return await apiRequest(\"PUT\", `/api/users/${user?.id}`, payload);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/user\"] });\n      toast({\n        title: \"Perfil atualizado\",\n        description: \"Suas informações foram atualizadas com sucesso.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao atualizar perfil\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: ProfileFormData) => {\n    updateProfile.mutate(data);\n  };\n\n  if (!user) {\n    return null;\n  }\n\n  return (\n    <div className=\"container mx-auto p-6 max-w-2xl\">\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center gap-3\">\n          <User className=\"h-8 w-8 text-primary\" />\n          <div>\n            <h1 className=\"text-3xl font-bold\">Meu Perfil</h1>\n            <p className=\"text-muted-foreground\">\n              Gerencie suas informações pessoais\n            </p>\n          </div>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center justify-between\">\n              <span>Informações da Conta</span>\n              <Badge\n                variant={user.role === \"admin\" ? \"default\" : \"secondary\"}\n                className=\"gap-1\"\n                data-testid=\"badge-user-role\"\n              >\n                {user.role === \"admin\" && <Shield className=\"h-3 w-3\" />}\n                {user.role === \"admin\" ? \"Administrador\" : \"Usuário\"}\n              </Badge>\n            </CardTitle>\n            <CardDescription>\n              Atualize seu nome e email abaixo\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                <FormField\n                  control={form.control}\n                  name=\"name\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Nome Completo</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"Seu nome completo\"\n                          data-testid=\"input-name\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Email</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          type=\"email\"\n                          placeholder=\"seu@email.com\"\n                          data-testid=\"input-email\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"password\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Nova Senha (opcional)</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          type=\"password\"\n                          placeholder=\"Deixe em branco para não alterar\"\n                          data-testid=\"input-password\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <div className=\"flex gap-2 pt-2\">\n                  <Button\n                    type=\"submit\"\n                    disabled={updateProfile.isPending}\n                    data-testid=\"button-save-profile\"\n                  >\n                    {updateProfile.isPending ? \"Salvando...\" : \"Salvar Alterações\"}\n                  </Button>\n                </div>\n              </form>\n            </Form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":5909,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1527,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8605,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1056,"size_tokens":null},"client/src/components/theme-provider.tsx":{"content":"import { createContext, useContext, useEffect, useState } from \"react\";\n\ntype Theme = \"dark\" | \"light\" | \"system\";\n\ntype ThemeProviderProps = {\n  children: React.ReactNode;\n  defaultTheme?: Theme;\n  storageKey?: string;\n};\n\ntype ThemeProviderState = {\n  theme: Theme;\n  setTheme: (theme: Theme) => void;\n};\n\nconst initialState: ThemeProviderState = {\n  theme: \"system\",\n  setTheme: () => null,\n};\n\nconst ThemeProviderContext = createContext<ThemeProviderState>(initialState);\n\nexport function ThemeProvider({\n  children,\n  defaultTheme = \"system\",\n  storageKey = \"vite-ui-theme\",\n  ...props\n}: ThemeProviderProps) {\n  const [theme, setTheme] = useState<Theme>(\n    () => (localStorage.getItem(storageKey) as Theme) || defaultTheme\n  );\n\n  useEffect(() => {\n    const root = window.document.documentElement;\n\n    root.classList.remove(\"light\", \"dark\");\n\n    if (theme === \"system\") {\n      const systemTheme = window.matchMedia(\"(prefers-color-scheme: dark)\")\n        .matches\n        ? \"dark\"\n        : \"light\";\n\n      root.classList.add(systemTheme);\n      return;\n    }\n\n    root.classList.add(theme);\n  }, [theme]);\n\n  const value = {\n    theme,\n    setTheme: (theme: Theme) => {\n      localStorage.setItem(storageKey, theme);\n      setTheme(theme);\n    },\n  };\n\n  return (\n    <ThemeProviderContext.Provider {...props} value={value}>\n      {children}\n    </ThemeProviderContext.Provider>\n  );\n}\n\nexport const useTheme = () => {\n  const context = useContext(ThemeProviderContext);\n\n  if (context === undefined)\n    throw new Error(\"useTheme must be used within a ThemeProvider\");\n\n  return context;\n};","path":null,"size_bytes":1604,"size_tokens":null},"client/src/components/theme-toggle.tsx":{"content":"import { Moon, Sun } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useTheme } from \"./theme-provider\";\n\nexport function ThemeToggle() {\n  const { theme, setTheme } = useTheme();\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={() => setTheme(theme === \"light\" ? \"dark\" : \"light\")}\n      data-testid=\"button-theme-toggle\"\n    >\n      <Sun className=\"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0\" />\n      <Moon className=\"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100\" />\n      <span className=\"sr-only\">Alternar tema</span>\n    </Button>\n  );\n}","path":null,"size_bytes":694,"size_tokens":null},"client/src/pages/ocr-test.tsx":{"content":"import { useState } from \"react\";\nimport { ImageUpload } from \"@/components/image-upload\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { TestTube, FileText, Wand2, Copy, CheckCircle, ArrowRight } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\n\nexport default function PdfExtractTest() {\n  const [uploadedImage, setUploadedImage] = useState<string | null>(null);\n  const [originalFile, setOriginalFile] = useState<File | null>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [rawText, setRawText] = useState(\"\");\n  const [structuredData, setStructuredData] = useState<any>(null);\n  const [, navigate] = useLocation();\n\n  // Convert ISO date format back to Brazilian format for display\n  const formatDateForDisplay = (isoDate: string): string => {\n    if (!isoDate) return 'Data não disponível';\n    try {\n      // Convert from \"2025-09-26T22:18\" to \"26/09/2025 22:18\"\n      const [datePart, timePart] = isoDate.split('T');\n      const [year, month, day] = datePart.split('-');\n      return `${day}/${month}/${year} ${timePart}`;\n    } catch {\n      return isoDate; // fallback to original format if conversion fails\n    }\n  };\n\n  const handleImageUpload = async (file: File) => {\n    const imageUrl = URL.createObjectURL(file);\n    setUploadedImage(imageUrl);\n    setOriginalFile(file);\n    setRawText(\"\");\n    setStructuredData(null);\n    \n    // Real PDF processing with pdfplumber\n    setIsProcessing(true);\n    \n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      \n      const response = await fetch('/api/ocr/process', {\n        method: 'POST',\n        body: formData,\n      });\n      \n      const result = await response.json();\n      \n      if (response.ok && result.success) {\n        // Format the raw text response to show the actual PDF extraction\n        const bet3Info = result.data.bet3?.house ? `\nAPOSTA 3:\nCasa: ${result.data.bet3.house}\nOdd: ${result.data.bet3.odd}\nTipo: ${result.data.bet3.type}\nStake: ${result.data.bet3.stake}\nLucro: ${result.data.bet3.profit}\n` : '';\n\n        const rawResponse = `=== DADOS EXTRAÍDOS DO PDF ENVIADO ===\n\nDATA: ${formatDateForDisplay(result.data.date)}\nESPORTE: ${result.data.sport}\nLIGA: ${result.data.league}\nTime A: ${result.data.teamA}\nTime B: ${result.data.teamB}\n\nAPOSTA 1:\nCasa: ${result.data.bet1.house}\nOdd: ${result.data.bet1.odd}\nTipo: ${result.data.bet1.type}\nStake: ${result.data.bet1.stake}\nLucro: ${result.data.bet1.profit}\n\nAPOSTA 2:\nCasa: ${result.data.bet2.house}\nOdd: ${result.data.bet2.odd}\nTipo: ${result.data.bet2.type}\nStake: ${result.data.bet2.stake}\nLucro: ${result.data.bet2.profit}\n${bet3Info}\nLucro%: ${result.data.profitPercentage}%\n\n=== PROCESSAMENTO CONCLUÍDO ===\n✅ PDF processado com sucesso pelo pdfplumber\n✅ Todos os caracteres especiais e acentos preservados\n✅ Dados fiéis ao arquivo enviado`;\n\n        setRawText(rawResponse);\n        setStructuredData(result.data);\n      } else {\n        const errorMsg = `❌ ERRO NO PROCESSAMENTO PDF\n\nDetalhes do erro: ${result.error || 'Erro desconhecido'}\nVerifique se:\n- O arquivo é um PDF válido\n- O PDF contém dados de aposta visíveis\n- O pdfplumber está funcionando corretamente`;\n        setRawText(errorMsg);\n        console.error('PDF Processing Error:', result.error);\n      }\n    } catch (error) {\n      const errorMsg = `❌ ERRO DE CONEXÃO\n\nFalha ao processar PDF: ${error instanceof Error ? error.message : 'Erro desconhecido'}\nVerifique sua conexão com a internet e tente novamente.`;\n      setRawText(errorMsg);\n      console.error('PDF processing error:', error);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleImageRemove = () => {\n    if (uploadedImage) {\n      URL.revokeObjectURL(uploadedImage);\n    }\n    setUploadedImage(null);\n    setOriginalFile(null);\n    setRawText(\"\");\n    setStructuredData(null);\n  };\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n    console.log(\"Text copied to clipboard\");\n  };\n\n  const processWithPdfplumber = async () => {\n    if (!originalFile) return;\n    \n    // Use the original PDF file to reprocess\n    try {\n      // Clear current results and reprocess with original file\n      setRawText(\"\");\n      setStructuredData(null);\n      setIsProcessing(true);\n      \n      const formData = new FormData();\n      formData.append('file', originalFile);\n\n      \n      const apiResponse = await fetch('/api/ocr/process', {\n        method: 'POST',\n        body: formData,\n      });\n      \n      const result = await apiResponse.json();\n      \n      if (apiResponse.ok && result.success) {\n        // Format the raw text response to show the actual PDF extraction\n        const bet3Info = result.data.bet3?.house ? `\nAPOSTA 3:\nCasa: ${result.data.bet3.house}\nOdd: ${result.data.bet3.odd}\nTipo: ${result.data.bet3.type}\nStake: ${result.data.bet3.stake}\nLucro: ${result.data.bet3.profit}\n` : '';\n\n        const rawResponse = `=== DADOS EXTRAÍDOS DO PDF ENVIADO ===\n\nDATA: ${formatDateForDisplay(result.data.date)}\nESPORTE: ${result.data.sport}\nLIGA: ${result.data.league}\nTime A: ${result.data.teamA}\nTime B: ${result.data.teamB}\n\nAPOSTA 1:\nCasa: ${result.data.bet1.house}\nOdd: ${result.data.bet1.odd}\nTipo: ${result.data.bet1.type}\nStake: ${result.data.bet1.stake}\nLucro: ${result.data.bet1.profit}\n\nAPOSTA 2:\nCasa: ${result.data.bet2.house}\nOdd: ${result.data.bet2.odd}\nTipo: ${result.data.bet2.type}\nStake: ${result.data.bet2.stake}\nLucro: ${result.data.bet2.profit}\n${bet3Info}\nLucro%: ${result.data.profitPercentage}%\n\n=== PROCESSAMENTO CONCLUÍDO ===\n✅ PDF processado com sucesso pelo pdfplumber\n✅ Todos os caracteres especiais e acentos preservados\n✅ Dados fiéis ao arquivo enviado`;\n\n        setRawText(rawResponse);\n        setStructuredData(result.data);\n      } else {\n        const errorMsg = `❌ ERRO NO PROCESSAMENTO PDF\n\nDetalhes do erro: ${result.error || 'Erro desconhecido'}\nVerifique se:\n- O arquivo é um PDF válido\n- O PDF contém dados de aposta visíveis\n- O pdfplumber está funcionando corretamente`;\n        setRawText(errorMsg);\n        console.error('PDF Processing Error:', result.error);\n      }\n      \n    } catch (error) {\n      console.error('Error reprocessing image:', error);\n      setRawText('❌ Erro ao reprocessar o PDF. Faça upload novamente.');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const useExtractedData = () => {\n    if (!structuredData) return;\n    \n    // Validate required nested fields\n    if (!structuredData.bet1?.house || !structuredData.bet2?.house) {\n      console.error('Invalid PDF data: missing bet information');\n      return;\n    }\n    \n    // Transform PDF data to form format (supports 2 OR 3 bets)\n    const formattedData: any = {\n      eventDate: structuredData.date,\n      sport: structuredData.sport,\n      league: structuredData.league,\n      teamA: structuredData.teamA,\n      teamB: structuredData.teamB,\n      profitPercentage: structuredData.profitPercentage?.toString() || \"\",\n      bet1House: structuredData.bet1.house,\n      bet1Type: structuredData.bet1.type,\n      bet1Odd: structuredData.bet1.odd?.toString() || \"\",\n      bet1Stake: structuredData.bet1.stake?.toString() || \"\",\n      bet1Profit: structuredData.bet1.profit?.toString() || \"\",\n      bet1AccountHolder: \"\",\n      bet2House: structuredData.bet2.house,\n      bet2Type: structuredData.bet2.type,\n      bet2Odd: structuredData.bet2.odd?.toString() || \"\",\n      bet2Stake: structuredData.bet2.stake?.toString() || \"\",\n      bet2Profit: structuredData.bet2.profit?.toString() || \"\",\n      bet2AccountHolder: \"\",\n    };\n    \n    // Add bet3 if it exists\n    if (structuredData.bet3?.house) {\n      formattedData.bet3House = structuredData.bet3.house;\n      formattedData.bet3Type = structuredData.bet3.type;\n      formattedData.bet3Odd = structuredData.bet3.odd?.toString() || \"\";\n      formattedData.bet3Stake = structuredData.bet3.stake?.toString() || \"\";\n      formattedData.bet3Profit = structuredData.bet3.profit?.toString() || \"\";\n      formattedData.bet3AccountHolder = \"\";\n    }\n    \n    // Save to sessionStorage for the upload page to use (more appropriate for temporary data)\n    sessionStorage.setItem('importedPDFData', JSON.stringify(formattedData));\n    \n    // Navigate to upload page\n    navigate('/upload');\n  };\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      <div className=\"flex items-center gap-2\">\n        <TestTube className=\"h-8 w-8 text-primary\" />\n        <div>\n          <h1 className=\"text-3xl font-bold\">Teste de Extração PDF</h1>\n          <p className=\"text-muted-foreground\">\n            Teste a extração de dados do PDF e verifique a precisão do pdfplumber\n          </p>\n        </div>\n      </div>\n\n      <div className=\"grid gap-6 lg:grid-cols-2\">\n        {/* Upload Area */}\n        <div className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <FileText className=\"h-5 w-5\" />\n                Upload do PDF\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              \n              <ImageUpload\n                onImageUpload={handleImageUpload}\n                onImageRemove={handleImageRemove}\n                uploadedImage={uploadedImage}\n                isProcessing={isProcessing}\n              />\n              \n              {uploadedImage && !isProcessing && (\n                <div className=\"mt-4\">\n                  <Button \n                    onClick={processWithPdfplumber} \n                    className=\"w-full\"\n                    data-testid=\"button-process-ocr\"\n                  >\n                    <Wand2 className=\"w-4 h-4 mr-2\" />\n                    Processar com pdfplumber\n                  </Button>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Results Area */}\n        <div className=\"space-y-4\">\n          {/* Raw Text Output */}\n          <Card>\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <CardTitle className=\"flex items-center gap-2\">\n                  <FileText className=\"h-5 w-5\" />\n                  Dados Extraídos (Raw)\n                </CardTitle>\n                {rawText && (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => copyToClipboard(rawText)}\n                    data-testid=\"button-copy-raw-text\"\n                  >\n                    <Copy className=\"w-4 h-4\" />\n                  </Button>\n                )}\n              </div>\n            </CardHeader>\n            <CardContent>\n              {rawText ? (\n                <Textarea\n                  value={rawText}\n                  readOnly\n                  className=\"min-h-[200px] font-mono text-sm\"\n                  data-testid=\"textarea-raw-text\"\n                />\n              ) : (\n                <div className=\"flex items-center justify-center h-[200px] text-muted-foreground\">\n                  {isProcessing ? \"Processando PDF...\" : \"Aguardando upload do PDF\"}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Structured Data Output */}\n          {structuredData && (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                  Dados Estruturados\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                  <div>\n                    <span className=\"text-muted-foreground\">Data:</span>\n                    <p className=\"font-medium\">{formatDateForDisplay(structuredData.date)}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">Esporte:</span>\n                    <p className=\"font-medium\">{structuredData.sport}</p>\n                  </div>\n                  <div className=\"col-span-2\">\n                    <span className=\"text-muted-foreground\">Liga:</span>\n                    <p className=\"font-medium\">{structuredData.league}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">Time A:</span>\n                    <p className=\"font-medium\">{structuredData.teamA}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">Time B:</span>\n                    <p className=\"font-medium\">{structuredData.teamB}</p>\n                  </div>\n                </div>\n\n                <Separator />\n\n                {/* Bet 1 */}\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center gap-2\">\n                    <Badge variant=\"outline\">Aposta 1</Badge>\n                    <span className=\"font-medium\">{structuredData.bet1.house}</span>\n                  </div>\n                  <div className=\"grid grid-cols-2 gap-2 text-sm ml-4\">\n                    <div>\n                      <span className=\"text-muted-foreground\">Tipo:</span>\n                      <p>{structuredData.bet1.type}</p>\n                    </div>\n                    <div>\n                      <span className=\"text-muted-foreground\">Odd:</span>\n                      <p>{structuredData.bet1.odd}</p>\n                    </div>\n                    <div>\n                      <span className=\"text-muted-foreground\">Stake:</span>\n                      <p>{structuredData.bet1.stake}</p>\n                    </div>\n                    <div>\n                      <span className=\"text-muted-foreground\">Lucro:</span>\n                      <p className=\"text-green-600\">{structuredData.bet1.profit}</p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Bet 2 */}\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center gap-2\">\n                    <Badge variant=\"outline\">Aposta 2</Badge>\n                    <span className=\"font-medium\">{structuredData.bet2.house}</span>\n                  </div>\n                  <div className=\"grid grid-cols-2 gap-2 text-sm ml-4\">\n                    <div>\n                      <span className=\"text-muted-foreground\">Tipo:</span>\n                      <p>{structuredData.bet2.type}</p>\n                    </div>\n                    <div>\n                      <span className=\"text-muted-foreground\">Odd:</span>\n                      <p>{structuredData.bet2.odd}</p>\n                    </div>\n                    <div>\n                      <span className=\"text-muted-foreground\">Stake:</span>\n                      <p>{structuredData.bet2.stake}</p>\n                    </div>\n                    <div>\n                      <span className=\"text-muted-foreground\">Lucro:</span>\n                      <p className=\"text-green-600\">{structuredData.bet2.profit}</p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Bet 3 (se existir) */}\n                {structuredData.bet3?.house && (\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <Badge variant=\"outline\">Aposta 3</Badge>\n                      <span className=\"font-medium\">{structuredData.bet3.house}</span>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-2 text-sm ml-4\">\n                      <div>\n                        <span className=\"text-muted-foreground\">Tipo:</span>\n                        <p>{structuredData.bet3.type}</p>\n                      </div>\n                      <div>\n                        <span className=\"text-muted-foreground\">Odd:</span>\n                        <p>{structuredData.bet3.odd}</p>\n                      </div>\n                      <div>\n                        <span className=\"text-muted-foreground\">Stake:</span>\n                        <p>{structuredData.bet3.stake}</p>\n                      </div>\n                      <div>\n                        <span className=\"text-muted-foreground\">Lucro:</span>\n                        <p className=\"text-green-600\">{structuredData.bet3.profit}</p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                <Separator />\n\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-muted-foreground\">Lucro %:</span>\n                  <Badge className=\"bg-green-100 text-green-800\">\n                    {structuredData.profitPercentage}%\n                  </Badge>\n                </div>\n\n                <Button \n                  className=\"w-full mt-4\" \n                  onClick={useExtractedData}\n                  data-testid=\"button-use-data\"\n                >\n                  <ArrowRight className=\"w-4 h-4 mr-2\" />\n                  Usar Estes Dados\n                </Button>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}","path":null,"size_bytes":17530,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1139,"size_tokens":null},"client/src/components/account-holder-form.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Plus, User, Building, Edit, Trash2, Loader2 } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport type { AccountHolder, BettingHouse } from \"@shared/schema\";\n\nconst accountHolderSchema = z.object({\n  name: z.string().min(1, \"Nome é obrigatório\"),\n});\n\nconst bettingHouseSchema = z.object({\n  name: z.string().min(1, \"Nome da casa é obrigatório\"),\n  notes: z.string().optional(),\n});\n\ntype AccountHolderFormData = z.infer<typeof accountHolderSchema>;\ntype BettingHouseFormData = z.infer<typeof bettingHouseSchema>;\n\ninterface AccountHolderWithHouses extends AccountHolder {\n  bettingHouses: BettingHouse[];\n}\n\ninterface AccountHolderFormProps {\n  onSave: (data: AccountHolderFormData) => void;\n  onSaveHouse: (holderId: string, data: BettingHouseFormData) => void;\n  className?: string;\n}\n\nexport function AccountHolderForm({ onSave, onSaveHouse, className }: AccountHolderFormProps) {\n  // Load account holders from API\n  const { data: holders = [], isLoading, error } = useQuery<AccountHolder[]>({\n    queryKey: [\"/api/account-holders\"],\n  });\n\n  // Load betting houses from API\n  const { data: allHouses = [] } = useQuery<BettingHouse[]>({\n    queryKey: [\"/api/betting-houses\"],\n  });\n\n  // Group betting houses by account holder\n  const accountHoldersWithHouses: AccountHolderWithHouses[] = holders.map(holder => ({\n    ...holder,\n    bettingHouses: allHouses.filter(house => house.accountHolderId === holder.id)\n  }));\n\n  const [isHolderDialogOpen, setIsHolderDialogOpen] = useState(false);\n  const [isHouseDialogOpen, setIsHouseDialogOpen] = useState(false);\n  const [selectedHolderId, setSelectedHolderId] = useState<string | null>(null);\n  const [editingHolder, setEditingHolder] = useState<AccountHolder | null>(null);\n  const [isDeleteHolderDialogOpen, setIsDeleteHolderDialogOpen] = useState(false);\n  const [holderToDelete, setHolderToDelete] = useState<AccountHolder | null>(null);\n\n  // Create account holder mutation\n  const createHolderMutation = useMutation({\n    mutationFn: async (data: AccountHolderFormData) => {\n      const response = await apiRequest(\"POST\", \"/api/account-holders\", data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/account-holders\"] });\n      setIsHolderDialogOpen(false);\n      holderForm.reset();\n    },\n  });\n\n  // Create betting house mutation\n  const createHouseMutation = useMutation({\n    mutationFn: async ({ holderId, data }: { holderId: string; data: BettingHouseFormData }) => {\n      const response = await apiRequest(\"POST\", \"/api/betting-houses\", {\n        ...data,\n        accountHolderId: holderId,\n      });\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/betting-houses\"] });\n      setIsHouseDialogOpen(false);\n      setSelectedHolderId(null);\n      houseForm.reset();\n    },\n  });\n\n  // Update account holder mutation\n  const updateHolderMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: AccountHolderFormData }) => {\n      const response = await apiRequest(\"PUT\", `/api/account-holders/${id}`, data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/account-holders\"] });\n      setIsHolderDialogOpen(false);\n      setEditingHolder(null);\n      holderForm.reset();\n    },\n  });\n\n  // Delete account holder mutation\n  const deleteHolderMutation = useMutation({\n    mutationFn: async (holderId: string) => {\n      await apiRequest(\"DELETE\", `/api/account-holders/${holderId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/account-holders\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/betting-houses\"] });\n      setIsDeleteHolderDialogOpen(false);\n      setHolderToDelete(null);\n    },\n  });\n\n  // Delete betting house mutation\n  const deleteHouseMutation = useMutation({\n    mutationFn: async (houseId: string) => {\n      await apiRequest(\"DELETE\", `/api/betting-houses/${houseId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/betting-houses\"] });\n    },\n  });\n\n  const holderForm = useForm<AccountHolderFormData>({\n    resolver: zodResolver(accountHolderSchema),\n    defaultValues: {\n      name: \"\",\n    },\n  });\n\n  const houseForm = useForm<BettingHouseFormData>({\n    resolver: zodResolver(bettingHouseSchema),\n    defaultValues: {\n      name: \"\",\n      notes: \"\",\n    },\n  });\n\n  const handleSaveHolder = (data: AccountHolderFormData) => {\n    if (editingHolder) {\n      updateHolderMutation.mutate({ id: editingHolder.id, data });\n    } else {\n      onSave(data);\n      createHolderMutation.mutate(data);\n    }\n  };\n\n  const handleSaveHouse = (data: BettingHouseFormData) => {\n    if (!selectedHolderId) return;\n    onSaveHouse(selectedHolderId, data);\n    createHouseMutation.mutate({ holderId: selectedHolderId, data });\n  };\n\n  const handleDeleteHouse = (houseId: string) => {\n    deleteHouseMutation.mutate(houseId);\n  };\n\n  const openHouseDialog = (holderId: string) => {\n    setSelectedHolderId(holderId);\n    setIsHouseDialogOpen(true);\n  };\n\n  const openEditHolderDialog = (holder: AccountHolder) => {\n    setEditingHolder(holder);\n    holderForm.reset({ name: holder.name });\n    setIsHolderDialogOpen(true);\n  };\n\n  const openDeleteHolderDialog = (holder: AccountHolder) => {\n    setHolderToDelete(holder);\n    setIsDeleteHolderDialogOpen(true);\n  };\n\n  const handleDeleteHolder = () => {\n    if (holderToDelete) {\n      deleteHolderMutation.mutate(holderToDelete.id);\n    }\n  };\n\n  const handleCloseHolderDialog = () => {\n    setIsHolderDialogOpen(false);\n    setEditingHolder(null);\n    holderForm.reset();\n  };\n\n  return (\n    <div className={cn(\"space-y-6\", className)}>\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-3xl font-bold\">Gerenciar Titulares e Casas</h1>\n        \n        <Dialog open={isHolderDialogOpen} onOpenChange={setIsHolderDialogOpen}>\n          <DialogTrigger asChild>\n            <Button data-testid=\"button-add-holder\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Novo Titular\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>{editingHolder ? \"Editar Titular\" : \"Adicionar Titular\"}</DialogTitle>\n            </DialogHeader>\n            \n            <Form {...holderForm}>\n              <form onSubmit={holderForm.handleSubmit(handleSaveHolder)} className=\"space-y-4\">\n                <FormField\n                  control={holderForm.control}\n                  name=\"name\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Nome *</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"Nome completo do titular\" data-testid=\"input-holder-name\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                \n                <div className=\"flex justify-end gap-2\">\n                  <Button \n                    type=\"button\" \n                    variant=\"outline\" \n                    onClick={handleCloseHolderDialog}\n                    data-testid=\"button-cancel-holder\"\n                  >\n                    Cancelar\n                  </Button>\n                  <Button \n                    type=\"submit\" \n                    disabled={createHolderMutation.isPending || updateHolderMutation.isPending} \n                    data-testid=\"button-save-holder\"\n                  >\n                    {(createHolderMutation.isPending || updateHolderMutation.isPending) ? <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" /> : null}\n                    {editingHolder ? \"Atualizar\" : \"Salvar\"}\n                  </Button>\n                </div>\n              </form>\n            </Form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {isLoading ? (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <Loader2 className=\"h-12 w-12 animate-spin text-muted-foreground mb-4\" />\n            <h3 className=\"text-lg font-semibold mb-2\">Carregando titulares...</h3>\n            <p className=\"text-muted-foreground text-center\">\n              Buscando dados dos titulares de conta\n            </p>\n          </CardContent>\n        </Card>\n      ) : error ? (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <h3 className=\"text-lg font-semibold mb-2\">Erro ao carregar titulares</h3>\n            <p className=\"text-muted-foreground text-center mb-4\">\n              Não foi possível carregar os dados. Tente novamente.\n            </p>\n            <Button onClick={() => queryClient.invalidateQueries({ queryKey: [\"/api/account-holders\"] })}>\n              Tentar novamente\n            </Button>\n          </CardContent>\n        </Card>\n      ) : accountHoldersWithHouses.length === 0 ? (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <User className=\"h-12 w-12 text-muted-foreground mb-4\" />\n            <h3 className=\"text-lg font-semibold mb-2\">Nenhum titular cadastrado</h3>\n            <p className=\"text-muted-foreground text-center mb-4\">\n              Cadastre um titular para começar a gerenciar suas apostas\n            </p>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"grid gap-6\">\n        {accountHoldersWithHouses.map((holder) => (\n          <Card key={holder.id} className=\"hover-elevate\" data-testid={`card-holder-${holder.id}`}>\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <CardTitle className=\"flex items-center gap-2\">\n                  <User className=\"h-5 w-5\" />\n                  {holder.name}\n                </CardTitle>\n                <div className=\"flex items-center gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => openHouseDialog(holder.id)}\n                    data-testid={`button-add-house-${holder.id}`}\n                  >\n                    <Plus className=\"w-4 h-4 mr-1\" />\n                    Nova Casa\n                  </Button>\n                  <Button \n                    variant=\"ghost\" \n                    size=\"icon\" \n                    onClick={() => openEditHolderDialog(holder)}\n                    data-testid={`button-edit-holder-${holder.id}`}\n                  >\n                    <Edit className=\"h-4 w-4\" />\n                  </Button>\n                  <Button \n                    variant=\"ghost\" \n                    size=\"icon\"\n                    onClick={() => openDeleteHolderDialog(holder)}\n                    data-testid={`button-delete-holder-${holder.id}`}\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n            </CardHeader>\n            \n            <CardContent>\n              <div className=\"space-y-3\">\n                <h4 className=\"font-medium text-sm text-muted-foreground\">Casas de Apostas</h4>\n                \n                {holder.bettingHouses.length > 0 ? (\n                  <div className=\"flex flex-wrap gap-2\">\n                    {holder.bettingHouses.map((house) => (\n                      <Badge \n                        key={house.id} \n                        variant=\"secondary\" \n                        className=\"flex items-center gap-1\"\n                        data-testid={`badge-house-${house.id}`}\n                      >\n                        <Building className=\"h-3 w-3\" />\n                        {house.name}\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"h-4 w-4 ml-1 hover:bg-destructive hover:text-destructive-foreground\"\n                          onClick={() => handleDeleteHouse(house.id)}\n                          disabled={deleteHouseMutation.isPending}\n                          data-testid={`button-remove-house-${house.id}`}\n                        >\n                          <Trash2 className=\"h-3 w-3\" />\n                        </Button>\n                      </Badge>\n                    ))}\n                  </div>\n                ) : (\n                  <p className=\"text-sm text-muted-foreground\">\n                    Nenhuma casa de apostas cadastrada\n                  </p>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n      )}\n\n      {/* Add Betting House Dialog */}\n      <Dialog open={isHouseDialogOpen} onOpenChange={setIsHouseDialogOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Adicionar Casa de Apostas</DialogTitle>\n          </DialogHeader>\n          \n          <Form {...houseForm}>\n            <form onSubmit={houseForm.handleSubmit(handleSaveHouse)} className=\"space-y-4\">\n              <FormField\n                control={houseForm.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Nome da Casa *</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"Ex: Bet365, Pinnacle, Betano\" data-testid=\"input-house-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={houseForm.control}\n                name=\"notes\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Notas/Informações</FormLabel>\n                    <FormControl>\n                      <Textarea \n                        {...field} \n                        placeholder=\"Informações adicionais sobre a casa de apostas (opcional)\"\n                        className=\"min-h-[80px]\"\n                        data-testid=\"input-house-notes\" \n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              \n              <div className=\"flex justify-end gap-2\">\n                <Button \n                  type=\"button\" \n                  variant=\"outline\" \n                  onClick={() => {\n                    setIsHouseDialogOpen(false);\n                    setSelectedHolderId(null);\n                  }}\n                  data-testid=\"button-cancel-house\"\n                >\n                  Cancelar\n                </Button>\n                <Button type=\"submit\" data-testid=\"button-save-house\">\n                  Adicionar\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n\n      {/* Delete Holder Confirmation Dialog */}\n      <AlertDialog open={isDeleteHolderDialogOpen} onOpenChange={setIsDeleteHolderDialogOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Confirmar Exclusão</AlertDialogTitle>\n            <AlertDialogDescription>\n              Tem certeza que deseja excluir o titular \"{holderToDelete?.name}\"? \n              Todas as casas de apostas associadas a este titular também serão removidas. \n              Esta ação não pode ser desfeita.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-delete-holder\">\n              Cancelar\n            </AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleDeleteHolder}\n              disabled={deleteHolderMutation.isPending}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n              data-testid=\"button-confirm-delete-holder\"\n            >\n              {deleteHolderMutation.isPending ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Excluindo...\n                </>\n              ) : (\n                \"Excluir\"\n              )}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}","path":null,"size_bytes":17499,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/src/pages/auth-page.tsx":{"content":"import { useState } from \"react\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { TrendingUp, Filter, Shield, BarChart3 } from \"lucide-react\";\nimport { Redirect } from \"wouter\";\n\nexport default function AuthPage() {\n  const { user, loginMutation } = useAuth();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [rememberMe, setRememberMe] = useState(false);\n\n  if (user) {\n    return <Redirect to=\"/\" />;\n  }\n\n  const handleLogin = (e: React.FormEvent) => {\n    e.preventDefault();\n    loginMutation.mutate({ email, password });\n  };\n\n  const features = [\n    {\n      icon: TrendingUp,\n      title: \"Gestão Eficiente\",\n      description: \"Organize todos os seus surebets em um único lugar com visão clara de lucros\",\n    },\n    {\n      icon: Filter,\n      title: \"Filtros Personalizados\",\n      description: \"Filtre por status, casa de aposta, titular e período para análises precisas\",\n    },\n    {\n      icon: Shield,\n      title: \"Controle Total\",\n      description: \"Acompanhe cada aposta desde a entrada até a resolução com status detalhado\",\n    },\n    {\n      icon: BarChart3,\n      title: \"Análise de Resultados\",\n      description: \"Visualize métricas e resultados reais para otimizar suas estratégias\",\n    },\n  ];\n\n  return (\n    <div className=\"flex min-h-screen\">\n      {/* Left side - Features */}\n      <div className=\"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary/10 via-primary/5 to-background p-12 flex-col justify-center\">\n        <div className=\"max-w-xl\">\n          <div className=\"flex items-center gap-3 mb-8\">\n            <div className=\"p-3 bg-primary rounded-lg\">\n              <TrendingUp className=\"w-8 h-8 text-primary-foreground\" />\n            </div>\n            <h1 className=\"text-3xl font-bold\">BetTracker Pro</h1>\n          </div>\n          <p className=\"text-xl text-muted-foreground mb-12\">\n            Gerencie e acompanhe suas apostas de arbitragem com velocidade e segurança que sua operação precisa.\n          </p>\n          <div className=\"space-y-6\">\n            {features.map((feature, index) => {\n              const Icon = feature.icon;\n              return (\n                <div key={index} className=\"flex gap-4 items-start\">\n                  <Icon className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <h3 className=\"font-semibold mb-1\">{feature.title}</h3>\n                    <p className=\"text-sm text-muted-foreground\">{feature.description}</p>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n\n      {/* Right side - Login Form */}\n      <div className=\"flex-1 flex items-center justify-center p-8\">\n        <div className=\"w-full max-w-md\">\n          <div className=\"flex items-center gap-3 mb-8 lg:hidden\">\n            <div className=\"p-2 bg-primary rounded-lg\">\n              <TrendingUp className=\"w-6 h-6 text-primary-foreground\" />\n            </div>\n            <h1 className=\"text-2xl font-bold\">BetTracker Pro</h1>\n          </div>\n          \n          <div className=\"mb-8\">\n            <h2 className=\"text-2xl font-bold mb-2\">Faça o Login</h2>\n            <p className=\"text-muted-foreground\">\n              Acesse sua conta para gerenciar apostas e acompanhar resultados\n            </p>\n          </div>\n\n          <form onSubmit={handleLogin} className=\"space-y-6\">\n            <div>\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"seu@email.com\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                data-testid=\"input-email\"\n                required\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"password\">Senha</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"Digite sua senha\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                data-testid=\"input-password\"\n                required\n              />\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <Checkbox\n                  id=\"remember\"\n                  checked={rememberMe}\n                  onCheckedChange={(checked) => setRememberMe(checked as boolean)}\n                  data-testid=\"checkbox-remember\"\n                />\n                <Label htmlFor=\"remember\" className=\"text-sm cursor-pointer\">\n                  Lembrar de mim\n                </Label>\n              </div>\n            </div>\n\n            <Button\n              type=\"submit\"\n              className=\"w-full\"\n              disabled={loginMutation.isPending}\n              data-testid=\"button-login\"\n            >\n              {loginMutation.isPending ? \"Entrando...\" : \"Entrar na Plataforma\"}\n            </Button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":5318,"size_tokens":null},"client/src/pages/dashboard.tsx":{"content":"import { useState, useMemo } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Label } from \"@/components/ui/label\";\nimport { Button } from \"@/components/ui/button\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { TrendingUp, DollarSign, BarChart3, Filter, X, CalendarIcon } from \"lucide-react\";\nimport type { SurebetSetWithBets, BettingHouseWithAccountHolder } from \"@shared/schema\";\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, TooltipProps } from 'recharts';\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\nimport type { DateRange } from \"react-day-picker\";\nimport { cn } from \"@/lib/utils\";\n\nexport default function Dashboard() {\n  // Temporary filter states (not applied until \"Filtrar\" is clicked)\n  const [tempStatusFilter, setTempStatusFilter] = useState<string>(\"all\");\n  const [tempInsertionDateRange, setTempInsertionDateRange] = useState<DateRange | undefined>();\n  const [tempEventDateRange, setTempEventDateRange] = useState<DateRange | undefined>();\n  const [tempHouseFilter, setTempHouseFilter] = useState<string>(\"all\");\n\n  // Applied filter states\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [insertionDateRange, setInsertionDateRange] = useState<DateRange | undefined>();\n  const [eventDateRange, setEventDateRange] = useState<DateRange | undefined>();\n  const [houseFilter, setHouseFilter] = useState<string>(\"all\");\n\n  const { data: surebetSets = [], isLoading } = useQuery<SurebetSetWithBets[]>({\n    queryKey: [\"/api/surebet-sets\"],\n    staleTime: 30000,\n    refetchInterval: 60000,\n  });\n\n  const { data: bettingHouses = [] } = useQuery<BettingHouseWithAccountHolder[]>({\n    queryKey: [\"/api/betting-houses\"],\n    staleTime: 300000,\n  });\n\n  const applyFilters = () => {\n    setStatusFilter(tempStatusFilter);\n    setInsertionDateRange(tempInsertionDateRange);\n    setEventDateRange(tempEventDateRange);\n    setHouseFilter(tempHouseFilter);\n  };\n\n  const clearFilters = () => {\n    setTempStatusFilter(\"all\");\n    setTempInsertionDateRange(undefined);\n    setTempEventDateRange(undefined);\n    setTempHouseFilter(\"all\");\n    \n    setStatusFilter(\"all\");\n    setInsertionDateRange(undefined);\n    setEventDateRange(undefined);\n    setHouseFilter(\"all\");\n  };\n\n  const filteredBets = useMemo(() => {\n    return surebetSets.filter((set) => {\n      if (statusFilter === \"pending\" && set.status !== \"pending\") return false;\n      if (statusFilter === \"resolved\" && set.status !== \"resolved\") return false;\n\n      if (insertionDateRange?.from && set.createdAt) {\n        const insertDate = new Date(set.createdAt);\n        const fromDate = new Date(insertionDateRange.from);\n        fromDate.setHours(0, 0, 0, 0);\n        if (insertDate < fromDate) return false;\n      }\n\n      if (insertionDateRange?.to && set.createdAt) {\n        const insertDate = new Date(set.createdAt);\n        const toDate = new Date(insertionDateRange.to);\n        toDate.setHours(23, 59, 59, 999);\n        if (insertDate > toDate) return false;\n      }\n\n      if (eventDateRange?.from && set.eventDate) {\n        const evtDate = new Date(set.eventDate);\n        const fromDate = new Date(eventDateRange.from);\n        fromDate.setHours(0, 0, 0, 0);\n        if (evtDate < fromDate) return false;\n      }\n\n      if (eventDateRange?.to && set.eventDate) {\n        const evtDate = new Date(set.eventDate);\n        const toDate = new Date(eventDateRange.to);\n        toDate.setHours(23, 59, 59, 999);\n        if (evtDate > toDate) return false;\n      }\n\n      if (houseFilter !== \"all\") {\n        const hasHouse = set.bets.some(bet => bet.bettingHouse.name === houseFilter);\n        if (!hasHouse) return false;\n      }\n\n      return true;\n    });\n  }, [surebetSets, statusFilter, insertionDateRange, eventDateRange, houseFilter]);\n\n  const totalBets = filteredBets.length;\n  const pendingBets = filteredBets.filter(set => set.status === \"pending\").length;\n  const resolvedBets = filteredBets.filter(set => set.status === \"resolved\").length;\n\n  const totalInvested = filteredBets.reduce((acc, set) => {\n    return acc + set.bets.reduce((sum, bet) => sum + parseFloat(bet.stake), 0);\n  }, 0);\n\n  const totalInvestedPending = filteredBets\n    .filter(set => set.status === \"pending\")\n    .reduce((acc, set) => {\n      return acc + set.bets.reduce((sum, bet) => sum + parseFloat(bet.stake), 0);\n    }, 0);\n\n  const totalInvestedResolved = filteredBets\n    .filter(set => set.status === \"resolved\")\n    .reduce((acc, set) => {\n      return acc + set.bets.reduce((sum, bet) => sum + parseFloat(bet.stake), 0);\n    }, 0);\n\n  const totalProfitResolved = filteredBets\n    .filter(set => set.status === \"resolved\")\n    .reduce((acc, set) => {\n      // Use actualProfit from database (both bets have same value)\n      const firstBet = set.bets[0];\n      if (firstBet?.actualProfit !== undefined && firstBet?.actualProfit !== null) {\n        return acc + parseFloat(String(firstBet.actualProfit));\n      }\n      return acc;\n    }, 0);\n\n  const totalProfitPending = filteredBets\n    .filter(set => set.status === \"pending\")\n    .reduce((acc, set) => {\n      const sortedBets = [...set.bets].sort((a, b) => \n        new Date(a.createdAt!).getTime() - new Date(b.createdAt!).getTime()\n      );\n      const bet1 = sortedBets[0];\n      if (!bet1) return acc;\n      return acc + parseFloat(bet1.potentialProfit);\n    }, 0);\n\n  const totalProfitTotal = totalProfitResolved + totalProfitPending;\n\n  const chartData = useMemo(() => {\n    const resolvedBets = filteredBets\n      .filter(set => set.status === \"resolved\")\n      .map(set => {\n        // Use actualProfit from database\n        const firstBet = set.bets[0];\n        const profit = (firstBet?.actualProfit !== undefined && firstBet?.actualProfit !== null) \n          ? parseFloat(String(firstBet.actualProfit)) \n          : 0;\n\n        const insertionDate = set.createdAt ? new Date(set.createdAt) : new Date();\n        const year = insertionDate.getFullYear();\n        const month = String(insertionDate.getMonth() + 1).padStart(2, '0');\n        const day = String(insertionDate.getDate()).padStart(2, '0');\n        const dateKey = `${year}-${month}-${day}`;\n\n        return {\n          date: dateKey,\n          profit: profit,\n          insertionDate: insertionDate.getTime()\n        };\n      })\n      .sort((a, b) => a.insertionDate - b.insertionDate);\n\n    const dailyProfits = new Map<string, number>();\n    resolvedBets.forEach(bet => {\n      const current = dailyProfits.get(bet.date) || 0;\n      dailyProfits.set(bet.date, current + bet.profit);\n    });\n\n    const sortedDates = Array.from(dailyProfits.keys()).sort();\n    \n    let accumulated = 0;\n    return sortedDates.map(date => {\n      const dayProfit = dailyProfits.get(date) || 0;\n      accumulated += dayProfit;\n      const [year, month, day] = date.split('-');\n      return {\n        date: `${day}/${month}`,\n        lucroAcumulado: parseFloat(accumulated.toFixed(2)),\n        lucroDoDia: parseFloat(dayProfit.toFixed(2))\n      };\n    });\n  }, [filteredBets]);\n\n  const uniqueHouses = Array.from(new Set(bettingHouses.map(h => h.name))).sort();\n\n  const CustomTooltip = ({ active, payload }: TooltipProps<number, string>) => {\n    if (active && payload && payload.length) {\n      const data = payload[0].payload;\n      return (\n        <div className=\"bg-background border rounded-lg p-3 shadow-lg\">\n          <p className=\"font-semibold mb-2\">{data.date}</p>\n          <p className=\"text-sm text-primary font-medium\">\n            Lucro Acumulado: R$ {data.lucroAcumulado.toFixed(2)}\n          </p>\n          <p className=\"text-sm text-muted-foreground\">\n            Lucro do Dia: R$ {data.lucroDoDia.toFixed(2)}\n          </p>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Carregando dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">Dashboard</h1>\n        <p className=\"text-muted-foreground\">\n          Visualize o desempenho das suas apostas\n        </p>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Filtros</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"status-filter\">Status</Label>\n                <Select value={tempStatusFilter} onValueChange={setTempStatusFilter}>\n                  <SelectTrigger id=\"status-filter\" data-testid=\"select-status-filter\">\n                    <SelectValue placeholder=\"Todos\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">Todos</SelectItem>\n                    <SelectItem value=\"pending\">Pendente</SelectItem>\n                    <SelectItem value=\"resolved\">Resolvida</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label>Data de Inserção</Label>\n                <Popover>\n                  <PopoverTrigger asChild>\n                    <Button\n                      variant=\"outline\"\n                      className={cn(\n                        \"w-full justify-start text-left font-normal\",\n                        !tempInsertionDateRange && \"text-muted-foreground\"\n                      )}\n                      data-testid=\"button-insertion-date-range\"\n                    >\n                      <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                      {tempInsertionDateRange?.from ? (\n                        tempInsertionDateRange.to ? (\n                          <>\n                            {format(tempInsertionDateRange.from, \"dd/MM/yyyy\", { locale: ptBR })} -{\" \"}\n                            {format(tempInsertionDateRange.to, \"dd/MM/yyyy\", { locale: ptBR })}\n                          </>\n                        ) : (\n                          format(tempInsertionDateRange.from, \"dd/MM/yyyy\", { locale: ptBR })\n                        )\n                      ) : (\n                        <span>Selecione o período</span>\n                      )}\n                    </Button>\n                  </PopoverTrigger>\n                  <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                    <Calendar\n                      mode=\"range\"\n                      selected={tempInsertionDateRange}\n                      onSelect={setTempInsertionDateRange}\n                      numberOfMonths={2}\n                      locale={ptBR}\n                    />\n                  </PopoverContent>\n                </Popover>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label>Data do Jogo</Label>\n                <Popover>\n                  <PopoverTrigger asChild>\n                    <Button\n                      variant=\"outline\"\n                      className={cn(\n                        \"w-full justify-start text-left font-normal\",\n                        !tempEventDateRange && \"text-muted-foreground\"\n                      )}\n                      data-testid=\"button-event-date-range\"\n                    >\n                      <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                      {tempEventDateRange?.from ? (\n                        tempEventDateRange.to ? (\n                          <>\n                            {format(tempEventDateRange.from, \"dd/MM/yyyy\", { locale: ptBR })} -{\" \"}\n                            {format(tempEventDateRange.to, \"dd/MM/yyyy\", { locale: ptBR })}\n                          </>\n                        ) : (\n                          format(tempEventDateRange.from, \"dd/MM/yyyy\", { locale: ptBR })\n                        )\n                      ) : (\n                        <span>Selecione o período</span>\n                      )}\n                    </Button>\n                  </PopoverTrigger>\n                  <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                    <Calendar\n                      mode=\"range\"\n                      selected={tempEventDateRange}\n                      onSelect={setTempEventDateRange}\n                      numberOfMonths={2}\n                      locale={ptBR}\n                    />\n                  </PopoverContent>\n                </Popover>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"house-filter\">Casa de Aposta</Label>\n                <Select value={tempHouseFilter} onValueChange={setTempHouseFilter}>\n                  <SelectTrigger id=\"house-filter\" data-testid=\"select-house-filter\">\n                    <SelectValue placeholder=\"Todas\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">Todas</SelectItem>\n                    {uniqueHouses.map(house => (\n                      <SelectItem key={house} value={house}>{house}</SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div className=\"flex gap-2\">\n              <Button onClick={applyFilters} data-testid=\"button-apply-filters\">\n                <Filter className=\"w-4 h-4 mr-2\" />\n                Filtrar\n              </Button>\n              <Button variant=\"outline\" onClick={clearFilters} data-testid=\"button-clear-filters\">\n                <X className=\"w-4 h-4 mr-2\" />\n                Limpar Filtros\n              </Button>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total de Apostas</CardTitle>\n            <BarChart3 className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"stat-total-bets\">{totalBets}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              {pendingBets} pendentes • {resolvedBets} resolvidas\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Investido Total</CardTitle>\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"stat-total-invested\">\n              R$ {totalInvested.toFixed(2)}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Pendente: R$ {totalInvestedPending.toFixed(2)}\n            </p>\n            <p className=\"text-xs text-muted-foreground\">\n              Resolvido: R$ {totalInvestedResolved.toFixed(2)}\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Lucro Resolvido</CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className={`text-2xl font-bold ${totalProfitResolved >= 0 ? 'text-green-600' : 'text-red-600'}`} data-testid=\"stat-profit-resolved\">\n              R$ {totalProfitResolved.toFixed(2)}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Apostas já finalizadas\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Lucro Pendente</CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className={`text-2xl font-bold ${totalProfitPending >= 0 ? 'text-blue-600' : 'text-orange-600'}`} data-testid=\"stat-profit-pending\">\n              R$ {totalProfitPending.toFixed(2)}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Lucro potencial estimado\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Lucro Total</CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className={`text-2xl font-bold ${totalProfitTotal >= 0 ? 'text-green-600' : 'text-red-600'}`} data-testid=\"stat-profit-total\">\n              R$ {totalProfitTotal.toFixed(2)}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Resolvido + Pendente\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Lucro Acumulado ao Longo do Tempo</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {chartData.length === 0 ? (\n            <div className=\"h-[400px] flex items-center justify-center text-muted-foreground\">\n              Nenhuma aposta resolvida para exibir no gráfico\n            </div>\n          ) : (\n            <ResponsiveContainer width=\"100%\" height={400}>\n              <LineChart data={chartData}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis \n                  dataKey=\"date\" \n                  label={{ value: 'Data', position: 'insideBottom', offset: -5 }}\n                />\n                <YAxis \n                  label={{ value: 'Lucro (R$)', angle: -90, position: 'insideLeft' }}\n                />\n                <Tooltip content={<CustomTooltip />} />\n                <Legend />\n                <Line \n                  type=\"monotone\" \n                  dataKey=\"lucroAcumulado\" \n                  stroke=\"#2563eb\" \n                  strokeWidth={2}\n                  name=\"Lucro Acumulado\"\n                  dot={{ fill: '#2563eb', r: 4 }}\n                  activeDot={{ r: 6 }}\n                />\n              </LineChart>\n            </ResponsiveContainer>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":19078,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":844,"size_tokens":null},"server/prod.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":777,"size_tokens":null},"client/src/pages/upload.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { ImageUpload } from \"@/components/image-upload\";\nimport { BetForm } from \"@/components/bet-form\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { ArrowLeft, Upload, Wand2 } from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient } from \"@/lib/queryClient\";\n\ntype UploadStep = \"upload\" | \"edit\";\n\nexport default function UploadPage() {\n  const { toast } = useToast();\n  const [currentStep, setCurrentStep] = useState<UploadStep>(\"upload\");\n  const [uploadedImage, setUploadedImage] = useState<string | null>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [extractedData, setExtractedData] = useState<any>(null);\n  const [isSaving, setIsSaving] = useState(false);\n\n  // Check for imported OCR data on component mount\n  useEffect(() => {\n    const importedData = sessionStorage.getItem('importedPDFData');\n    if (importedData) {\n      try {\n        const parsedData = JSON.parse(importedData);\n        // Validate basic structure before using\n        if (parsedData && typeof parsedData === 'object' && parsedData.sport) {\n          setExtractedData(parsedData);\n          setCurrentStep(\"edit\");\n        }\n        // Clear the imported data from sessionStorage\n        sessionStorage.removeItem('importedPDFData');\n      } catch (error) {\n        console.error('Error parsing imported OCR data:', error);\n        sessionStorage.removeItem('importedPDFData');\n      }\n    }\n  }, []);\n\n  const handleImageUpload = (file: File) => {\n    const imageUrl = URL.createObjectURL(file);\n    setUploadedImage(imageUrl);\n    setIsProcessing(true);\n  };\n\n  const handleOCRComplete = (ocrData: any) => {\n    // DEBUG: Log what we receive from backend\n    console.log('handleOCRComplete received ocrData:', ocrData);\n    console.log('Does ocrData have bet3?', {\n      hasBet3: !!ocrData.bet3,\n      bet3House: ocrData.bet3?.house,\n      bet3Type: ocrData.bet3?.type,\n      bet3Odd: ocrData.bet3?.odd\n    });\n    \n    // Transform OCR data to form format, safely handling null values (supports 2 OR 3 bets)\n    const formattedData: any = {\n      eventDate: ocrData.date,\n      sport: ocrData.sport || \"\",\n      league: ocrData.league || \"\",\n      teamA: ocrData.teamA || \"\",\n      teamB: ocrData.teamB || \"\",\n      profitPercentage: String(ocrData.profitPercentage ?? \"\"),\n      bet1House: ocrData.bet1?.house || \"\",\n      bet1HouseId: \"\", // User needs to select this manually\n      bet1Type: ocrData.bet1?.type || \"\",\n      bet1Odd: String(ocrData.bet1?.odd ?? \"\"),\n      bet1Stake: String(ocrData.bet1?.stake ?? \"\"),\n      bet1Profit: String(ocrData.bet1?.profit ?? \"\"),\n      bet1AccountHolder: \"\",\n      bet2House: ocrData.bet2?.house || \"\",\n      bet2HouseId: \"\", // User needs to select this manually\n      bet2Type: ocrData.bet2?.type || \"\",\n      bet2Odd: String(ocrData.bet2?.odd ?? \"\"),\n      bet2Stake: String(ocrData.bet2?.stake ?? \"\"),\n      bet2Profit: String(ocrData.bet2?.profit ?? \"\"),\n      bet2AccountHolder: \"\",\n    };\n    \n    // Add bet3 if it exists\n    if (ocrData.bet3?.house) {\n      formattedData.bet3House = ocrData.bet3.house;\n      formattedData.bet3HouseId = \"\";\n      formattedData.bet3Type = ocrData.bet3.type;\n      formattedData.bet3Odd = String(ocrData.bet3.odd ?? \"\");\n      formattedData.bet3Stake = String(ocrData.bet3.stake ?? \"\");\n      formattedData.bet3Profit = String(ocrData.bet3.profit ?? \"\");\n      formattedData.bet3AccountHolder = \"\";\n    }\n    \n    setExtractedData(formattedData);\n    setIsProcessing(false);\n    setCurrentStep(\"edit\");\n  };\n\n  const handleOCRError = (error: string) => {\n    console.error(\"OCR Error:\", error);\n    setIsProcessing(false);\n    // You could show a toast notification here\n  };\n\n  const handleImageRemove = () => {\n    if (uploadedImage) {\n      URL.revokeObjectURL(uploadedImage);\n    }\n    setUploadedImage(null);\n    setExtractedData(null);\n    setCurrentStep(\"upload\");\n  };\n\n  const handleFormSubmit = async (data: any) => {\n    setIsSaving(true);\n    try {\n      console.log(\"Submitting form data:\", data);\n      \n      // Validate required fields (supports 2 OR 3 bets)\n      // Detect bet3 if any of its fields are populated (from OCR or manual entry)\n      const hasBet3 = !!(data.bet3House || data.bet3Type || data.bet3Odd);\n      \n      if (!data.bet1HouseId || !data.bet2HouseId) {\n        toast({\n          title: \"Campos obrigatórios\",\n          description: \"Por favor, selecione os titulares de conta para ambas as apostas.\",\n          variant: \"destructive\",\n          duration: 3000,\n        });\n        setIsSaving(false);\n        return;\n      }\n      \n      if (hasBet3 && !data.bet3HouseId) {\n        toast({\n          title: \"Campos obrigatórios\",\n          description: \"Por favor, selecione o titular de conta para a terceira aposta.\",\n          variant: \"destructive\",\n          duration: 3000,\n        });\n        setIsSaving(false);\n        return;\n      }\n      \n      // Create surebet set and bets\n      const surebetSetData = {\n        eventDate: data.eventDate || null,\n        sport: data.sport,\n        league: data.league,\n        teamA: data.teamA,\n        teamB: data.teamB,\n        profitPercentage: data.profitPercentage.toString(),\n        status: \"pending\",\n      };\n\n      const bet1Data = {\n        betType: data.bet1Type,\n        odd: data.bet1Odd.toString(),\n        stake: data.bet1Stake.toString(),\n        potentialProfit: data.bet1Profit.toString(),\n        bettingHouseId: data.bet1HouseId,\n      };\n\n      const bet2Data = {\n        betType: data.bet2Type,\n        odd: data.bet2Odd.toString(),\n        stake: data.bet2Stake.toString(),\n        potentialProfit: data.bet2Profit.toString(),\n        bettingHouseId: data.bet2HouseId,\n      };\n\n      const betsArray = [bet1Data, bet2Data];\n      \n      // Add bet3 if it exists\n      if (hasBet3) {\n        const bet3Data = {\n          betType: data.bet3Type,\n          odd: data.bet3Odd.toString(),\n          stake: data.bet3Stake.toString(),\n          potentialProfit: data.bet3Profit.toString(),\n          bettingHouseId: data.bet3HouseId,\n        };\n        betsArray.push(bet3Data);\n      }\n\n      const response = await fetch('/api/surebet-sets', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          surebetSet: surebetSetData,\n          bets: betsArray,\n        }),\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        console.log(\"Bet saved successfully!\", result);\n        \n        // Invalidate queries asynchronously (no await needed for faster UX)\n        queryClient.invalidateQueries({ \n          queryKey: [\"/api/surebet-sets\"],\n          refetchType: 'all' // Force refetch even if data is stale\n        });\n        \n        toast({\n          title: \"✅ Aposta salva!\",\n          description: \"Surebet salvo com sucesso!\",\n          duration: 3000,\n        });\n        \n        setIsSaving(false);\n        // Clear form and stay on upload page\n        handleImageRemove(); // This will reset to upload step and clear all data\n      } else {\n        const errorText = await response.text();\n        console.error(\"Failed to save bet:\", errorText);\n        toast({\n          title: \"❌ Erro ao salvar\",\n          description: \"Erro ao salvar surebet. Verifique os dados e tente novamente.\",\n          variant: \"destructive\",\n          duration: 3000,\n        });\n        setIsSaving(false);\n      }\n    } catch (error) {\n      console.error(\"Error saving bet:\", error);\n      toast({\n        title: \"❌ Erro de conexão\",\n        description: \"Erro ao salvar surebet. Verifique sua conexão e tente novamente.\",\n        variant: \"destructive\",\n        duration: 3000,\n      });\n      setIsSaving(false);\n    }\n  };\n\n  const handleCancel = () => {\n    setCurrentStep(\"upload\");\n    setExtractedData(null);\n  };\n\n  if (currentStep === \"edit\" && extractedData) {\n    // Debug log to verify bet3 data is being passed to BetForm\n    console.log('Upload page passing extractedData to BetForm:', {\n      hasBet3House: !!extractedData.bet3House,\n      hasBet3Type: !!extractedData.bet3Type,\n      hasBet3Odd: !!extractedData.bet3Odd,\n      bet3House: extractedData.bet3House,\n      bet3Type: extractedData.bet3Type,\n      bet3Odd: extractedData.bet3Odd,\n      fullData: extractedData\n    });\n    \n    return (\n      <div className=\"p-6\">\n        <BetForm\n          initialData={extractedData}\n          onSubmit={handleFormSubmit}\n          onCancel={handleCancel}\n          isLoading={isSaving}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Nova Aposta</h1>\n          <p className=\"text-muted-foreground\">\n            Faça upload de um PDF para extrair automaticamente os dados da aposta\n          </p>\n        </div>\n        \n        <Link href=\"/\">\n          <Button variant=\"outline\" data-testid=\"button-back\">\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Voltar\n          </Button>\n        </Link>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Upload className=\"h-5 w-5\" />\n            Upload do PDF\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <ImageUpload\n            onImageUpload={handleImageUpload}\n            onImageRemove={handleImageRemove}\n            uploadedImage={uploadedImage}\n            isProcessing={isProcessing}\n            onOCRComplete={handleOCRComplete}\n            onOCRError={handleOCRError}\n            className=\"min-h-[400px]\"\n          />\n          \n          {isProcessing && (\n            <div className=\"mt-4 p-4 bg-muted rounded-lg\">\n              <div className=\"flex items-center gap-2\">\n                <Wand2 className=\"h-4 w-4 animate-pulse\" />\n                <span className=\"text-sm\">\n                  Processando PDF com pdfplumber... Isso pode levar alguns segundos.\n                </span>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","path":null,"size_bytes":10366,"size_tokens":null},"client/src/components/status-badge.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\nimport { cn } from \"@/lib/utils\";\n\ntype BetStatus = \"pending\" | \"won\" | \"lost\" | \"returned\" | \"half_won\" | \"half_returned\";\n\ninterface StatusBadgeProps {\n  status: BetStatus;\n  className?: string;\n}\n\nconst statusConfig = {\n  pending: {\n    label: \"Pendente\",\n    variant: \"secondary\" as const,\n    className: \"bg-betting-pending text-white\",\n  },\n  won: {\n    label: \"Ganhou\",\n    variant: \"default\" as const,\n    className: \"bg-betting-win text-white\",\n  },\n  lost: {\n    label: \"Perdeu\",\n    variant: \"destructive\" as const,\n    className: \"bg-betting-loss text-white\",\n  },\n  returned: {\n    label: \"Devolvido\",\n    variant: \"outline\" as const,\n    className: \"bg-betting-returned text-foreground\",\n  },\n  half_won: {\n    label: \"Meio Green - Ganho\",\n    variant: \"default\" as const,\n    className: \"bg-sky-400 text-white\",\n  },\n  half_returned: {\n    label: \"Meio Green - Devolvido\",\n    variant: \"outline\" as const,\n    className: \"bg-sky-100 dark:bg-sky-900 text-sky-700 dark:text-sky-300\",\n  },\n};\n\nexport function StatusBadge({ status, className }: StatusBadgeProps) {\n  const config = statusConfig[status];\n  \n  return (\n    <Badge\n      variant={config.variant}\n      className={cn(config.className, className)}\n      data-testid={`badge-status-${status}`}\n    >\n      {config.label}\n    </Badge>\n  );\n}","path":null,"size_bytes":1360,"size_tokens":null},"client/src/pages/account-holders.tsx":{"content":"import { AccountHolderForm } from \"@/components/account-holder-form\";\n\nexport default function AccountHoldersPage() {\n  const handleSave = (data: any) => {\n    console.log(\"Account holder saved:\", data);\n    // Here would be API call to save the account holder\n  };\n\n  const handleSaveHouse = (holderId: string, data: any) => {\n    console.log(\"Betting house saved:\", data, \"for holder:\", holderId);\n    // Here would be API call to save the betting house\n  };\n\n  return (\n    <div className=\"p-6\">\n      <AccountHolderForm \n        onSave={handleSave}\n        onSaveHouse={handleSaveHouse}\n      />\n    </div>\n  );\n}","path":null,"size_bytes":617,"size_tokens":null},"client/src/components/examples/BetCard.tsx":{"content":"import { BetCard } from '../bet-card';\n\nexport default function BetCardExample() {\n  const mockBetData = {\n    id: \"1\",\n    eventDate: \"2024-09-29T15:48:00\",\n    sport: \"Futebol\",\n    league: \"Liga Pro Jupiler\",\n    teamA: \"OH Leuven\",\n    teamB: \"Anderlecht\",\n    profitPercentage: 2.22,\n    status: \"pending\" as const,\n    bet1: {\n      id: \"b1\",\n      house: \"Pinnacle\",\n      accountHolder: \"João Silva\",\n      betType: \"Acima 2.25\",\n      odd: 2.25,\n      stake: 2650.00,\n      potentialProfit: 106.00,\n    },\n    bet2: {\n      id: \"b2\",\n      house: \"Betano\",\n      accountHolder: \"Maria Santos\",\n      betType: \"Abaixo 2.25\",\n      odd: 2.25,\n      stake: 2120.00,\n      potentialProfit: 106.00,\n    },\n  };\n\n  const handleResolve = (betId: string, result: \"won\" | \"lost\" | \"returned\") => {\n    console.log(`Resolved ${betId} as ${result}`);\n  };\n\n  return (\n    <div className=\"max-w-4xl p-4\">\n      <BetCard {...mockBetData} onResolve={handleResolve} />\n    </div>\n  );\n}","path":null,"size_bytes":981,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":1977,"size_tokens":null},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, decimal, timestamp, boolean } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Users (system users with login credentials)\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: text(\"email\").notNull().unique(),\n  password: text(\"password\").notNull(), // hashed password\n  name: text(\"name\").notNull(),\n  role: text(\"role\").notNull().default(\"user\"), // \"admin\" or \"user\"\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Account holders (people who own betting accounts)\nexport const accountHolders = pgTable(\"account_holders\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id),\n  name: text(\"name\").notNull(),\n  email: text(\"email\"),\n  username: text(\"username\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Betting houses (casas de apostas)\nexport const bettingHouses = pgTable(\"betting_houses\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id),\n  name: text(\"name\").notNull(),\n  notes: text(\"notes\"), // Campo para notas/informações adicionais\n  accountHolderId: varchar(\"account_holder_id\").references(() => accountHolders.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Surebet sets (each OCR extraction creates one set with two bets)\nexport const surebetSets = pgTable(\"surebet_sets\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id),\n  eventDate: timestamp(\"event_date\"),\n  sport: text(\"sport\"),\n  league: text(\"league\"),\n  teamA: text(\"team_a\"),\n  teamB: text(\"team_b\"),\n  profitPercentage: decimal(\"profit_percentage\", { precision: 5, scale: 2 }),\n  status: text(\"status\").default(\"pending\"), // pending, resolved\n  isChecked: boolean(\"is_checked\").default(false), // user verification flag\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Individual bets within a surebet set\nexport const bets = pgTable(\"bets\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  surebetSetId: varchar(\"surebet_set_id\").references(() => surebetSets.id),\n  bettingHouseId: varchar(\"betting_house_id\").references(() => bettingHouses.id),\n  betType: text(\"bet_type\").notNull(), // \"Acima 2.25\", \"1x2\", etc.\n  odd: decimal(\"odd\", { precision: 8, scale: 3 }).notNull(),\n  stake: decimal(\"stake\", { precision: 10, scale: 2 }).notNull(),\n  potentialProfit: decimal(\"potential_profit\", { precision: 10, scale: 2 }).notNull(),\n  result: text(\"result\"), // \"won\", \"lost\", \"returned\", \"half_won\", \"half_returned\", null for pending\n  actualProfit: decimal(\"actual_profit\", { precision: 10, scale: 2 }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Insert schemas\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertAccountHolderSchema = createInsertSchema(accountHolders).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertBettingHouseSchema = createInsertSchema(bettingHouses).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertSurebetSetSchema = createInsertSchema(surebetSets).omit({\n  id: true,\n  createdAt: true,\n}).extend({\n  eventDate: z.union([z.date(), z.string().nullable()]).transform((val) => {\n    if (typeof val === 'string') {\n      return new Date(val);\n    }\n    return val;\n  }).nullable(),\n});\n\nexport const insertBetSchema = createInsertSchema(bets).omit({\n  id: true,\n  createdAt: true,\n});\n\n// Types\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\n\nexport type AccountHolder = typeof accountHolders.$inferSelect;\nexport type InsertAccountHolder = z.infer<typeof insertAccountHolderSchema>;\n\nexport type BettingHouse = typeof bettingHouses.$inferSelect;\nexport type InsertBettingHouse = z.infer<typeof insertBettingHouseSchema>;\n\nexport type SurebetSet = typeof surebetSets.$inferSelect;\nexport type InsertSurebetSet = z.infer<typeof insertSurebetSetSchema>;\n\nexport type Bet = typeof bets.$inferSelect;\nexport type InsertBet = z.infer<typeof insertBetSchema>;\n\n// Combined types for API responses\nexport type BettingHouseWithAccountHolder = BettingHouse & {\n  accountHolder: AccountHolder | null;\n};\n\nexport type SurebetSetWithBets = SurebetSet & {\n  bets: (Bet & {\n    bettingHouse: BettingHouse & {\n      accountHolder: AccountHolder;\n    };\n  })[];\n};\n\n// OCR extraction result type - allows null values for missing data (no fallbacks)\n// Supports 2 or 3 bets per surebet\nexport type OCRResult = {\n  date: string | null;\n  sport: string | null;\n  league: string | null;\n  teamA: string | null;\n  teamB: string | null;\n  bet1: {\n    house: string | null;\n    odd: number | null;\n    type: string | null;\n    stake: number | null;\n    profit: number | null;\n    accountHolder?: string;\n  };\n  bet2: {\n    house: string | null;\n    odd: number | null;\n    type: string | null;\n    stake: number | null;\n    profit: number | null;\n    accountHolder?: string;\n  };\n  bet3?: {\n    house: string | null;\n    odd: number | null;\n    type: string | null;\n    stake: number | null;\n    profit: number | null;\n    accountHolder?: string;\n  };\n  profitPercentage: number | null;\n};","path":null,"size_bytes":5418,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":710,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1883,"size_tokens":null},"client/src/components/examples/ThemeToggle.tsx":{"content":"import { ThemeToggle } from '../theme-toggle';\nimport { ThemeProvider } from '../theme-provider';\n\nexport default function ThemeToggleExample() {\n  return (\n    <ThemeProvider>\n      <div className=\"p-4\">\n        <ThemeToggle />\n      </div>\n    </ThemeProvider>\n  );\n}","path":null,"size_bytes":269,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":2263,"size_tokens":null},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { db } from \"./db\";\nimport { bets } from \"@shared/schema\";\nimport { eq } from \"drizzle-orm\";\nimport { PdfPlumberService } from \"./pdf-plumber-service\";\nimport { insertAccountHolderSchema, insertBettingHouseSchema, insertSurebetSetSchema, insertBetSchema, insertUserSchema } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport multer from \"multer\";\nimport { setupAuth, hashPassword } from \"./auth\";\n\nconst upload = multer({ \n  storage: multer.memoryStorage(),\n  limits: {\n    fileSize: 50 * 1024 * 1024, // 50MB limit for PDFs\n  },\n  fileFilter: (req, file, cb) => {\n    if (file.mimetype === 'application/pdf') {\n      cb(null, true);\n    } else {\n      cb(new Error('Only PDF documents are allowed'));\n    }\n  }\n});\n\nconst pdfPlumberService = new PdfPlumberService();\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Setup authentication\n  setupAuth(app);\n\n  // Middleware to check if user is authenticated\n  const requireAuth = (req: any, res: any, next: any) => {\n    if (!req.isAuthenticated()) {\n      return res.status(401).json({ error: \"Unauthorized\" });\n    }\n    next();\n  };\n\n  // Middleware to check if user is admin\n  const requireAdmin = (req: any, res: any, next: any) => {\n    if (!req.isAuthenticated() || req.user.role !== 'admin') {\n      return res.status(403).json({ error: \"Forbidden\" });\n    }\n    next();\n  };\n\n  // User management routes (admin only)\n  app.get(\"/api/users\", requireAdmin, async (req, res) => {\n    try {\n      const users = await storage.getAllUsers();\n      const usersWithoutPassword = users.map(({ password, ...user }) => user);\n      res.json(usersWithoutPassword);\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n      res.status(500).json({ error: \"Failed to fetch users\" });\n    }\n  });\n\n  app.post(\"/api/users\", requireAdmin, async (req, res) => {\n    try {\n      const data = insertUserSchema.parse(req.body);\n      const hashedData = {\n        ...data,\n        password: await hashPassword(data.password),\n      };\n      const user = await storage.createUser(hashedData);\n      const { password, ...userWithoutPassword } = user;\n      res.json(userWithoutPassword);\n    } catch (error) {\n      console.error(\"Error creating user:\", error);\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid data\", details: error.errors });\n      } else {\n        res.status(500).json({ error: \"Failed to create user\" });\n      }\n    }\n  });\n\n  app.put(\"/api/users/:id\", requireAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      // Users can only edit themselves unless they're admin\n      if (req.user!.role !== 'admin' && req.user!.id !== id) {\n        return res.status(403).json({ error: \"Forbidden\" });\n      }\n\n      const data = insertUserSchema.partial().parse(req.body);\n      const updateData: any = { ...data };\n      \n      if (data.password) {\n        updateData.password = await hashPassword(data.password);\n      }\n\n      const user = await storage.updateUser(id, updateData);\n      const { password, ...userWithoutPassword } = user;\n      res.json(userWithoutPassword);\n    } catch (error) {\n      console.error(\"Error updating user:\", error);\n      res.status(500).json({ error: \"Failed to update user\" });\n    }\n  });\n\n  app.delete(\"/api/users/:id\", requireAdmin, async (req, res) => {\n    try {\n      const { id } = req.params;\n      await storage.deleteUser(id);\n      res.sendStatus(204);\n    } catch (error) {\n      console.error(\"Error deleting user:\", error);\n      res.status(500).json({ error: \"Failed to delete user\" });\n    }\n  });\n\n  // Account Holders routes\n  app.get(\"/api/account-holders\", requireAuth, async (req, res) => {\n    try {\n      const accountHolders = await storage.getAccountHolders(req.user!.id);\n      res.json(accountHolders);\n    } catch (error) {\n      console.error(\"Error fetching account holders:\", error);\n      res.status(500).json({ error: \"Failed to fetch account holders\" });\n    }\n  });\n\n  app.post(\"/api/account-holders\", requireAuth, async (req, res) => {\n    try {\n      const data = insertAccountHolderSchema.parse(req.body);\n      const accountHolder = await storage.createAccountHolder({ ...data, userId: req.user!.id });\n      res.json(accountHolder);\n    } catch (error) {\n      console.error(\"Error creating account holder:\", error);\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid data\", details: error.errors });\n      } else {\n        res.status(500).json({ error: \"Failed to create account holder\" });\n      }\n    }\n  });\n\n  app.put(\"/api/account-holders/:id\", requireAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const data = insertAccountHolderSchema.partial().parse(req.body);\n      const accountHolder = await storage.updateAccountHolder(id, data);\n      res.json(accountHolder);\n    } catch (error) {\n      console.error(\"Error updating account holder:\", error);\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid data\", details: error.errors });\n      } else if (error instanceof Error && error.message === 'Account holder not found') {\n        res.status(404).json({ error: \"Account holder not found\" });\n      } else {\n        res.status(500).json({ error: \"Failed to update account holder\" });\n      }\n    }\n  });\n\n  app.delete(\"/api/account-holders/:id\", requireAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      await storage.deleteAccountHolder(id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting account holder:\", error);\n      res.status(500).json({ error: \"Failed to delete account holder\" });\n    }\n  });\n\n  // Betting Houses routes\n  app.get(\"/api/betting-houses\", requireAuth, async (req, res) => {\n    try {\n      const { accountHolderId } = req.query;\n      let bettingHouses;\n      \n      if (accountHolderId) {\n        bettingHouses = await storage.getBettingHousesByHolder(accountHolderId as string);\n      } else {\n        bettingHouses = await storage.getBettingHouses(req.user!.id);\n      }\n      \n      res.json(bettingHouses);\n    } catch (error) {\n      console.error(\"Error fetching betting houses:\", error);\n      res.status(500).json({ error: \"Failed to fetch betting houses\" });\n    }\n  });\n\n  app.post(\"/api/betting-houses\", requireAuth, async (req, res) => {\n    try {\n      const data = insertBettingHouseSchema.parse(req.body);\n      const bettingHouse = await storage.createBettingHouse({ ...data, userId: req.user!.id });\n      res.json(bettingHouse);\n    } catch (error) {\n      console.error(\"Error creating betting house:\", error);\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid data\", details: error.errors });\n      } else {\n        res.status(500).json({ error: \"Failed to create betting house\" });\n      }\n    }\n  });\n\n  app.put(\"/api/betting-houses/:id\", requireAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const data = insertBettingHouseSchema.partial().parse(req.body);\n      const bettingHouse = await storage.updateBettingHouse(id, data);\n      res.json(bettingHouse);\n    } catch (error) {\n      console.error(\"Error updating betting house:\", error);\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid data\", details: error.errors });\n      } else if (error instanceof Error && error.message === 'Betting house not found') {\n        res.status(404).json({ error: \"Betting house not found\" });\n      } else {\n        res.status(500).json({ error: \"Failed to update betting house\" });\n      }\n    }\n  });\n\n  app.delete(\"/api/betting-houses/:id\", requireAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      await storage.deleteBettingHouse(id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting betting house:\", error);\n      res.status(500).json({ error: \"Failed to delete betting house\" });\n    }\n  });\n\n  // Surebet Sets routes\n  app.get(\"/api/surebet-sets\", requireAuth, async (req, res) => {\n    try {\n      const surebetSets = await storage.getSurebetSets(req.user!.id);\n      res.json(surebetSets);\n    } catch (error) {\n      console.error(\"Error fetching surebet sets:\", error);\n      res.status(500).json({ error: \"Failed to fetch surebet sets\" });\n    }\n  });\n\n  app.get(\"/api/surebet-sets/:id\", requireAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const surebetSet = await storage.getSurebetSetById(id);\n      if (!surebetSet) {\n        res.status(404).json({ error: \"Surebet set not found\" });\n        return;\n      }\n      res.json(surebetSet);\n    } catch (error) {\n      console.error(\"Error fetching surebet set:\", error);\n      res.status(500).json({ error: \"Failed to fetch surebet set\" });\n    }\n  });\n\n  app.post(\"/api/surebet-sets\", requireAuth, async (req, res) => {\n    try {\n      const { surebetSet, bets: setBets } = req.body;\n      \n      // Validate number of bets (supports 2 or 3 bets)\n      if (!Array.isArray(setBets) || setBets.length < 2 || setBets.length > 3) {\n        res.status(400).json({ error: \"Surebet must have 2 or 3 bets\" });\n        return;\n      }\n      \n      // Validate surebet set data\n      const surebetData = insertSurebetSetSchema.parse(surebetSet);\n      \n      // Create the surebet set first\n      const createdSet = await storage.createSurebetSet({ ...surebetData, userId: req.user!.id });\n      \n      // Validate and create the associated bets\n      const createdBets = [];\n      for (const betData of setBets) {\n        const validatedBet = insertBetSchema.parse({\n          ...betData,\n          surebetSetId: createdSet.id\n        });\n        const createdBet = await storage.createBet(validatedBet);\n        createdBets.push(createdBet);\n      }\n      \n      res.json({\n        surebetSet: createdSet,\n        bets: createdBets\n      });\n    } catch (error) {\n      console.error(\"Error creating surebet set:\", error);\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid data\", details: error.errors });\n      } else {\n        res.status(500).json({ error: \"Failed to create surebet set\" });\n      }\n    }\n  });\n\n  app.put(\"/api/surebet-sets/:id\", requireAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const data = insertSurebetSetSchema.partial().parse(req.body);\n      const surebetSet = await storage.updateSurebetSet(id, data);\n      res.json(surebetSet);\n    } catch (error) {\n      console.error(\"Error updating surebet set:\", error);\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid data\", details: error.errors });\n      } else if (error instanceof Error && error.message === 'Surebet set not found') {\n        res.status(404).json({ error: \"Surebet set not found\" });\n      } else {\n        res.status(500).json({ error: \"Failed to update surebet set\" });\n      }\n    }\n  });\n\n  app.delete(\"/api/surebet-sets/:id\", requireAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      await storage.deleteSurebetSet(id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting surebet set:\", error);\n      res.status(500).json({ error: \"Failed to delete surebet set\" });\n    }\n  });\n\n  // Individual Bet operations\n  app.put(\"/api/bets/:id\", requireAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const updateData = insertBetSchema.partial().parse(req.body);\n      \n      const updatedBet = await storage.updateBet(id, updateData);\n      \n      // If odd or stake is updated, recalculate profit potential for all bets (2 or 3)\n      if (updatedBet.surebetSetId && (updateData.odd !== undefined || updateData.stake !== undefined)) {\n        const allBets = await db.select().from(bets).where(eq(bets.surebetSetId, updatedBet.surebetSetId));\n        \n        if (allBets.length === 2 || allBets.length === 3) {\n          // Calculate total stakes for all bets\n          const totalStakes = allBets.reduce((sum, bet) => sum + parseFloat(String(bet.stake)), 0);\n          \n          // For each bet, calculate profit potential if that bet wins\n          // Formula: (stake × odd) - totalStakes\n          for (const bet of allBets) {\n            const stake = parseFloat(String(bet.stake));\n            const odd = parseFloat(String(bet.odd));\n            const profitPotential = (stake * odd) - totalStakes;\n            \n            await storage.updateBet(bet.id, { potentialProfit: String(profitPotential) });\n          }\n        }\n      }\n      \n      // Check if all bets in the surebet set have results and calculate actual profit (supports 2 or 3 bets)\n      if (updatedBet.surebetSetId && updateData.result) {\n        const allBets = await db.select().from(bets).where(eq(bets.surebetSetId, updatedBet.surebetSetId));\n        const allHaveResults = allBets.every(b => b.result != null);\n        \n        console.log(`[PROFIT CALC] Surebet ${updatedBet.surebetSetId}: ${allBets.length} bets, all have results: ${allHaveResults}`);\n        \n        // Calculate profit for both dual (2 bets) and triple (3 bets) surebets\n        if (allHaveResults && (allBets.length === 2 || allBets.length === 3)) {\n          // Helper function to calculate return for each bet based on result\n          const calculateReturn = (bet: typeof allBets[0]): number => {\n            const stake = parseFloat(String(bet.stake));\n            const odd = parseFloat(String(bet.odd));\n            \n            switch (bet.result) {\n              case \"won\":\n                return stake * odd;\n              case \"lost\":\n                return 0;\n              case \"returned\":\n                return stake;\n              case \"half_won\":\n                // Half stake at odd + half stake returned\n                return (stake / 2) * odd + (stake / 2);\n              case \"half_returned\":\n                // Half stake returned, half lost\n                return stake / 2;\n              default:\n                return 0;\n            }\n          };\n          \n          // Calculate total return and invested for all bets (2 or 3)\n          const totalReturn = allBets.reduce((sum, bet) => sum + calculateReturn(bet), 0);\n          const totalInvested = allBets.reduce((sum, bet) => sum + parseFloat(String(bet.stake)), 0);\n          const actualProfit = totalReturn - totalInvested;\n          \n          console.log(`[PROFIT CALC] Total return: ${totalReturn}, Total invested: ${totalInvested}, Actual profit: ${actualProfit}`);\n          console.log(`[PROFIT CALC] Bet results: ${allBets.map((b, i) => `bet${i+1}: ${b.result}`).join(', ')}`);\n          \n          // Update ALL bets in the set with the same calculated actual profit\n          for (const bet of allBets) {\n            console.log(`[PROFIT CALC] Updating bet ${bet.id} with actualProfit: ${actualProfit}`);\n            await storage.updateBet(bet.id, { actualProfit: String(actualProfit) });\n          }\n          \n          // Update surebet set status to resolved\n          await storage.updateSurebetSet(updatedBet.surebetSetId, { status: \"resolved\" });\n          console.log(`[PROFIT CALC] Surebet set ${updatedBet.surebetSetId} marked as resolved`);\n        }\n      }\n      \n      res.json(updatedBet);\n    } catch (error) {\n      console.error(\"Error updating bet:\", error);\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid data\", details: error.errors });\n      } else if (error instanceof Error && error.message === 'Bet not found') {\n        res.status(404).json({ error: \"Bet not found\" });\n      } else {\n        res.status(500).json({ error: \"Failed to update bet\" });\n      }\n    }\n  });\n\n  // Update surebet set status or checked flag\n  app.patch(\"/api/surebet-sets/:id/status\", requireAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const body = z.object({ \n        status: z.enum([\"pending\", \"resolved\"]).optional(),\n        isChecked: z.boolean().optional()\n      }).parse(req.body);\n      \n      const updatedSet = await storage.updateSurebetSet(id, body);\n      res.json(updatedSet);\n    } catch (error: any) {\n      console.error(\"Error updating surebet set:\", error);\n      res.status(400).json({ error: error.message || \"Invalid request data\" });\n    }\n  });\n\n  // Reset surebet set results\n  app.post(\"/api/surebet-sets/:id/reset\", requireAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      \n      // Get all bets for this surebet set\n      const allBets = await db.select().from(bets).where(eq(bets.surebetSetId, id));\n      \n      // Reset all bets\n      for (const bet of allBets) {\n        await storage.updateBet(bet.id, { \n          result: null, \n          actualProfit: null \n        });\n      }\n      \n      // Reset surebet set status to pending\n      const updatedSet = await storage.updateSurebetSet(id, { status: \"pending\" });\n      \n      res.json(updatedSet);\n    } catch (error: any) {\n      console.error(\"Error resetting surebet set:\", error);\n      res.status(500).json({ error: error.message || \"Failed to reset surebet set\" });\n    }\n  });\n\n  // OCR processing route - accepts file and optional custom prompt\n  app.post(\"/api/ocr/process\", requireAuth, upload.single('file'), async (req, res) => {\n    try {\n      if (!req.file) {\n        res.status(400).json({ error: \"No file provided\" });\n        return;\n      }\n\n      // Extract custom prompt from request body (if provided)\n      const customPrompt = req.body.prompt || null;\n      console.log(`AI OCR disabled; using pdfplumber for PDF processing`);\n      \n      const ocrResult = await pdfPlumberService.processDocument(\n        req.file.buffer,\n        req.file.originalname,\n        req.file.mimetype,\n        customPrompt\n      );\n      \n      res.json({\n        success: true,\n        data: ocrResult\n      });\n    } catch (error) {\n      console.error(\"pdfplumber processing error:\", error);\n      res.status(400).json({ \n        error: \"Failed to process OCR\",\n        message: error instanceof Error ? error.message : \"Unknown error\"\n      });\n    }\n  });\n\n  // Batch OCR processing route - accepts multiple files\n  app.post(\"/api/ocr/process-batch\", requireAuth, upload.array('files', 50), async (req, res) => {\n    try {\n      const files = req.files as Express.Multer.File[];\n      \n      if (!files || files.length === 0) {\n        res.status(400).json({ error: \"No files provided\" });\n        return;\n      }\n\n      console.log(`Batch processing ${files.length} PDF(s)...`);\n\n      const results = await Promise.all(\n        files.map(async (file) => {\n          try {\n            const ocrResult = await pdfPlumberService.processDocument(\n              file.buffer,\n              file.originalname,\n              file.mimetype,\n              undefined\n            );\n\n            return {\n              fileName: file.originalname,\n              success: true,\n              data: ocrResult\n            };\n          } catch (error) {\n            console.error(`Error processing ${file.originalname}:`, error);\n            return {\n              fileName: file.originalname,\n              success: false,\n              error: error instanceof Error ? error.message : \"Unknown error\"\n            };\n          }\n        })\n      );\n\n      const successCount = results.filter(r => r.success).length;\n      console.log(`Batch processing complete: ${successCount}/${files.length} successful`);\n\n      res.json({\n        success: true,\n        results\n      });\n    } catch (error) {\n      console.error(\"Batch processing error:\", error);\n      res.status(500).json({\n        error: \"Failed to process batch\",\n        message: error instanceof Error ? error.message : \"Unknown error\"\n      });\n    }\n  });\n\n  // Database migration routes (admin only)\n  app.get(\"/api/admin/migration/export-sql\", requireAdmin, async (req, res) => {\n    try {\n      const { MigrationService } = await import(\"./migration-service\");\n      const migrationService = new MigrationService();\n      const sqlContent = await migrationService.exportToSQL();\n      \n      res.setHeader('Content-Type', 'application/sql');\n      res.setHeader('Content-Disposition', 'attachment; filename=\"supabase_migration.sql\"');\n      res.send(sqlContent);\n    } catch (error) {\n      console.error(\"Export error:\", error);\n      res.status(500).json({ \n        error: error instanceof Error ? error.message : \"Export failed\" \n      });\n    }\n  });\n\n  app.get(\"/api/admin/migration/stats\", requireAdmin, async (req, res) => {\n    try {\n      const { MigrationService } = await import(\"./migration-service\");\n      const migrationService = new MigrationService();\n      const stats = await migrationService.getStats();\n      \n      res.json(stats);\n    } catch (error) {\n      console.error(\"Stats error:\", error);\n      res.status(500).json({ \n        error: error instanceof Error ? error.message : \"Failed to get stats\" \n      });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}","path":null,"size_bytes":21273,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","path":null,"size_bytes":2695,"size_tokens":null},"DEPLOY_GUIDE.md":{"content":"# Guia de Deploy - BetTracker Pro com Docker + Portainer\n\n## Parte 1: Comprar uma VPS\n\n### Provedores Recomendados (Preços em USD/mês)\n\n| Provedor | Plano Mínimo | RAM | CPU | Armazenamento | Preço |\n|----------|--------------|-----|-----|---------------|-------|\n| **Hostinger** | VPS 1 | 4GB | 2 vCPU | 50GB NVMe | ~$5.99 |\n| **Contabo** | VPS S | 4GB | 4 vCPU | 50GB SSD | ~$6.99 |\n| **DigitalOcean** | Basic | 2GB | 1 vCPU | 50GB SSD | ~$12.00 |\n| **Hetzner** | CX22 | 4GB | 2 vCPU | 40GB SSD | ~$4.50 |\n| **Vultr** | Regular | 2GB | 1 vCPU | 55GB SSD | ~$12.00 |\n\n### Passo a Passo para Comprar (Exemplo: Hostinger)\n\n1. Acesse [hostinger.com.br](https://www.hostinger.com.br/servidor-vps)\n2. Escolha o plano **VPS 1** ou superior\n3. Selecione o sistema operacional: **Ubuntu 22.04**\n4. Escolha a localização: **São Paulo** (melhor para Brasil)\n5. Complete o pagamento\n6. Você receberá por email:\n   - IP do servidor\n   - Senha root\n   - Porta SSH (geralmente 22)\n\n---\n\n## Parte 2: Configurar a VPS\n\n### 2.1 Conectar via SSH\n\n```bash\n# No Windows: use PowerShell, CMD ou PuTTY\n# No Mac/Linux: use o Terminal\n\nssh root@SEU_IP_DO_SERVIDOR\n```\n\n### 2.2 Atualizar o Sistema\n\n```bash\napt update && apt upgrade -y\n```\n\n### 2.3 Instalar Docker\n\n```bash\n# Instalar dependências\napt install -y apt-transport-https ca-certificates curl software-properties-common\n\n# Adicionar chave GPG do Docker\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n\n# Adicionar repositório\necho \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" | tee /etc/apt/sources.list.d/docker.list > /dev/null\n\n# Instalar Docker\napt update\napt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin\n\n# Verificar instalação\ndocker --version\ndocker compose version\n```\n\n### 2.4 Instalar Portainer\n\n```bash\n# Criar volume para dados do Portainer\ndocker volume create portainer_data\n\n# Instalar Portainer\ndocker run -d \\\n  -p 8000:8000 \\\n  -p 9443:9443 \\\n  --name portainer \\\n  --restart=always \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  -v portainer_data:/data \\\n  portainer/portainer-ce:latest\n```\n\n### 2.5 Acessar Portainer\n\n1. Abra no navegador: `https://SEU_IP:9443`\n2. Crie uma senha de administrador (mínimo 12 caracteres)\n3. Selecione \"Local\" para gerenciar o Docker local\n4. Clique em \"Connect\"\n\n---\n\n## Parte 3: Fazer Deploy do BetTracker Pro\n\n### 3.1 Preparar os Arquivos\n\n**Opção A: Via Git (Recomendado)**\n\n```bash\n# Na VPS, crie uma pasta para o projeto\nmkdir -p /opt/bettracker\ncd /opt/bettracker\n\n# Clone seu repositório (se estiver no GitHub)\ngit clone https://github.com/SEU_USUARIO/SEU_REPO.git .\n```\n\n**Opção B: Upload Manual via FileZilla/SFTP**\n\n1. Baixe o FileZilla: [filezilla-project.org](https://filezilla-project.org/)\n2. Conecte usando:\n   - Host: `sftp://SEU_IP`\n   - Usuário: `root`\n   - Senha: sua senha\n   - Porta: `22`\n3. Faça upload de todos os arquivos para `/opt/bettracker`\n\n### 3.2 Criar Arquivo de Variáveis de Ambiente\n\n```bash\ncd /opt/bettracker\nnano .env\n```\n\nCole o seguinte conteúdo (substitua os valores):\n\n```env\n# Banco de dados Supabase\nSUPABASE_DATABASE_URL=postgresql://postgres.xxxxx:SENHA@aws-0-sa-east-1.pooler.supabase.com:6543/postgres\n\n# Segredo para sessões (gere um aleatório)\nSESSION_SECRET=sua_chave_secreta_muito_longa_aqui_123456\n```\n\nSalve com `Ctrl+O`, Enter, `Ctrl+X`\n\n### 3.3 Deploy via Portainer\n\n1. Acesse Portainer: `https://SEU_IP:9443`\n2. Vá em **Stacks** no menu lateral\n3. Clique em **+ Add stack**\n4. Dê um nome: `bettracker`\n5. Selecione **Upload** e faça upload do `docker-compose.yml`\n6. Em **Environment variables**, adicione:\n   - `SUPABASE_DATABASE_URL` = sua URL do Supabase\n   - `SESSION_SECRET` = uma chave secreta longa\n7. Clique em **Deploy the stack**\n\n### 3.4 Deploy via Linha de Comando (Alternativa)\n\n```bash\ncd /opt/bettracker\n\n# Construir a imagem\ndocker compose build\n\n# Iniciar o container\ndocker compose up -d\n\n# Ver logs\ndocker compose logs -f\n```\n\n---\n\n## Parte 4: Configurar Domínio e HTTPS (Opcional)\n\n### 4.1 Instalar Nginx Proxy Manager\n\n```bash\n# Criar pasta\nmkdir -p /opt/nginx-proxy-manager\ncd /opt/nginx-proxy-manager\n\n# Criar docker-compose.yml\ncat > docker-compose.yml << 'EOF'\nversion: '3.8'\nservices:\n  app:\n    image: 'jc21/nginx-proxy-manager:latest'\n    restart: unless-stopped\n    ports:\n      - '80:80'\n      - '443:443'\n      - '81:81'\n    volumes:\n      - ./data:/data\n      - ./letsencrypt:/etc/letsencrypt\nEOF\n\n# Iniciar\ndocker compose up -d\n```\n\n### 4.2 Configurar Domínio\n\n1. Acesse: `http://SEU_IP:81`\n2. Login padrão: `admin@example.com` / `changeme`\n3. Mude a senha imediatamente\n4. Vá em **Proxy Hosts** > **Add Proxy Host**\n5. Configure:\n   - Domain: `seudominio.com.br`\n   - Forward Hostname: `bettracker` (nome do container)\n   - Forward Port: `5000`\n   - Enable SSL: Marcar\n   - Force SSL: Marcar\n\n---\n\n## Parte 5: Manutenção\n\n### Comandos Úteis\n\n```bash\n# Ver containers rodando\ndocker ps\n\n# Ver logs do BetTracker\ndocker logs bettracker-pro -f\n\n# Reiniciar container\ndocker restart bettracker-pro\n\n# Parar container\ndocker stop bettracker-pro\n\n# Atualizar aplicação\ncd /opt/bettracker\ngit pull\ndocker compose build\ndocker compose up -d\n\n# Limpar imagens antigas\ndocker image prune -a\n```\n\n### Backup do Banco de Dados\n\nO banco está no Supabase, então os backups são automáticos. Você pode também exportar manualmente pelo painel do Supabase.\n\n---\n\n## Resumo de Portas\n\n| Serviço | Porta | Acesso |\n|---------|-------|--------|\n| BetTracker Pro | 5000 | `http://SEU_IP:5000` |\n| Portainer | 9443 | `https://SEU_IP:9443` |\n| Nginx Proxy Manager | 81 | `http://SEU_IP:81` |\n| HTTP | 80 | Via proxy |\n| HTTPS | 443 | Via proxy |\n\n---\n\n## Problemas Comuns\n\n### Erro de conexão com banco\n- Verifique se a URL do Supabase está correta no `.env`\n- Certifique-se de usar a URL com pooler (porta 6543)\n\n### Container não inicia\n```bash\ndocker logs bettracker-pro\n```\nVerifique os logs para identificar o erro.\n\n### Porta já em uso\n```bash\n# Verificar o que está usando a porta\nlsof -i :5000\n\n# Mudar a porta no docker-compose.yml\nports:\n  - \"8080:5000\"  # Muda para 8080 externamente\n```\n\n---\n\n## Suporte\n\nSe precisar de ajuda, verifique:\n1. Logs do container: `docker logs bettracker-pro`\n2. Status do Docker: `docker ps -a`\n3. Espaço em disco: `df -h`\n4. Memória: `free -h`\n","path":null,"size_bytes":6520,"size_tokens":null},"server/index.prod.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { log, serveStatic } from \"./prod\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  serveStatic(app);\n\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","path":null,"size_bytes":1556,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","path":null,"size_bytes":1280,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4420,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1467,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","path":null,"size_bytes":1904,"size_tokens":null},"client/src/components/bet-filters.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { DatePickerWithRange } from \"@/components/ui/date-range-picker\";\nimport { Filter, X, Search } from \"lucide-react\";\nimport type { BettingHouse } from \"@shared/schema\";\nimport type { DateRange } from \"react-day-picker\";\n\ninterface BetFiltersProps {\n  onFiltersChange: (filters: FilterValues) => void;\n  className?: string;\n}\n\ninterface FilterValues {\n  status?: string;\n  house?: string;\n  dateRange?: DateRange;\n}\n\nexport function BetFilters({ onFiltersChange, className }: BetFiltersProps) {\n  const [filters, setFilters] = useState<FilterValues>({});\n  const [tempFilters, setTempFilters] = useState<FilterValues>({});\n\n  // Load betting houses from API\n  const { data: bettingHouses = [] } = useQuery<BettingHouse[]>({\n    queryKey: [\"/api/betting-houses\"],\n  });\n\n  // Extract unique houses from data\n  const uniqueHouseNames = Array.from(\n    new Set(bettingHouses.map((house) => house.name)),\n  );\n\n  const handleTempFilterChange = (key: keyof FilterValues, value: any) => {\n    setTempFilters({\n      ...tempFilters,\n      [key]: value === \"all\" ? undefined : value,\n    });\n  };\n\n  const handleDateRangeChange = (dateRange: DateRange | undefined) => {\n    setTempFilters({ ...tempFilters, dateRange });\n  };\n\n  const applyFilters = () => {\n    setFilters(tempFilters);\n    onFiltersChange(tempFilters);\n  };\n\n  const clearFilters = () => {\n    setFilters({});\n    setTempFilters({});\n    onFiltersChange({});\n  };\n\n  const hasActiveFilters = Object.values(filters).some((value) => {\n    if (value === undefined || value === \"\" || value === null) return false;\n    if (typeof value === \"object\" && value !== null) {\n      return Object.values(value).some((v) => v !== undefined);\n    }\n    return true;\n  });\n\n  return (\n    <Card className={className}>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2\">\n            <Filter className=\"h-5 w-5\" />\n            Filtros\n          </CardTitle>\n          <div className=\"flex items-center gap-2\">\n            {hasActiveFilters && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={clearFilters}\n                data-testid=\"button-clear-filters\"\n              >\n                <X className=\"h-4 w-4 mr-1\" />\n                Limpar\n              </Button>\n            )}\n          </div>\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"space-y-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"status-filter\">Status</Label>\n            <Select\n              value={tempFilters.status || \"\"}\n              onValueChange={(value) =>\n                handleTempFilterChange(\"status\", value || undefined)\n              }\n            >\n              <SelectTrigger\n                id=\"status-filter\"\n                data-testid=\"select-status-filter\"\n              >\n                <SelectValue placeholder=\"Todos os status\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">Todos os status</SelectItem>\n                <SelectItem value=\"pending\">Pendentes</SelectItem>\n                <SelectItem value=\"checked\">Conferidas</SelectItem>\n                <SelectItem value=\"resolved\">Resolvidas</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"house-filter\">Casa de Apostas</Label>\n            <Select\n              value={tempFilters.house || \"\"}\n              onValueChange={(value) =>\n                handleTempFilterChange(\"house\", value || undefined)\n              }\n            >\n              <SelectTrigger\n                id=\"house-filter\"\n                data-testid=\"select-house-filter\"\n              >\n                <SelectValue placeholder=\"Todas as casas\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">Todas as casas</SelectItem>\n                {uniqueHouseNames.map((house) => (\n                  <SelectItem key={house} value={house}>\n                    {house}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label>Período de Data</Label>\n            <DatePickerWithRange\n              selected={tempFilters.dateRange}\n              onSelect={handleDateRangeChange}\n              placeholder=\"Selecione o período\"\n              data-testid=\"date-range-filter\"\n            />\n          </div>\n        </div>\n\n        <div className=\"flex justify-end\">\n          <Button\n            onClick={applyFilters}\n            data-testid=\"button-apply-filters\"\n            className=\"w-full md:w-auto\"\n          >\n            <Search className=\"h-4 w-4 mr-2\" />\n            Aplicar Filtros\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":5395,"size_tokens":null},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 0 0% 98%;\n\n  --foreground: 217 33% 17%;\n\n  --border: 217 10% 88%;\n\n  --card: 0 0% 100%;\n\n  --card-foreground: 217 33% 17%;\n\n  --card-border: 217 8% 92%;\n\n  --sidebar: 210 100% 97%;\n\n  --sidebar-foreground: 217 33% 17%;\n\n  --sidebar-border: 217 8% 90%;\n\n  --sidebar-primary: 210 100% 50%;\n\n  --sidebar-primary-foreground: 0 0% 98%;\n\n  --sidebar-accent: 217 10% 92%;\n\n  --sidebar-accent-foreground: 217 33% 17%;\n\n  --sidebar-ring: 210 100% 50%;\n\n  --popover: 0 0% 100%;\n\n  --popover-foreground: 217 33% 17%;\n\n  --popover-border: 217 8% 88%;\n\n  --primary: 210 100% 50%;\n\n  --primary-foreground: 0 0% 98%;\n\n  --secondary: 217 8% 94%;\n\n  --secondary-foreground: 217 33% 17%;\n\n  --muted: 217 6% 94%;\n\n  --muted-foreground: 217 25% 45%;\n\n  --accent: 217 10% 92%;\n\n  --accent-foreground: 217 33% 17%;\n\n  --destructive: 0 75% 55%;\n\n  --destructive-foreground: 0 0% 98%;\n\n  --input: 217 15% 75%;\n  --ring: 210 100% 50%;\n  --chart-1: 210 100% 45%;\n  --chart-2: 140 65% 45%;\n  --chart-3: 0 75% 55%;\n  --chart-4: 45 95% 55%;\n  --chart-5: 280 65% 55%;\n\n  --font-sans: Open Sans, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem; /* 8px */\n  --shadow-2xs: 0px 2px 0px 0px hsl(217 10% 88% / 0.05);\n  --shadow-xs: 0px 2px 0px 0px hsl(217 10% 88% / 0.08);\n  --shadow-sm: 0px 2px 0px 0px hsl(217 10% 88% / 0.10), 0px 1px 2px -1px hsl(217 10% 88% / 0.15);\n  --shadow: 0px 2px 0px 0px hsl(217 10% 88% / 0.12), 0px 1px 2px -1px hsl(217 10% 88% / 0.18);\n  --shadow-md: 0px 2px 0px 0px hsl(217 10% 88% / 0.15), 0px 2px 4px -1px hsl(217 10% 88% / 0.20);\n  --shadow-lg: 0px 2px 0px 0px hsl(217 10% 88% / 0.18), 0px 4px 6px -1px hsl(217 10% 88% / 0.25);\n  --shadow-xl: 0px 2px 0px 0px hsl(217 10% 88% / 0.20), 0px 8px 10px -1px hsl(217 10% 88% / 0.30);\n  --shadow-2xl: 0px 2px 0px 0px hsl(217 10% 88% / 0.25);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 217 33% 17%;\n\n  --foreground: 217 10% 90%;\n\n  --border: 217 25% 25%;\n\n  --card: 217 30% 20%;\n\n  --card-foreground: 217 10% 90%;\n\n  --card-border: 217 25% 25%;\n\n  --sidebar: 217 35% 15%;\n\n  --sidebar-foreground: 217 10% 90%;\n\n  --sidebar-border: 217 30% 20%;\n\n  --sidebar-primary: 210 100% 70%;\n\n  --sidebar-primary-foreground: 217 33% 17%;\n\n  --sidebar-accent: 217 20% 25%;\n\n  --sidebar-accent-foreground: 217 10% 90%;\n\n  --sidebar-ring: 210 100% 70%;\n\n  --popover: 217 28% 22%;\n\n  --popover-foreground: 217 10% 90%;\n\n  --popover-border: 217 25% 28%;\n\n  --primary: 210 100% 65%;\n\n  --primary-foreground: 217 33% 17%;\n\n  --secondary: 217 25% 25%;\n\n  --secondary-foreground: 217 10% 90%;\n\n  --muted: 217 20% 22%;\n\n  --muted-foreground: 217 10% 70%;\n\n  --accent: 217 15% 24%;\n\n  --accent-foreground: 217 10% 90%;\n\n  --destructive: 0 75% 65%;\n\n  --destructive-foreground: 217 33% 17%;\n\n  --input: 217 25% 35%;\n  --ring: 210 100% 70%;\n  --chart-1: 210 100% 75%;\n  --chart-2: 140 65% 65%;\n  --chart-3: 0 75% 70%;\n  --chart-4: 45 95% 70%;\n  --chart-5: 280 65% 70%;\n\n  --shadow-2xs: 0px 2px 0px 0px hsl(217 33% 8% / 0.15);\n  --shadow-xs: 0px 2px 0px 0px hsl(217 33% 8% / 0.20);\n  --shadow-sm: 0px 2px 0px 0px hsl(217 33% 8% / 0.25), 0px 1px 2px -1px hsl(217 33% 8% / 0.30);\n  --shadow: 0px 2px 0px 0px hsl(217 33% 8% / 0.30), 0px 1px 2px -1px hsl(217 33% 8% / 0.35);\n  --shadow-md: 0px 2px 0px 0px hsl(217 33% 8% / 0.35), 0px 2px 4px -1px hsl(217 33% 8% / 0.40);\n  --shadow-lg: 0px 2px 0px 0px hsl(217 33% 8% / 0.40), 0px 4px 6px -1px hsl(217 33% 8% / 0.45);\n  --shadow-xl: 0px 2px 0px 0px hsl(217 33% 8% / 0.45), 0px 8px 10px -1px hsl(217 33% 8% / 0.50);\n  --shadow-2xl: 0px 2px 0px 0px hsl(217 33% 8% / 0.50);\n\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}\n\n/* Sidebar gradient */\n[data-sidebar=\"sidebar\"] {\n  background: linear-gradient(to bottom right, \n    hsl(210, 100%, 94%) 0%, \n    hsl(210, 80%, 95%) 50%,\n    hsl(210, 30%, 97%) 70%, \n    hsl(var(--background)) 100%) !important;\n}\n\n.dark [data-sidebar=\"sidebar\"] {\n  background: linear-gradient(to bottom right, \n    hsl(210, 100%, 10%) 0%, \n    hsl(210, 80%, 12%) 50%,\n    hsl(210, 30%, 14%) 70%, \n    hsl(var(--background)) 100%) !important;\n}","path":null,"size_bytes":10297,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":791,"size_tokens":null},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n        betting: {\n          win: \"hsl(var(--chart-2))\", // Verde para apostas ganhas\n          loss: \"hsl(var(--chart-3))\", // Vermelho para apostas perdidas\n          pending: \"hsl(var(--chart-4))\", // Amarelo para apostas pendentes\n          returned: \"hsl(var(--muted))\", // Cinza para apostas devolvidas\n          profit: \"hsl(var(--chart-2))\", // Verde para lucro\n        },\n      },\n      fontFamily: {\n        sans: [\"Inter\", \"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","path":null,"size_bytes":4440,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"server/auth.ts":{"content":"import passport from \"passport\";\nimport { Strategy as LocalStrategy } from \"passport-local\";\nimport { Express } from \"express\";\nimport session from \"express-session\";\nimport { scrypt, randomBytes, timingSafeEqual } from \"crypto\";\nimport { promisify } from \"util\";\nimport { storage } from \"./storage\";\nimport { User as SelectUser } from \"@shared/schema\";\n\ndeclare global {\n  namespace Express {\n    interface User extends SelectUser {}\n  }\n}\n\nconst scryptAsync = promisify(scrypt);\n\nexport async function hashPassword(password: string) {\n  const salt = randomBytes(16).toString(\"hex\");\n  const buf = (await scryptAsync(password, salt, 64)) as Buffer;\n  return `${buf.toString(\"hex\")}.${salt}`;\n}\n\nasync function comparePasswords(supplied: string, stored: string) {\n  const [hashed, salt] = stored.split(\".\");\n  const hashedBuf = Buffer.from(hashed, \"hex\");\n  const suppliedBuf = (await scryptAsync(supplied, salt, 64)) as Buffer;\n  return timingSafeEqual(hashedBuf, suppliedBuf);\n}\n\nexport function setupAuth(app: Express) {\n  const sessionSettings: session.SessionOptions = {\n    secret: process.env.SESSION_SECRET!,\n    resave: false,\n    saveUninitialized: false,\n    store: storage.sessionStore,\n  };\n\n  app.set(\"trust proxy\", 1);\n  app.use(session(sessionSettings));\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  passport.use(\n    new LocalStrategy(\n      { usernameField: \"email\" },\n      async (email, password, done) => {\n        const user = await storage.getUserByEmail(email);\n        if (!user || !(await comparePasswords(password, user.password))) {\n          return done(null, false);\n        } else {\n          return done(null, user);\n        }\n      },\n    ),\n  );\n\n  passport.serializeUser((user, done) => done(null, user.id));\n  passport.deserializeUser(async (id: string, done) => {\n    const user = await storage.getUser(id);\n    done(null, user);\n  });\n\n  app.post(\"/api/login\", passport.authenticate(\"local\"), (req, res) => {\n    res.status(200).json(req.user);\n  });\n\n  app.post(\"/api/logout\", (req, res, next) => {\n    req.logout((err) => {\n      if (err) return next(err);\n      res.sendStatus(200);\n    });\n  });\n\n  app.get(\"/api/user\", (req, res) => {\n    if (!req.isAuthenticated()) return res.sendStatus(401);\n    res.json(req.user);\n  });\n}\n","path":null,"size_bytes":2293,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1077,"size_tokens":null},"server/db.ts":{"content":"import { Pool as NeonPool, neonConfig } from '@neondatabase/serverless';\nimport { Pool as PgPool } from 'pg';\nimport { drizzle as drizzleNeon } from 'drizzle-orm/neon-serverless';\nimport { drizzle as drizzlePg } from 'drizzle-orm/node-postgres';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nconst useSupabase = !!process.env.SUPABASE_DATABASE_URL;\n// Trim whitespace from connection string to handle copy/paste issues\nconst rawConnectionString = process.env.SUPABASE_DATABASE_URL || process.env.DATABASE_URL;\nconst connectionString = rawConnectionString?.replace(/:\\s+/g, ':').trim();\n\nif (!connectionString) {\n  throw new Error(\n    \"DATABASE_URL or SUPABASE_DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nconsole.log(`[Database] Using ${useSupabase ? 'Supabase' : 'Neon'} database`);\n\nexport const pool = useSupabase \n  ? new PgPool({ connectionString, ssl: { rejectUnauthorized: false } })\n  : new NeonPool({ connectionString });\n\nexport const db = useSupabase\n  ? drizzlePg({ client: pool as PgPool, schema })\n  : drizzleNeon({ client: pool as NeonPool, schema });\n","path":null,"size_bytes":1156,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7428,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-lg border-2 p-6 pr-8 shadow-2xl transition-all cursor-grab active:cursor-grabbing data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full backdrop-blur-sm\",\n  {\n    variants: {\n      variant: {\n        default: \"border-green-500 bg-green-50 dark:bg-green-950 text-green-900 dark:text-green-50 shadow-green-500/20\",\n        destructive:\n          \"destructive group border-red-500 bg-red-50 dark:bg-red-950 text-red-900 dark:text-red-50 shadow-red-500/20\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1.5 bg-black/10 dark:bg-white/10 text-foreground/70 opacity-100 transition-all hover:opacity-100 hover:bg-black/20 dark:hover:bg-white/20 hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:text-red-700 dark:group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-900 dark:group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-5 w-5\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-base font-bold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":5090,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1584,"size_tokens":null},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AppSidebar } from \"@/components/app-sidebar\";\nimport { ThemeProvider } from \"@/components/theme-provider\";\nimport { ThemeToggle } from \"@/components/theme-toggle\";\nimport { AuthProvider } from \"@/hooks/use-auth\";\nimport { ProtectedRoute } from \"@/lib/protected-route\";\n\n// Pages\nimport Dashboard from \"@/pages/dashboard\";\nimport UploadPage from \"@/pages/upload\";\nimport OCRTestPage from \"@/pages/ocr-test\";\nimport QRReaderPage from \"@/pages/qr-reader\";\nimport BatchUploadPage from \"@/pages/batch-upload\";\nimport BetBurgerPage from \"@/pages/bet-burger\";\nimport AccountHoldersPage from \"@/pages/account-holders\";\nimport ManagementPage from \"@/pages/management\";\nimport AuthPage from \"@/pages/auth-page\";\nimport UsersPage from \"@/pages/users-page\";\nimport ProfilePage from \"@/pages/profile-page\";\nimport AdminMigrationPage from \"@/pages/admin-migration\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction AuthenticatedLayout({ children }: { children: React.ReactNode }) {\n  const style = {\n    \"--sidebar-width\": \"20rem\",\n    \"--sidebar-width-icon\": \"4rem\",\n  };\n\n  return (\n    <SidebarProvider style={style as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <AppSidebar />\n        <div className=\"flex flex-col flex-1\">\n          <header className=\"flex items-center justify-between p-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n            <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n            <div className=\"flex items-center gap-2\">\n              <ThemeToggle />\n            </div>\n          </header>\n          <main className=\"flex-1 overflow-auto\">\n            {children}\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/auth\" component={AuthPage} />\n      <ProtectedRoute path=\"/\" component={() => <AuthenticatedLayout><Dashboard /></AuthenticatedLayout>} />\n      <ProtectedRoute path=\"/upload\" component={() => <AuthenticatedLayout><UploadPage /></AuthenticatedLayout>} />\n      <ProtectedRoute path=\"/test-ocr\" component={() => <AuthenticatedLayout><OCRTestPage /></AuthenticatedLayout>} />\n      <ProtectedRoute path=\"/qr-reader\" component={() => <AuthenticatedLayout><QRReaderPage /></AuthenticatedLayout>} />\n      <ProtectedRoute path=\"/batch-upload\" component={() => <AuthenticatedLayout><BatchUploadPage /></AuthenticatedLayout>} />\n      <ProtectedRoute path=\"/bet-burger\" component={() => <AuthenticatedLayout><BetBurgerPage /></AuthenticatedLayout>} />\n      <ProtectedRoute path=\"/account-holders\" component={() => <AuthenticatedLayout><AccountHoldersPage /></AuthenticatedLayout>} />\n      <ProtectedRoute path=\"/gerenciamento\" component={() => <AuthenticatedLayout><ManagementPage /></AuthenticatedLayout>} />\n      <ProtectedRoute path=\"/dashboard\" component={() => <AuthenticatedLayout><Dashboard /></AuthenticatedLayout>} />\n      <ProtectedRoute path=\"/users\" component={() => <AuthenticatedLayout><UsersPage /></AuthenticatedLayout>} />\n      <ProtectedRoute path=\"/profile\" component={() => <AuthenticatedLayout><ProfilePage /></AuthenticatedLayout>} />\n      <ProtectedRoute path=\"/admin/migration\" component={() => <AuthenticatedLayout><AdminMigrationPage /></AuthenticatedLayout>} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nexport default function App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <ThemeProvider defaultTheme=\"light\" storageKey=\"surebet-theme\">\n          <AuthProvider>\n            <Router />\n            <Toaster />\n          </AuthProvider>\n        </ThemeProvider>\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}","path":null,"size_bytes":4063,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":971,"size_tokens":null},"client/src/components/bet-form.tsx":{"content":"import { useState, useMemo } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { CalendarIcon, Save, ArrowLeft, Loader2 } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport type { AccountHolder, BettingHouse } from \"@shared/schema\";\n\nconst betFormSchema = z.object({\n  eventDate: z.string(),\n  sport: z.string().min(1, \"Esporte é obrigatório\"),\n  league: z.string().min(1, \"Liga é obrigatória\"),\n  teamA: z.string().min(1, \"Time A é obrigatório\"),\n  teamB: z.string().min(1, \"Time B é obrigatório\"),\n  profitPercentage: z.coerce.number(),\n  \n  // Bet 1 - casa de apostas (texto para OCR) e titular da conta (selector)\n  bet1House: z.string().min(1, \"Casa de apostas é obrigatória\"),\n  bet1HouseId: z.string().min(1, \"Titular da conta é obrigatório\"),\n  bet1Type: z.string().min(1, \"Tipo de aposta é obrigatório\"),\n  bet1Odd: z.coerce.number(),\n  bet1Stake: z.coerce.number(),\n  bet1Profit: z.coerce.number(),\n  bet1AccountHolder: z.string().optional(),\n  \n  // Bet 2 - casa de apostas (texto para OCR) e titular da conta (selector)\n  bet2House: z.string().min(1, \"Casa de apostas é obrigatória\"),\n  bet2HouseId: z.string().min(1, \"Titular da conta é obrigatório\"),\n  bet2Type: z.string().min(1, \"Tipo de aposta é obrigatório\"),\n  bet2Odd: z.coerce.number(),\n  bet2Stake: z.coerce.number(),\n  bet2Profit: z.coerce.number(),\n  bet2AccountHolder: z.string().optional(),\n  \n  // Bet 3 (opcional - apenas para apostas triplas)\n  bet3House: z.string().optional(),\n  bet3HouseId: z.string().optional(),\n  bet3Type: z.string().optional(),\n  bet3Odd: z.coerce.number().optional(),\n  bet3Stake: z.coerce.number().optional(),\n  bet3Profit: z.coerce.number().optional(),\n  bet3AccountHolder: z.string().optional(),\n});\n\ntype BetFormData = z.infer<typeof betFormSchema>;\n\ninterface BetFormProps {\n  initialData?: Partial<BetFormData>;\n  onSubmit: (data: BetFormData) => void;\n  onCancel?: () => void;\n  isLoading?: boolean;\n  className?: string;\n}\n\nexport function BetForm({\n  initialData,\n  onSubmit,\n  onCancel,\n  isLoading = false,\n  className,\n}: BetFormProps) {\n  // Load account holders from API\n  const { data: holders = [], isLoading: holdersLoading } = useQuery<AccountHolder[]>({\n    queryKey: [\"/api/account-holders\"],\n  });\n\n  // Load betting houses from API\n  const { data: allHouses = [], isLoading: housesLoading } = useQuery<BettingHouse[]>({\n    queryKey: [\"/api/betting-houses\"],\n  });\n\n  const isDataLoading = holdersLoading || housesLoading;\n\n  // Create combined options for dropdowns: \"Titular - Casa\"\n  // First, group houses by holder and sort alphabetically\n  const houseOptions = allHouses\n    .map(house => {\n      const holder = holders.find(h => h.id === house.accountHolderId);\n      return {\n        id: house.id,\n        name: house.name,\n        holderName: holder?.name || \"Titular não encontrado\",\n        displayLabel: `${holder?.name || \"Titular não encontrado\"} - ${house.name}`,\n      };\n    })\n    .sort((a, b) => {\n      // First sort by holder name alphabetically\n      const holderCompare = a.holderName.localeCompare(b.holderName);\n      if (holderCompare !== 0) return holderCompare;\n      // Then sort by house name alphabetically within the same holder\n      return a.name.localeCompare(b.name);\n    });\n\n  // Detect if bet3 exists based on initialData\n  const hasBet3 = useMemo(() => {\n    if (!initialData) return false;\n    // Check if any bet3 field has meaningful data\n    return !!(\n      initialData.bet3House ||\n      initialData.bet3Type ||\n      initialData.bet3Odd ||\n      initialData.bet3Stake\n    );\n  }, [initialData]);\n\n  const form = useForm<BetFormData>({\n    resolver: zodResolver(betFormSchema),\n    defaultValues: {\n      eventDate: initialData?.eventDate || \"\",\n      sport: initialData?.sport || \"\",\n      league: initialData?.league || \"\",\n      teamA: initialData?.teamA || \"\",\n      teamB: initialData?.teamB || \"\",\n      profitPercentage: initialData?.profitPercentage || 0,\n      bet1House: initialData?.bet1House || \"\",\n      bet1HouseId: initialData?.bet1HouseId || \"\",\n      bet1Type: initialData?.bet1Type || \"\",\n      bet1Odd: initialData?.bet1Odd || 0,\n      bet1Stake: initialData?.bet1Stake || 0,\n      bet1Profit: initialData?.bet1Profit || 0,\n      bet1AccountHolder: initialData?.bet1AccountHolder || \"\",\n      bet2House: initialData?.bet2House || \"\",\n      bet2HouseId: initialData?.bet2HouseId || \"\",\n      bet2Type: initialData?.bet2Type || \"\",\n      bet2Odd: initialData?.bet2Odd || 0,\n      bet2Stake: initialData?.bet2Stake || 0,\n      bet2Profit: initialData?.bet2Profit || 0,\n      bet2AccountHolder: initialData?.bet2AccountHolder || \"\",\n      bet3House: initialData?.bet3House || \"\",\n      bet3HouseId: initialData?.bet3HouseId || \"\",\n      bet3Type: initialData?.bet3Type || \"\",\n      bet3Odd: initialData?.bet3Odd || 0,\n      bet3Stake: initialData?.bet3Stake || 0,\n      bet3Profit: initialData?.bet3Profit || 0,\n      bet3AccountHolder: initialData?.bet3AccountHolder || \"\",\n    },\n  });\n\n  // Debug log to verify bet3 data\n  console.log('BetForm initialized with hasBet3:', hasBet3, 'bet3House:', initialData?.bet3House);\n\n  const handleSubmit = (data: BetFormData) => {\n    console.log(\"Form submitted:\", data);\n    onSubmit(data);\n  };\n\n  return (\n    <div className={cn(\"space-y-6\", className)}>\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-3xl font-bold\">Editar Dados da Aposta</h1>\n        {onCancel && (\n          <Button variant=\"outline\" onClick={onCancel} data-testid=\"button-cancel\">\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Voltar\n          </Button>\n        )}\n      </div>\n\n      <Form {...form}>\n        <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-6\">\n          {/* Event Information */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Informações do Evento</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"eventDate\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Data e Hora</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          type=\"datetime-local\"\n                          data-testid=\"input-event-date\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"profitPercentage\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Lucro (%)</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          type=\"number\" \n                          step=\"0.01\"\n                          placeholder=\"2.22\"\n                          data-testid=\"input-profit-percentage\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"sport\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Esporte</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          placeholder=\"Futebol\"\n                          data-testid=\"input-sport\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"league\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Liga</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          placeholder=\"Liga Pro Jupiler\"\n                          data-testid=\"input-league\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"teamA\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Time A</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          placeholder=\"OH Leuven\"\n                          data-testid=\"input-team-a\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"teamB\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Time B</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          placeholder=\"Anderlecht\"\n                          data-testid=\"input-team-b\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Bet 1 */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Aposta 1</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"bet1House\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Casa de Apostas</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          placeholder=\"Pinnacle\"\n                          data-testid=\"input-bet1-house\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"bet1Type\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Tipo</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          placeholder=\"Acima 2.25\"\n                          data-testid=\"input-bet1-type\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"bet1HouseId\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Titular da Conta</FormLabel>\n                      <Select \n                        onValueChange={field.onChange} \n                        defaultValue={field.value}\n                      >\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-bet1-house\" disabled={isDataLoading}>\n                            <SelectValue placeholder={\n                              isDataLoading \n                                ? \"Carregando...\" \n                                : houseOptions.length === 0 \n                                  ? \"Nenhuma casa cadastrada\" \n                                  : \"Selecionar titular\"\n                            } />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          {houseOptions.length === 0 && !isDataLoading ? (\n                            <SelectItem value=\"no-houses\" disabled>\n                              Nenhuma casa de apostas cadastrada\n                            </SelectItem>\n                          ) : (\n                            houseOptions.map((option) => (\n                              <SelectItem key={option.id} value={option.id}>\n                                {option.displayLabel}\n                              </SelectItem>\n                            ))\n                          )}\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"bet1Odd\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Odd</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          type=\"number\" \n                          step=\"0.01\"\n                          placeholder=\"2.25\"\n                          data-testid=\"input-bet1-odd\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"bet1Stake\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Stake (R$)</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          type=\"number\" \n                          step=\"0.01\"\n                          placeholder=\"2650.00\"\n                          data-testid=\"input-bet1-stake\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"bet1Profit\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Lucro Potencial (R$)</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          type=\"number\" \n                          step=\"0.01\"\n                          placeholder=\"106.00\"\n                          data-testid=\"input-bet1-profit\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Bet 2 */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Aposta 2</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"bet2House\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Casa de Apostas</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          placeholder=\"Betano\"\n                          data-testid=\"input-bet2-house\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"bet2Type\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Tipo</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          placeholder=\"Abaixo 2.25\"\n                          data-testid=\"input-bet2-type\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"bet2HouseId\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Titular da Conta</FormLabel>\n                      <Select \n                        onValueChange={field.onChange} \n                        defaultValue={field.value}\n                      >\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-bet2-house\" disabled={isDataLoading}>\n                            <SelectValue placeholder={\n                              isDataLoading \n                                ? \"Carregando...\" \n                                : houseOptions.length === 0 \n                                  ? \"Nenhuma casa cadastrada\" \n                                  : \"Selecionar titular\"\n                            } />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          {houseOptions.length === 0 && !isDataLoading ? (\n                            <SelectItem value=\"no-houses\" disabled>\n                              Nenhuma casa de apostas cadastrada\n                            </SelectItem>\n                          ) : (\n                            houseOptions.map((option) => (\n                              <SelectItem key={option.id} value={option.id}>\n                                {option.displayLabel}\n                              </SelectItem>\n                            ))\n                          )}\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"bet2Odd\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Odd</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          type=\"number\" \n                          step=\"0.01\"\n                          placeholder=\"2.25\"\n                          data-testid=\"input-bet2-odd\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"bet2Stake\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Stake (R$)</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          type=\"number\" \n                          step=\"0.01\"\n                          placeholder=\"2120.00\"\n                          data-testid=\"input-bet2-stake\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"bet2Profit\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Lucro Potencial (R$)</FormLabel>\n                      <FormControl>\n                        <Input \n                          {...field} \n                          type=\"number\" \n                          step=\"0.01\"\n                          placeholder=\"106.00\"\n                          data-testid=\"input-bet2-profit\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Bet 3 (condicional - apenas para apostas triplas) */}\n          {hasBet3 && (\n            <Card>\n              <CardHeader>\n                <CardTitle>Aposta 3</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"bet3House\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Casa de Apostas</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field} \n                            placeholder=\"Betano\"\n                            data-testid=\"input-bet3-house\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"bet3Type\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Tipo</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field} \n                            placeholder=\"X\"\n                            data-testid=\"input-bet3-type\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"bet3HouseId\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Titular da Conta</FormLabel>\n                        <Select onValueChange={field.onChange} value={field.value}>\n                          <FormControl>\n                            <SelectTrigger data-testid=\"select-bet3-account-holder\">\n                              <SelectValue placeholder=\"Selecionar titular\" />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            {houseOptions.map(option => (\n                              <SelectItem \n                                key={option.id} \n                                value={option.id}\n                                data-testid={`option-bet3-${option.id}`}\n                              >\n                                {option.displayLabel}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"bet3Odd\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Odd</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field} \n                            type=\"number\" \n                            step=\"0.01\"\n                            placeholder=\"5.70\"\n                            data-testid=\"input-bet3-odd\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"bet3Stake\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Stake (R$)</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field} \n                            type=\"number\" \n                            step=\"0.01\"\n                            placeholder=\"1799.00\"\n                            data-testid=\"input-bet3-stake\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"bet3Profit\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Lucro Potencial (R$)</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field} \n                            type=\"number\" \n                            step=\"0.01\"\n                            placeholder=\"253.00\"\n                            data-testid=\"input-bet3-profit\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          <div className=\"flex justify-end gap-4\">\n            {onCancel && (\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                onClick={onCancel}\n                data-testid=\"button-cancel-form\"\n              >\n                Cancelar\n              </Button>\n            )}\n            <Button \n              type=\"submit\" \n              disabled={isLoading}\n              data-testid=\"button-save-bet\"\n            >\n              {isLoading ? (\n                <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n              ) : (\n                <Save className=\"w-4 h-4 mr-2\" />\n              )}\n              {isLoading ? \"Salvando...\" : \"Salvar Aposta\"}\n            </Button>\n          </div>\n        </form>\n      </Form>\n    </div>\n  );\n}","path":null,"size_bytes":27833,"size_tokens":null},"client/src/lib/protected-route.tsx":{"content":"import { useAuth } from \"@/hooks/use-auth\";\nimport { Loader2 } from \"lucide-react\";\nimport { Redirect, Route } from \"wouter\";\n\nexport function ProtectedRoute({\n  path,\n  component: Component,\n}: {\n  path: string;\n  component: () => React.JSX.Element;\n}) {\n  const { user, isLoading } = useAuth();\n\n  if (isLoading) {\n    return (\n      <Route path={path}>\n        <div className=\"flex items-center justify-center min-h-screen\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-border\" />\n        </div>\n      </Route>\n    );\n  }\n\n  if (!user) {\n    return (\n      <Route path={path}>\n        <Redirect to=\"/auth\" />\n      </Route>\n    );\n  }\n\n  return <Route path={path} component={Component} />;\n}\n","path":null,"size_bytes":706,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1251,"size_tokens":null},"client/src/pages/users-page.tsx":{"content":"import { useState } from \"react\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Loader2, Plus, Trash2, Edit } from \"lucide-react\";\nimport { Redirect } from \"wouter\";\n\nexport default function UsersPage() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [editingUser, setEditingUser] = useState<any>(null);\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n    name: \"\",\n    role: \"user\",\n  });\n\n  // Only admin can access this page\n  if (user && user.role !== \"admin\") {\n    return <Redirect to=\"/\" />;\n  }\n\n  const { data: users, isLoading } = useQuery({\n    queryKey: [\"/api/users\"],\n    enabled: user?.role === \"admin\",\n  });\n\n  const createUserMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const res = await apiRequest(\"POST\", \"/api/users\", data);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/users\"] });\n      setIsDialogOpen(false);\n      resetForm();\n      toast({ title: \"Usuário criado com sucesso\" });\n    },\n    onError: () => {\n      toast({ title: \"Erro ao criar usuário\", variant: \"destructive\" });\n    },\n  });\n\n  const updateUserMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      const res = await apiRequest(\"PUT\", `/api/users/${id}`, data);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/users\"] });\n      setIsDialogOpen(false);\n      resetForm();\n      toast({ title: \"Usuário atualizado com sucesso\" });\n    },\n    onError: () => {\n      toast({ title: \"Erro ao atualizar usuário\", variant: \"destructive\" });\n    },\n  });\n\n  const deleteUserMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest(\"DELETE\", `/api/users/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/users\"] });\n      toast({ title: \"Usuário excluído com sucesso\" });\n    },\n    onError: () => {\n      toast({ title: \"Erro ao excluir usuário\", variant: \"destructive\" });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({ email: \"\", password: \"\", name: \"\", role: \"user\" });\n    setEditingUser(null);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (editingUser) {\n      const updateData: any = { email: formData.email, name: formData.name, role: formData.role };\n      if (formData.password) {\n        updateData.password = formData.password;\n      }\n      updateUserMutation.mutate({ id: editingUser.id, data: updateData });\n    } else {\n      createUserMutation.mutate(formData);\n    }\n  };\n\n  const handleEdit = (user: any) => {\n    setEditingUser(user);\n    setFormData({\n      email: user.email,\n      password: \"\",\n      name: user.name,\n      role: user.role,\n    });\n    setIsDialogOpen(true);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <Loader2 className=\"w-8 h-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 max-w-6xl mx-auto\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Gerenciar Usuários</h1>\n          <p className=\"text-muted-foreground\">\n            Crie e gerencie contas de usuário do sistema\n          </p>\n        </div>\n        <Dialog open={isDialogOpen} onOpenChange={(open) => {\n          setIsDialogOpen(open);\n          if (!open) resetForm();\n        }}>\n          <DialogTrigger asChild>\n            <Button data-testid=\"button-new-user\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Novo Usuário\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>\n                {editingUser ? \"Editar Usuário\" : \"Novo Usuário\"}\n              </DialogTitle>\n            </DialogHeader>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"name\">Nome</Label>\n                <Input\n                  id=\"name\"\n                  value={formData.name}\n                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                  required\n                  data-testid=\"input-user-name\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"email\">Email</Label>\n                <Input\n                  id=\"email\"\n                  type=\"email\"\n                  value={formData.email}\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                  required\n                  data-testid=\"input-user-email\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"password\">\n                  Senha {editingUser && \"(deixe em branco para não alterar)\"}\n                </Label>\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  value={formData.password}\n                  onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                  required={!editingUser}\n                  data-testid=\"input-user-password\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"role\">Tipo de Usuário</Label>\n                <Select\n                  value={formData.role}\n                  onValueChange={(value) => setFormData({ ...formData, role: value })}\n                >\n                  <SelectTrigger data-testid=\"select-user-role\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"user\">Usuário</SelectItem>\n                    <SelectItem value=\"admin\">Administrador</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div className=\"flex gap-2 justify-end\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => {\n                    setIsDialogOpen(false);\n                    resetForm();\n                  }}\n                >\n                  Cancelar\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={createUserMutation.isPending || updateUserMutation.isPending}\n                  data-testid=\"button-save-user\"\n                >\n                  {createUserMutation.isPending || updateUserMutation.isPending\n                    ? \"Salvando...\"\n                    : \"Salvar\"}\n                </Button>\n              </div>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"grid gap-4\">\n        {users?.map((u: any) => (\n          <Card key={u.id}>\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <CardTitle>{u.name}</CardTitle>\n                  <CardDescription>{u.email}</CardDescription>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-sm px-2 py-1 rounded-md bg-primary/10 text-primary\">\n                    {u.role === \"admin\" ? \"Administrador\" : \"Usuário\"}\n                  </span>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handleEdit(u)}\n                    data-testid={`button-edit-user-${u.id}`}\n                  >\n                    <Edit className=\"w-4 h-4\" />\n                  </Button>\n                  <Button\n                    variant=\"destructive\"\n                    size=\"sm\"\n                    onClick={() => {\n                      if (confirm(`Excluir usuário ${u.name}?`)) {\n                        deleteUserMutation.mutate(u.id);\n                      }\n                    }}\n                    disabled={u.id === user?.id}\n                    data-testid={`button-delete-user-${u.id}`}\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n              </div>\n            </CardHeader>\n          </Card>\n        ))}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":9051,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1202,"size_tokens":null},"server/pdf/parse_pdf.py":{"content":"#!/usr/bin/env python3\nimport sys\nimport json\nimport pdfplumber\nimport re\nfrom datetime import datetime\n\ndef preprocessar_linhas_quebradas(texto):\n    \"\"\"\n    Junta linhas que foram quebradas, incluindo casas e tipos divididos\n    \"\"\"\n    lines = texto.split('\\n')\n    lines_processadas = []\n    \n    i = 0\n    while i < len(lines):\n        linha_atual = lines[i].strip()\n        \n        if not linha_atual:\n            i += 1\n            continue\n            \n        # === CASO 1: Linha seguinte é apenas sufixo (BR), (CO), etc ===\n        if (i + 1 < len(lines) and \n            lines[i + 1].strip() in ['(BR)', '(CO)', '(PT)', '(RO)', '(BE)', '(MX)', '(UK)', '(ZA)', '(SE)']):\n            linha_juntada = linha_atual + ' ' + lines[i + 1].strip()\n            lines_processadas.append(linha_juntada)\n            i += 2\n            continue\n        \n        # === CASO 2: Casa de apostas fragmentada ===\n        # Detecta linhas com dados de aposta que podem ter continuação\n        tem_odds_usd = 'USD' in linha_atual and any(char.isdigit() for char in linha_atual)\n        \n        if tem_odds_usd and i + 1 < len(lines):\n            proxima_linha = lines[i + 1].strip()\n            \n            # Próxima linha é continuação se:\n            # - Não tem números (não é nova aposta)\n            # - Não é separador/seção\n            # - Tem palavras que podem ser casa/tipo\n            # Verifica se próxima linha tem números significativos (odds/stakes)\n            # Ignora números em texto como \"1º\", \"2º\", etc.\n            tem_odds_significativos = bool(re.search(r'\\d+\\.\\d+|\\d+\\s+USD', proxima_linha))\n            \n            eh_continuacao = (proxima_linha and \n                            not tem_odds_significativos and  # Não é nova aposta\n                            proxima_linha not in ['〉', '○', '●'] and\n                            not any(keyword in proxima_linha.lower() for keyword in \n                                   ['aposta total', 'mostrar', 'use sua', 'arredondar', 'evento', 'chance']) and\n                            len(proxima_linha) > 2)  # Não é linha muito curta\n            \n            if eh_continuacao:\n                linha_juntada = linha_atual + ' ' + proxima_linha\n                lines_processadas.append(linha_juntada)\n                i += 2\n                continue\n        \n        # === CASO 3: Linha normal ===\n        lines_processadas.append(linha_atual)\n        i += 1\n    \n    return '\\n'.join(lines_processadas)\n\ndef extrair_dados_pdf(caminho_pdf):\n    \"\"\"\n    Extrai dados estruturados de um PDF de surebet usando pdfplumber\n    Parser otimizado para 100% de precisão com todos os formatos de PDF\n    Suporta acentos, símbolos especiais (≥, ø, etc.), qualquer casa de apostas\n    \"\"\"\n    dados = {\n        'date': None,\n        'sport': None,\n        'league': None,\n        'teamA': None,\n        'teamB': None,\n        'bet1': {\n            'house': None,\n            'odd': None,\n            'type': None,\n            'stake': None,\n            'profit': None\n        },\n        'bet2': {\n            'house': None,\n            'odd': None,\n            'type': None,\n            'stake': None,\n            'profit': None\n        },\n        'bet3': {\n            'house': None,\n            'odd': None,\n            'type': None,\n            'stake': None,\n            'profit': None\n        },\n        'profitPercentage': None\n    }\n    \n    try:\n        with pdfplumber.open(caminho_pdf) as pdf:\n            for pagina in pdf.pages[:2]:  # Processa até 2 páginas\n                texto = pagina.extract_text()\n                if not texto:\n                    continue\n                \n                # Pré-processa para juntar linhas quebradas (como BravoBet + (BR))\n                texto_preprocessado = preprocessar_linhas_quebradas(texto)\n                \n                # Divide em linhas e limpa\n                linhas = [linha.strip() for linha in texto_preprocessado.split('\\n') if linha.strip()]\n                \n                \n                # === EXTRAÇÃO DE DATA/HORA ===\n                for linha in linhas:\n                    if 'Evento' in linha and '(' in linha:\n                        match_data = re.search(r'\\((\\d{4}-\\d{2}-\\d{2}\\s+\\d{2}:\\d{2})', linha)\n                        if match_data:\n                            try:\n                                data_str = match_data.group(1).strip()\n                                dt = datetime.strptime(data_str, '%Y-%m-%d %H:%M')\n                                dados['date'] = dt.strftime('%Y-%m-%dT%H:%M')\n                            except:\n                                pass\n                        break\n                \n                # === EXTRAÇÃO DE TIMES E PORCENTAGEM ===\n                for linha in linhas:\n                    if '–' in linha and '%' in linha and 'ROI' not in linha and 'Evento' not in linha:\n                        # Remove porcentagem para extrair times\n                        match_percent = re.search(r'(\\d+\\.\\d+)%\\s*$', linha)\n                        if match_percent:\n                            dados['profitPercentage'] = float(match_percent.group(1))\n                            linha_times = linha[:match_percent.start()].strip()\n                        else:\n                            linha_times = linha\n                        \n                        # Divide pelos times usando \"–\"\n                        if '–' in linha_times:\n                            times = linha_times.split('–')\n                            if len(times) >= 2:\n                                dados['teamA'] = times[0].strip()\n                                dados['teamB'] = times[1].strip()\n                        break\n                \n                # === EXTRAÇÃO DE ESPORTE E LIGA ===\n                # Encontra índice da linha de times para usar como âncora\n                indice_times = -1\n                for i, linha in enumerate(linhas):\n                    if dados['teamA'] and dados['teamA'] in linha and dados['teamB'] and dados['teamB'] in linha:\n                        indice_times = i\n                        break\n                \n                # Primeiro tenta com palavras-chave conhecidas (deve estar próximo aos times)\n                for i, linha in enumerate(linhas):\n                    # Se tem índice de times, esporte deve estar próximo (±5 linhas)\n                    if indice_times >= 0 and abs(i - indice_times) > 5:\n                        continue\n                    \n                    if ' / ' in linha and any(sport in linha.lower() for sport in [\n                        'futebol', 'football', 'soccer',\n                        'basquete', 'basketball', 'basquetebol',\n                        'tênis', 'tennis',\n                        'hóquei', 'hockey', 'hoquei',\n                        'beisebol', 'beisebal', 'baseball',\n                        'voleibol', 'volleyball', 'vôlei', 'volei',\n                        'handball', 'handebol',\n                        'rugby',\n                        'cricket',\n                        'futsal'\n                    ]):\n                        partes = linha.split(' / ')\n                        if len(partes) >= 2:\n                            dados['sport'] = partes[0].strip()\n                            dados['league'] = ' / '.join(partes[1:]).strip()\n                        break\n                \n                # Se não encontrou E tem times, usa lógica genérica com restrições fortes\n                if not dados['sport'] and dados['teamA'] and indice_times >= 0:\n                    # Procura APENAS nas linhas imediatamente após os times (máximo +3 linhas)\n                    for i in range(indice_times + 1, min(indice_times + 4, len(linhas))):\n                        linha = linhas[i]\n                        \n                        # Deve ter \" / \" e NÃO ter marcadores de outras seções\n                        if (' / ' in linha and \n                            'Evento' not in linha and \n                            'ROI' not in linha and\n                            '–' not in linha and      # Não é linha de times\n                            '%' not in linha and      # Não tem porcentagem\n                            'USD' not in linha and    # Não é linha de aposta\n                            'BRL' not in linha and\n                            'Chance' not in linha and # Não é header de tabela\n                            'Aposta' not in linha and\n                            not re.search(r'\\d+\\.\\d{2,}', linha)):  # Não tem odds (números com 2+ decimais)\n                            \n                            partes = linha.split(' / ')\n                            if len(partes) >= 2:\n                                # Valida que a primeira parte parece um esporte\n                                possivel_esporte = partes[0].strip()\n                                possivel_liga = ' / '.join(partes[1:]).strip()\n                                \n                                # Esporte deve ser curto e não conter números grandes\n                                if (len(possivel_esporte) < 30 and \n                                    possivel_esporte and \n                                    not re.search(r'\\d{2,}', possivel_esporte)):  # Sem números de 2+ dígitos\n                                    dados['sport'] = possivel_esporte\n                                    dados['league'] = possivel_liga\n                                    break\n                \n                # === EXTRAÇÃO DE APOSTAS ===\n                apostas_encontradas = []\n                \n                # Processa linha por linha procurando apostas\n                i = 0\n                while i < len(linhas):\n                    linha = linhas[i]\n                    \n                    # Detecta casa de apostas dinamicamente\n                    casa_encontrada = detectar_casa_apostas(linha)\n                    \n                    if casa_encontrada:\n                        # Coleta linhas da aposta (pode estar dividida em múltiplas linhas)\n                        texto_aposta = linha\n                        j = i + 1\n                        \n                        # PRIMEIRO: Coleta fragmentos do nome da casa (linhas curtas sem números/símbolos)\n                        # Exemplo: \"Marjo\" -> \"Sports\" -> \"(BR)\"\n                        fragmentos_casa = []\n                        linhas_usadas_fragmentos = set()  # Rastreia linhas totalmente usadas\n                        linhas_parcialmente_usadas = {}  # {index_linha: resto_da_linha}\n                        while j < len(linhas) and j < i + 4:  # Máximo 3 linhas para completar casa\n                            proxima_linha = linhas[j].strip()\n                            \n                            # Para se for linha vazia, de separação ou símbolos\n                            if not proxima_linha or proxima_linha in ['〉', '○', '●', '\\uf35d', 'new']:\n                                j += 1\n                                continue\n                            \n                            # Se tem dados financeiros/símbolos, não é fragmento da casa\n                            if any(s in proxima_linha for s in ['USD', 'BRL', '●', '○', '\\uf35d']) or re.search(r'\\d+\\.\\d+', proxima_linha):\n                                break\n                            \n                            # Se é linha muito curta (< 30 chars), pode ser fragmento da casa\n                            # Exemplos: \"Sports\", \"(BR)\", \"Sports escanteios\"\n                            if len(proxima_linha) < 30:\n                                nova_casa = detectar_casa_apostas(proxima_linha)\n                                \n                                # Fragmento válido se: não é casa nova\n                                if not nova_casa:\n                                    # Aceita (BR), (CO), etc\n                                    if re.match(r'^\\([A-Z]{2}\\)$', proxima_linha):\n                                        fragmentos_casa.append(proxima_linha)\n                                        linhas_usadas_fragmentos.add(j)\n                                        j += 1\n                                    # Aceita palavras simples como \"Sports\", \"Bet\", etc (parte do nome da casa)\n                                    elif len(proxima_linha.split()) == 1 and proxima_linha[0].isupper():\n                                        fragmentos_casa.append(proxima_linha)\n                                        linhas_usadas_fragmentos.add(j)\n                                        j += 1\n                                    # Se tem múltiplas palavras, pega só a PRIMEIRA se for capitalizada\n                                    # Ex: \"Sports escanteios\" -> pega \"Sports\", resto vai para tipo\n                                    elif proxima_linha[0].isupper():\n                                        palavras = proxima_linha.split()\n                                        if palavras[0][0].isupper() and not re.search(r'\\b(gol|time|cantos?|escanteios?|acima|abaixo)\\b', palavras[0].lower()):\n                                            fragmentos_casa.append(palavras[0])\n                                            # Salva o resto da linha para adicionar ao tipo depois\n                                            resto = ' '.join(palavras[1:])\n                                            if resto:\n                                                linhas_parcialmente_usadas[j] = resto\n                                            linhas_usadas_fragmentos.add(j)\n                                            j += 1\n                                        else:\n                                            break\n                                    else:\n                                        break\n                                else:\n                                    break\n                            else:\n                                break\n                        \n                        # Atualiza nome da casa com fragmentos coletados\n                        if fragmentos_casa:\n                            casa_encontrada = casa_encontrada + ' ' + ' '.join(fragmentos_casa)\n                        \n                        # Correção especial para casas conhecidas fragmentadas\n                        # Se detectou \"Marjo\" mas não tem \"Sports\" no nome, verifica se está no texto\n                        if casa_encontrada.startswith('Marjo') and 'Sports' not in casa_encontrada:\n                            # Procura \"Sports\" nas linhas já coletadas (i até j)\n                            for k in range(i, min(j, len(linhas))):\n                                if 'Sports' in linhas[k]:\n                                    casa_encontrada = 'Marjo Sports (BR)'\n                                    break\n                        \n                        # DEPOIS: Coleta linhas com dados financeiros e continuação do tipo\n                        while j < len(linhas) and j < i + 8:  # Máximo total 8 linhas\n                            proxima_linha = linhas[j]\n                            \n                            # Trata linhas usadas como fragmentos da casa\n                            if j in linhas_usadas_fragmentos:\n                                # Se foi parcialmente usada, adiciona o resto ao texto\n                                if j in linhas_parcialmente_usadas:\n                                    texto_aposta += ' ' + linhas_parcialmente_usadas[j]\n                                j += 1\n                                continue\n                            \n                            # Para se encontrar outra casa de apostas diferente\n                            # PRIMEIRO: Detecta se a linha é uma palavra capitalizada curta (potencial início de casa)\n                            # Usa detectar_casa_apostas para validar se é prefixo de casa conhecida\n                            palavras_linha = proxima_linha.strip().split()\n                            if palavras_linha:\n                                primeira_palavra = palavras_linha[0]\n                                \n                                # Se é palavra capitalizada curta (3-15 chars) SEM números/odds\n                                if (len(primeira_palavra) >= 3 and \n                                    len(primeira_palavra) <= 15 and \n                                    primeira_palavra[0].isupper() and\n                                    not re.search(r'\\d+\\.\\d+', proxima_linha)):  # Não tem odds\n                                    \n                                    # Tenta detectar a palavra como possível casa\n                                    possivel_casa = detectar_casa_apostas(primeira_palavra)\n                                    if possivel_casa:\n                                        # É uma palavra que inicia uma casa conhecida\n                                        # Compara com casa atual para ver se é diferente\n                                        casa_atual_base = casa_encontrada.split()[0] if casa_encontrada else \"\"\n                                        if casa_atual_base.lower() != primeira_palavra.lower():\n                                            # É uma casa NOVA diferente - para imediatamente!\n                                            print(f\"DEBUG: Detectada NOVA CASA! casaAtual={casa_atual_base} novaDetectada={primeira_palavra} linha={proxima_linha[:50]}\", file=sys.stderr)\n                                            break\n                            \n                            # SEGUNDO: Tenta detecção normal de casa\n                            casa_na_proxima = detectar_casa_apostas(proxima_linha)\n                            if casa_na_proxima:\n                                # Para se for uma casa DIFERENTE da atual\n                                casa_atual_base = casa_encontrada.split()[0] if casa_encontrada else \"\"\n                                casa_proxima_base = casa_na_proxima.split()[0] if casa_na_proxima else \"\"\n                                \n                                # Se são casas diferentes, para imediatamente\n                                if casa_atual_base.lower() != casa_proxima_base.lower():\n                                    break\n                                \n                            # Para se encontrar \"Aposta total\" ou outras seções\n                            if any(keyword in proxima_linha for keyword in ['Aposta total', 'Mostrar', 'Use sua', 'Arredondar']):\n                                break\n                            \n                            # Adiciona linha se contém dados relevantes OU se é continuação de tipo de aposta\n                            tem_dados_financeiros = any(keyword in proxima_linha for keyword in ['USD', 'BRL', '●', '○']) or re.search(r'\\d+\\.\\d+', proxima_linha)\n                            eh_continuacao_tipo = bool(re.search(r'\\b(gol|time|cantos?|escanteios?|resultado|final|tempo|minuto|chute|corner|primeiro|segundo|1º|2º|over|under|acima|abaixo|casa|fora|empate|handicap)\\b', proxima_linha.lower()))\n                            eh_linha_curta = len(proxima_linha.split()) <= 6\n                            \n                            if tem_dados_financeiros or (eh_continuacao_tipo and eh_linha_curta):\n                                texto_aposta += ' ' + proxima_linha\n                                j += 1\n                            else:\n                                break\n                        \n                        # Processa o texto coletado da aposta\n                        aposta = processar_aposta_completa(texto_aposta, casa_encontrada)\n                        if aposta and aposta['house'] and aposta['odd']:\n                            apostas_encontradas.append(aposta)\n                        \n                        i = j  # Pula para depois desta aposta\n                    else:\n                        i += 1\n                \n                # Mapeia apostas para bet1, bet2 e bet3 (se houver)\n                if len(apostas_encontradas) >= 1:\n                    dados['bet1'].update(apostas_encontradas[0])\n                \n                if len(apostas_encontradas) >= 2:\n                    dados['bet2'].update(apostas_encontradas[1])\n                \n                if len(apostas_encontradas) >= 3:\n                    dados['bet3'].update(apostas_encontradas[2])\n                \n                # Se encontrou dados suficientes, para\n                # Para apostas duplas: bet1 e bet2 devem ter house (e menos de 3 apostas detectadas)\n                # Para apostas triplas: bet1, bet2 E bet3 devem ter house\n                bets_detected = len(apostas_encontradas)\n                if dados['teamA'] and dados['teamB'] and dados['bet1']['house'] and dados['bet2']['house']:\n                    # Só para se:\n                    # - Detectou menos de 3 apostas (aposta dupla completa) OU\n                    # - Detectou 3+ apostas E bet3 já está populada (aposta tripla completa)\n                    if bets_detected < 3 or dados['bet3']['house']:\n                        break\n    \n    except Exception as e:\n        print(f\"Erro ao processar PDF: {str(e)}\", file=sys.stderr)\n    \n    return dados\n\ndef detectar_casa_apostas(linha):\n    \"\"\"\n    Detecta casas de apostas usando lista completa do sistema (1005+ casas)\n    Suporta todas as variantes incluindo casas com parênteses como KTO (BR), Blaze (BR)\n    Detecta também fragmentos iniciais de casas compostas (ex: \"Cloud\" -> CloudBet)\n    \"\"\"\n    # Lista completa de todas as casas de apostas do sistema\n    casas_sistema = [\n        '10Bet', '10Bet (SE)', '10Bet (ZA)', '10Bet (UK)', '10Bet (MX)', '888Games', '10Cric', '188Bet',\n        '188Bet (PT)', '188Bet (Sbk)', '188Bet (ZH)', 'HGA030 (Crown)', 'HGA035 (Crown)', '18Bet', 'BabiBet',\n        'Hollywoodbets (UK)', 'Premium Tradings', 'RoyalistPlay', 'RoyalistPlay (Bet)', '1Bet (CO)', '21Red',\n        'Bet-Bra SB (BR)', 'BetOBet', 'BetOBet (CC)', 'Dazzlehand', 'FoggyBet', 'OneCasino', 'Scarawins',\n        '1Win (Original)', '1xBet', '1xBet (AG)', '1xBet (BO)', '1xBet (MD)', '1xBet (NG)', '1xstavka (RU)',\n        'Betandyou', 'Linebet', 'MegaPari', 'Oppa88', 'Pari-pesa', 'Paripesa', 'Paripesa (Asia)', 'Paripesa (Biz)',\n        'Paripesa (Com)', 'Paripesa (Cool)', 'Paripesa (ME)', 'Paripesa (Net)', 'Paripesa (NG)', 'Paripesa (PT)',\n        'Paripesa (Site)', 'Paripesaut', 'SapphireBet', '1xBet (ES)', '1xBet (IT)', 'Fastbet (IT)', '22Bet',\n        '22Bet (CM)', '22Bet (NG)', '22win88', 'Bestwinzz', '32Red', 'Unibet (EE)', 'Unibet (IE)', 'Unibet (UK)',\n        '3et', '888sport', '888sport (DE)', '888sport (DK)', '888sport (ES)', '888sport (RO)', 'MrGreen',\n        'MrGreen (DK)', 'MrGreen (SE)', '888sport (IT)', 'AccessBet', 'AdjaraBet', 'Admiral (AT)', 'Admiral (DE)',\n        'AdmiralBet (ES)', 'AdmiralCasino (UK)', 'Swisslos (CH)', 'AdmiralBet (IT)', 'Afribet (NG)', 'Betfred (ZA)',\n        'AI Sports', 'AirBet (IT)', 'AndromedaBet (IT)', 'BetItaly (IT)', 'Akbets', 'AlfaBet (BR)', 'Aposta1 (BR)',\n        'Apostaganha (BR)', 'ArtlineBet', 'AsianOdds', 'B1Bet (BR)', 'Bahigo', 'Kakeyo', 'BaltBet (RU)',\n        'BandBet (BR)', 'BangBet', 'Betsure', 'BantuBet (AO)', 'Bet2U2', 'BetBaba (NG)', 'Bet-at-home',\n        'Bet-at-home (DE)', 'Bet-Bra (BR)', 'Bet25 (DK)', 'Bet3000 (DE)', 'Bet365 (Fast)', '28365365', '365-808',\n        '365sb', '365sport365', '878365', 'Allsport365', 'Bet365 (AU)', 'Bet365 (BR)', 'Bet365 (DE)', 'Bet365 (ES)',\n        'Bet365 (GR)', 'Bet365 (IT)', 'Bet365 (NL)', 'Game-365 (CN)', 'Bet365 (Full)', 'Bet4 (BR)', 'Bet4',\n        'Bet4 (PE)', 'Bet7', 'Bet7k (BR)', 'B2XBET (BR)', 'BetBet (BR)', 'Cassino (BR)', 'Donald (BR)', 'Vera (BR)',\n        'Bet9ja', 'Betadonis', 'Betaland (IT)', 'Betano', 'Betano (CZ)', 'Betano (DE)', 'Betano (MX)', 'Betano (NG)',\n        'Betano (RO)', 'Betano (BR)', 'Betano (PT)', 'Betao (BR)', 'BravoBet (BR)', 'Maxima (BR)', 'R7Bet (BR)',\n        'XpBet (BR)', 'BetBoom (BR)', 'BetBoom', 'BetBoom (RU)', 'Betboro', 'Betboro (GH)', 'Betcity',\n        'Betcity (BY)', 'Betcity (Net)', 'Betcity (RU)', 'Formula55 (TJ)', 'Betcity (NL)', 'SpeedyBet', 'BetClic',\n        'BetClic (FR)', 'BetClic (IT)', 'BetClic (PL)', 'BetClic (PT)', 'Betcris', 'Betcris (DO)', 'Betcris (MX)',\n        'Betcris (PL)', 'BetDaq', 'BetDaSorte (BR)', 'Afun (BR)', 'BetDSI (EU)', 'BetEsporte (BR)', 'LanceDeSorte (BR)',\n        'Betfair', 'Betfair (AU)', 'Betfair (BR)', 'Betfair (RO)', 'SatSport', 'Sharpxch', 'Tradexbr',\n        'Betfair (ES)', 'Betfair (IT)', 'Betfair (MBR)', 'Betfair SB', 'Betfair SB (ES)', 'Betfair SB (RO)',\n        'Betfarm', 'Betfirst (BE)', 'Betflip', 'Casobet (Sport)', 'Fairspin', 'Tether', 'Betfred', 'BetiBet',\n        'Betika (KE)', 'BetInAsia (Black)', 'Betinia', 'CampoBet', 'Lottoland (UK)', 'BetKing', 'Betlive',\n        'Betmaster', 'BetMomo', 'Betnacional (BR)', 'Betnation (NL)', 'BetOnline (AG)', 'BetOnline (Classic)',\n        'LowVig (AG)', 'SportsBetting (AG)', 'TigerGaming', 'BetPawa (NG)', 'BetPawa (CM)', 'BetPawa (GH)',\n        'BetPawa (KE)', 'BetPawa (RW)', 'BetPawa (TZ)', 'BetPawa (UG)', 'BetPawa (ZM)', 'BetPix365 (BR)',\n        'Vaidebet', 'BetRebels', '21Bets', '7bet (LT)', 'All British Casino', 'ApuestaTotal', 'Bankonbet',\n        'BaumBet (RO)', 'Bet593 (EC)', 'Betaki (BR)', 'Betanoshops (NG)', 'Betinia (DK)', 'Betinia (SE)',\n        'BetNFlix', 'Bettarget (UK)', 'CampeonBet', 'Casinado', 'CasinoAtlanticCity', 'Casinoly', 'Cazimbo',\n        'DoradoBet', 'Ecuabet', 'ElaBet (GR)', 'EsportivaBet (BR)', 'EstrelaBet (BR)', 'EvoBet', 'FezBet',\n        'FrankSports (RO)', 'GastonRed', 'Golden Palace (BE)', 'Greatwin', 'Jogodeouro (BR)', 'Juegaenlineachile (CL)',\n        'JupiCasino', 'Karamba', 'Karamba (UK)', 'Lapilanders', 'LotoGreen (BR)', 'Lottland (IE)', 'Lottoland',\n        'Lottoland (AT)', 'MalinaCasino', 'Mcgames (BR)', 'Merkurxtip (CZ)', 'Metgol (BR)', 'MiСasino',\n        'MrBit (BG)', 'MrBit (RO)', 'MultiBet (BR)', 'NinjaCasino', 'Novajackpot', 'Playdoit (MX)', 'PowBet',\n        'Rabona', 'RabonaBet', 'RtBet', 'SlotV (RO)', 'SONSofSLOTS', 'Spinanga', 'Sportaza', 'StarCasinoSport (BE)',\n        'Supacasi', 'SvenBet', 'Svenplay', 'ToonieBet (CA)', 'Vavada', 'Vegas (HU)', 'Wazamba', 'Winpot (MX)',\n        'Betrivers (CA)', 'Betrivers (AZ)', 'Betsafe', 'Bethard', 'Betsafe (EE)', 'Betsafe (LV)', 'Betsafe (SE)',\n        'Betsson', 'Bets10', 'Betsson (AR)', 'Betsson (BR)', 'Betsson (CO)', 'Betsson (SE)', 'Inkabet (PE)',\n        'Betsson (ES)', 'Betpark (BR)', 'SupremaBet (BR)', 'Betsson (FR)', 'Betsson (GE)', 'Betsson (GR)',\n        'Betsmith', 'Betsson (IT)', 'Betsul (BR)', 'Betuk (UK)', 'Betus (PA)', 'BetVictor', 'Parimatch (UK)',\n        'Puntit (IN)', 'BetWarrior', 'BetWarrior (BR)', 'BetWarrior (Caba)', 'BetWarrior (MZA)', 'BetWarrior (PBA)',\n        'BetWarrior Apuestas (AR)', 'LeoVegas (IT)', 'Svenska Spel (SE)', 'BetWay', 'BetWay (DE)', 'BetWay (ES)',\n        'BetWay (MX)', 'BetWay (IT)', 'Betwgb', 'AdmiralBet (ME)', 'AdmiralBet (RS)', 'AdmiralBet (UG)', 'BetX (CZ)',\n        'Betxchange', 'Bingoal (BE)', 'BallyBet', 'BetPlay (CO)', 'Bingoal (NL)', 'Desert Diamond', 'Expekt (SE)',\n        'Blaze', '4RaBet', '4RaBet (Play)', '500Casino', 'Africa365', 'BC.Game', 'BetFury', 'Betonred',\n        'Betonred (NG)', 'BetPlay', 'BetTilt', 'Betvip', 'Betvip (BR)', 'BilBet', 'Bitz', 'Blaze (BR)',\n        'BloodMoon (CO)', 'BlueChip', 'Bons', 'CasinoX', 'Casinozer', 'Casinozer (EU)', 'CsGo500', 'Fortunejack',\n        'HugeWin', 'JetBet (BR)', 'JonBet (BR)', 'Joycasino', 'Lucky Block', 'Lucky Block (Top)', 'Opabet',\n        'PinBet', 'Pokerdom', 'PuskasBet (BR)', 'Rainbet', 'RajaBets', 'Razed', 'Riobet', 'Rivalry', 'Rollbit',\n        'RooBet', 'Slots Safari (CO)', 'Solcasino', 'TrBET', 'Yonibet', 'Yonibet (EU)', 'BoaBet', 'Bodog (EU)',\n        'Bovada (LV)', 'BolsaDeAposta (BR)', 'BolsaDeAposta TB (BR)', 'BookMaker (EU)', 'JustBet (CO)',\n        'BookmakerXyz', 'BoyleSports', 'Brazino 777', 'Brazino 777 (BY)', 'Brazino 777 (IO)', 'Wazobet',\n        'BrBet (BR)', 'BresBet', 'Bumbet', 'Bwin', 'Betboo (BR)', 'Betmgm (CA)', 'Betmgm (MA)', 'Betmgm (NY)',\n        'Bwin (BE)', 'Bwin (DE)', 'Bwin (DK)', 'Bwin (ES)', 'Bwin (GR)', 'Bwin (IT)', 'Gamebookers',\n        'Giocodigitale (IT)', 'Ladbrokes (DE)', 'Oddset (DE)', 'Partypoker', 'Sportingbet', 'Sportingbet (BR)',\n        'Sportingbet (DE)', 'Sportingbet (GR)', 'Sportingbet (ZA)', 'Vistabet (GR)', 'Bwin (FR)', 'Bwin (PT)',\n        'Caliente (MX)', 'Betcha (PA)', 'Marca Apuestas (ES)', 'Wplay (CO)', 'CampoBet (DK)', 'Casa Pariurilor (RO)',\n        'Fortuna (RO)', 'CasaDeApostas (BR)', 'Betmais', 'CasinoPortugal (PT)', 'CBet', 'CBet (LT)', 'Circus (BE)',\n        'Circus (NL)', 'CloudBet', 'Codere (ES)', 'Codere (AR)', 'Codere (MX)', 'Comeon', 'Casinostugan',\n        'Comeon (PL)', 'Hajper', 'Lyllo Casino', 'MobileBet', 'Nopeampi', 'Pzbuk (PL)', 'Saga Kingdom',\n        'Snabbare', 'SunMaker (DE)', 'Comeon (NL)', 'CoolBet', 'CoolBet (CL)', 'CoolBet (PE)', 'Coral (UK)',\n        'Crocobet', 'CrystalBet (GE)', 'DafaBet (ES)', 'DafaBet (Sports)', 'Amperjai', 'Nextbet', 'DafaBet OW (Saba)',\n        '12Bet (Saba)', '12Bet (Saba-ID)', '12Bet (Saba-MY)', 'CMD368 (Saba)', 'M88 (Saba)', 'W88Live (Saba)',\n        'Danskespil (DK)', 'DaznBet (ES)', 'DaznBet (UK)', 'DomusBet (IT)', 'DoxxBet (SK)', 'Draftkings',\n        'Draftking (CT)', 'DragonBet (UK)', 'DripCasino', 'Duelbits', 'Easybet (ZA)', 'Ebingo (ES)', 'BetaBet',\n        'BetaBet (Net)', 'Betcoin (AG)', 'ShansBet', 'EDSBet', 'Efbet (ES)', 'Efbet (BG)', 'Efbet (IT)',\n        'Efbet (RO)', 'Efbet (GR)', 'Efbet (Net)', 'EGB', 'EGB SPORT', 'EpicBet', 'Eplay24 (IT)',\n        'BegameStar (IT)', 'Betwin360 (IT)', 'SportItaliaBet (IT)', 'EsporteNetBet (BR)', 'BetsBola',\n        'EsporteNetSP (BR)', 'EsporteNetVip (BR)', 'EsporteNetVip', 'EsportesDaSorte (BR)', 'EstorilSolCasinos (PT)',\n        'Etipos (SK)', 'Etopaz (AZ)', 'Etoto (PL)', 'EuroBet (IT)', 'EveryGame (EU)', 'ExclusiveBet', 'Betfinal',\n        'IZIbet', 'MrXBet', 'ShangriLa', 'UniClub (LT)', 'Expekt (DK)', 'LeoVegas (DK)', 'F12Bet (BR)',\n        'SPIN (BR)', 'Fanatics', 'FanDuel', 'Betfair SB (BR)', 'FanDuel (CT)', 'Fastbet', 'CopyBet (CY)',\n        'FavBet', 'FavBet (UA)', 'FB Sports', 'Fonbet', 'BeteryBet (IN)', 'Bettery (RU)', 'Fonbet (GR)',\n        'Fonbet (KZ)', 'Fonbet (Mobile)', 'Pari (RU)', 'Football (NG)', 'Fortuna (CZ)', 'Fortuna (PL)',\n        'Fortuna (SK)', 'FulltBet (BR)', 'GaleraBet (BR)', '888Casino (Arabic)', 'Gamdom', 'GazzaBet (IT)',\n        'Germania (HR)', 'GGBet', 'Freeggbet', 'Vulkan', 'Goalbet', 'GoldBetShop (IT)', 'BetFlag (IT)',\n        'GoldBet (IT)', 'IntralotShop (IT)', 'Lottomatica (IT)', 'PlanetWin365 (IT)', 'GoldenPark (ES)',\n        'CasinoBarcelona (ES)', 'Solcasino (ES)', 'GoldenPark (PT)', 'GoldenVegas (BE)', 'GrandGame (BY)',\n        'HiperBet (BR)', 'HKJC', 'HoliganBet (TR)', 'JojoBet', 'Holland Casino (NL)', 'Hollywoodbets',\n        'Hollywoodbets (MZ)', 'iForBet (PL)', 'Ilotbet', 'Interwetten', 'Interwetten (ES)', 'Interwetten (GR)',\n        'IviBet', '20Bet', 'Jacks (NL)', 'Expekt', 'JetCasino', 'Flagman', 'FreshCasino', 'Rox (Sport)',\n        'Jokerbet (ES)', 'JSB', 'Boltbet (GH)', 'Primabet (GM)', 'TicTacBets (ZA)', 'JugaBet (CL)',\n        'Parimatch (TJ)', 'KingsBet (CZ)', 'KirolBet (ES)', 'Apuestasvalor (ES)', 'Aupabet (ES)', 'Juegging (ES)',\n        'Kwiff', 'Betkwiff', 'Ladbrokes', 'Ladbrokes (BE)', 'LeaderBet', 'Lebull (PT)', 'Leon', 'Leon (RU)',\n        'Twin', 'LeoVegas', 'Betmgm (BR)', 'Williamhill (SE)', 'LeoVegas (ES)', 'LigaStavok (RU)',\n        'LivescoreBet (NG)', 'SunBet (ZA)', 'LivescoreBet (UK)', 'LivescoreBet (IE)', 'VirginBet', 'LsBet',\n        'KikoBet', 'Mundoapostas', 'ReloadBet', 'SlottoJAM', 'TornadoBet', 'Luckia (ES)', 'Luckia (CO)',\n        'Luckia (MX)', 'LvBet', 'LvBet (LV)', 'LvBet (PL)', 'Mansion (M88-BTI)', 'Marathon', 'Marathon (BY)',\n        'Marathon (RU)', 'MBet', 'MarathonBet (DK)', 'MarathonBet (ES)', 'MarathonBet (IT)', 'MarjoSports (BR)', 'Marjo Sports (BR)', 'Marjo',\n        'Matchbook', 'Maxbet (RS)', 'Maxbet (BA)', 'MaxLine (BY)', 'Mcbookie', 'StarSports', 'MelBet',\n        'Betwinner', 'DBbet', 'MelBet (BI)', 'MelBet (KE)', 'MelBet (MN)', 'Meridian', 'Meridian (CY)',\n        'Meridian (BE)', 'Meridian (BA)', 'Meridian (ME)', 'Meridian (RS)', 'Meridian (PE)', 'JogaBets (MZ)',\n        'Meridian (BR)', 'MerkurBets', 'Betcenter (BE)', 'Cashpoint (DK)', 'MerkurBets (DE)', 'Miseojeu+',\n        'Misli (AZ)', 'MostBet', 'Mozzart', 'Mozzart (BA)', 'Mozzart (NG)', 'Mozzart (RO)', 'MSport (GH)',\n        'MSport (NG)', 'Mystake', '31Bet', '9dBet (BR)', 'Betfast', 'Betfast (BR)', 'Donbet', 'Donbet (Win)',\n        'Faz1Bet (BR)', 'Freshbet', 'Goldenbet', 'Jackbit', 'Mystake (Bet)', 'Rolletto', 'TivoBet (BR)',\n        'Velobet (Win)', 'Wjcasino (BR)', 'N1Bet', '12Play', 'CelsiusCasino', 'Coins Game', 'Wild', 'YBets',\n        'NaijaBet', 'NairaBet', 'Napoleon (BE)', 'Neobet', 'Neobet (CA)', 'Neobet (DE)', 'Neobet (ZA)',\n        'Nesine (TR)', 'Bilyoner', 'Misli (Com)', 'Oley', 'NetBet', 'Bet777 (BE)', 'Bet777 (ES)', 'NetBet (GR)',\n        'NetBet (BR)', 'NetBet (FR)', 'NetBet (IT)', 'DaznBet (IT)', 'OriginalBet (IT)', 'Plexbet (IT)',\n        'NetBet (RO)', 'Nike (SK)', 'NitroBetting (EU)', 'Norsk Tipping (NO)', 'Novibet (BR)', 'Novibet (GR)',\n        'Novibet (IE)', 'Olimp', 'Olimp (Bet)', 'Olimpbet (KZ)', 'Olimpkz', 'OlimpoBet (PE)', 'OlyBet (ES)',\n        'OlyBet (EU)', 'OlyBet (FR)', 'FeelingBet (FR)', 'Genybet (FR)', 'OlyBet (LT)', 'Onabet (BR)',\n        'Esporte365 (BR)', 'LuckBet (BR)', 'Luvabet (BR)', 'Optibet (LT)', 'Optibet (LV)', 'Optibet (EE)',\n        'OrbitX', 'OrbiteX', 'Paddy Power', 'PameStoixima (GR)', 'Parasino', 'ApxBet', 'Betonngliga',\n        'BigBet (BR)', 'LiderBet (BR)', 'RealsBet (BR)', 'Parimatch (KZ)', 'BuddyBet (UA)', 'Gra (Live)',\n        'ParionsSport (FR)', 'Paston (ES)', 'Br4bet (BR)', 'SorteOnline (BR)', 'Pin-up', 'BetPlays',\n        'Pin-up (RU)', 'BaseBet', 'Casino Spinamba', 'Lucky Bird Casino', 'MarsBet', 'Pin-up (EN)',\n        'Slottica', 'Slotty Way', 'Winmasters', 'Winmasters (CY)', 'Winmasters (GR)', 'Winmasters (RO)',\n        'Pinnacle', 'P4578 (Asian)', 'P4578 (EU)', 'Pin135 (EU)', 'Pinnacle (Bet)', 'Pinnacle (BR)',\n        'Pinnacle (SE)', 'Pinnacle888 (Asian)', 'Pinnacle888 (EU)', 'Piwi247 (SB)', 'PS3838 (Broker)',\n        'Start975 (Asian)', 'Start975 (EU)', 'Piwi247', 'PixBet (BR)', 'FlaBet (BR)', 'Pixbet285',\n        'Placard (PT)', 'Playbonds', 'PlayNow', 'PMU (FR)', 'PointsBet (AU)', 'PokerStars', 'PokerStars (DK)',\n        'PokerStars (RO)', 'PokerStars (FR)', 'PokerStars (UK)', 'PokerStars (CA)', 'PokerStars (ES)',\n        'PokerStars (SE)', 'PremierBet (MW)', 'MercuryBet', 'PremierBet (AO)', 'PremierBet (CD)',\n        'PremierBet (CG)', 'PremierBet (CM)', 'PremierBet (MZ)', 'PremierBet (SN)', 'PremierBet (TD)',\n        'PremierBet (TZ)', 'QQ101 (BTI)', '10Bet (KR)', '12Bet (BTI-ID)', 'Fun88 (IN)', 'QQ101 (IM Sports)',\n        'RayBet', 'Reidopitaco (BR)', 'RetaBet (ES)', 'RetaBet (ES-AN)', 'RetaBet (PE)', 'RicoBet (BR)',\n        'BetGorillas (BR)', 'KingpandaBet (BR)', 'Rivalo (BR)', 'Rivalo (CO)', 'RuBet', 'Rushbet (CO)',\n        'GoldenBull (SE)', 'Rushbet (MX)', 'Sazka (CZ)', 'Sbobet', 'Pic5678', 'SbobetAsia', 'SboTop',\n        'Sbobet (Esport)', '12Bet (Esport)', 'BTC365 (Esport)', 'VKGame', 'SeuBet (BR)', '747 Live',\n        'Shuffle', 'Sisal (IT)', 'PokerStars (IT)', 'SkyBet', 'Smarkets', 'Snai (IT)', 'SoccaBet',\n        'SolisBet', 'Solverde (PT)', 'SorteNaBet (BR)', 'Bateu (BR)', 'Betfusion (BR)', 'BullsBet (BR)',\n        'SportBet (IT)', 'BetX (IT)', 'StarGame (IT)', 'SportingWin', 'Sportium (CO)', 'Sportium (ES)',\n        'Sportmarket', 'SportsBet', 'SportsBet (AU)', 'SportyBet', 'SportyBet (BR)', 'Stake', 'Stake (BR)',\n        'KTO (BR)', 'Stake (CO)', 'Frumzi', 'FunBet', 'LibraBet', 'MafiaCasino', 'StoneVegas', 'StanleyBet (BE)',\n        'StanleyBet (IT)', 'StanleyBet (RO)', 'Admiral (RO)', 'StarCasino (NL)', 'Stoiximan (GR)',\n        'Stoiximan (CY)', 'Stoiximan (GR)', 'STS (PL)', 'SuperBet (BR)', 'Super Bet (BR)', 'SuperBet (PL)', 'SuperBet (RO)',\n        'SuperBet (RS)', 'Surebet247', 'SX Bet', 'SynotTip (LV)', 'SynotTip (CZ)', 'SynotTip (SK)', 'Tab (AU)',\n        'TeApuesto (PE)', 'TempoBet', 'Tennisi', 'Tennisi (Bet)', 'Tennisi (KZ)', 'ThunderPickIo (NO)',\n        'Tipico', 'Tipico (DE)', 'Tipp3 (AT)', 'TippmixPro (HU)', 'Tipsport (CZ)', 'Chance (CZ)',\n        'Tipsport (SK)', 'Tipwin (DE)', 'Tipwin', 'Tipwin (DK)', 'Tipwin (SE)', 'TonyBet', 'Vave',\n        'TonyBet (ES)', 'TonyBet (NL)', 'Topsport (LT)', 'Toto (NL)', 'TotoGaming (AM)', '1Win (Provider)',\n        'Cannonbet', 'CaptainsBet (KE)', 'MelBet (NG)', 'MelBet (RU)', 'Sol.Casino', 'Tinbet (PE)',\n        'Winspirit', 'Ubet (CY)', 'Ubet (KZ)', 'Betera (BY)', 'Unibet (DK)', 'Unibet (BE)', 'Unibet (FI)',\n        'Unibet (SE)', 'Unibet (FR)', 'Unibet (RO)', 'ATG (SE)', 'Betmgm (NL)', 'Betmgm (SE)', 'Betmgm (UK)',\n        'Casumo', 'Casumo (ES)', 'GrosvenorCasinos', 'No Account Bet (SE)', 'Paf', 'Paf (ES)', 'Paf (SE)',\n        'PafBet (LV)', 'Scoore (BE)', 'Unibet (AU)', 'Unibet (IT)', 'Unibet (MT)', 'Unibet (NL)', 'VBet',\n        'Bets60', 'H2bet (BR)', 'Hash636', 'Uabet', 'VBet (AM)', 'VBet (BR)', '7Games (BR)', 'Seguro (BR)',\n        'VBet (FR)', 'VBet (LAT)', 'VBet (NL)', 'VBet (UK)', 'Veikkaus (FI)', 'Versus (ES)', 'Vivasorte (BR)',\n        '4Play (BR)', '4Win (BR)', 'Ginga (BR)', 'QG (BR)', 'Zeroum (BR)', 'Vulkan Bet', 'W88Es', 'Wildz',\n        'William Hill', 'Williamhill (ES)', 'Williamhill (IT)', 'Winamax (ES)', 'Winamax (DE)', 'Winamax (FR)',\n        'WinBet (BG)', 'WinBet (RO)', 'Winline (RU)', 'WolfBet', 'WonderBet (CO)', 'WWin', 'YaassCasino (ES)',\n        'Yabo888', 'Yajuego (CO)', 'YSB', 'Zamba (CO)', 'ZeBet', 'ZeBet (BE)', 'ZeBet (ES)', 'ZeBet (NL)',\n        'Zenit', 'Zenit (Win)'\n    ]\n    \n    linha_lower = linha.lower()\n    \n    # Detecta casas de apostas no texto\n    # Ordena casas por especificidade (mais específicas primeiro)\n    casas_ordenadas = sorted(casas_sistema, key=lambda x: (-len(x), '(' not in x))\n    \n    casas_encontradas = []\n    for casa in casas_ordenadas:\n        casa_lower_normalized = casa.lower()\n        \n        # Para casas com parênteses, busca de forma mais flexível\n        if '(' in casa_lower_normalized:\n            # Quebra a casa em nome base + sufixo\n            if ' (' in casa_lower_normalized:\n                nome_base, sufixo = casa_lower_normalized.split(' (', 1)\n                sufixo = '(' + sufixo  # Re-adiciona o parêntese\n                \n                # Verifica se os componentes do nome base e sufixo existem na linha\n                # Permite que estejam separados (ex: \"Super...Bet (BR)\")\n                palavras_base = nome_base.split()\n                todas_palavras_presentes = all(palavra in linha_lower for palavra in palavras_base)\n                sufixo_presente = sufixo in linha_lower\n                \n                if todas_palavras_presentes and sufixo_presente:\n                    # Verifica ordem aproximada: primeira palavra antes do sufixo\n                    pos_primeira = linha_lower.find(palavras_base[0])\n                    pos_sufixo = linha_lower.find(sufixo)\n                    if pos_primeira < pos_sufixo:\n                        return casa\n            else:\n                # Se não tem espaço antes do parêntese, usa busca simples\n                if casa_lower_normalized in linha_lower:\n                    return casa\n        else:\n            # Para casas sem parênteses, usa word boundaries para precisão\n            casa_pattern = re.escape(casa_lower_normalized).replace(r'\\ ', r'\\s*')\n            if re.search(r'\\b' + casa_pattern + r'\\b', linha_lower):\n                return casa\n    \n    # Se não encontrou casa conhecida, tenta detecção dinâmica \n    # Busca por padrão: palavra capitalizada seguida de dados de aposta\n    match = re.search(r'^([A-Z][A-Za-z\\s\\(\\)]{2,30})\\s+[A-Za-z0-9()+\\-≥≤\\.]+\\s+\\d+\\.\\d+', linha)\n    if match:\n        casa_candidata = match.group(1).strip()\n        # Valida se parece ser nome de casa de apostas\n        if len(casa_candidata) >= 3:\n            return casa_candidata\n    \n    # Detecta fragmentos iniciais de casas compostas (ex: \"Cloud\" -> CloudBet, \"Marjo\" -> MarjoSports)\n    # Procura palavras capitalizadas no início da linha\n    palavras = linha.strip().split()\n    if palavras:\n        primeira_palavra = palavras[0]\n        # Se é uma palavra capitalizada curta (3-15 chars), verifica se é início de casa conhecida\n        if len(primeira_palavra) >= 3 and len(primeira_palavra) <= 15 and primeira_palavra[0].isupper():\n            # Verifica se essa palavra é o início de alguma casa na lista\n            for casa in casas_sistema:\n                casa_limpa = casa.split('(')[0].strip()  # Remove sufixos como (BR), (CO)\n                # Se a casa começa com essa palavra, retorna como fragmento detectado\n                if casa_limpa.lower().startswith(primeira_palavra.lower()):\n                    return primeira_palavra\n    \n    # Fallback: palavras individuais capitalizadas (como \"Marjo\", \"Sports\")\n    # Retorna None para permitir junção posterior\n    return None\n\ndef processar_aposta_completa(texto_aposta, casa_aposta):\n    \"\"\"\n    Processa o texto completo de uma aposta para extrair todos os campos\n    Garante 100% de precisão na extração\n    \"\"\"\n    # === IDENTIFICAÇÃO DE SÍMBOLOS E DIVISÃO ===\n    # Busca símbolos na ordem: ●, ○, depois \\uf35d (unicode F35D)\n    simbolo_match = re.search(r'[●○\\uf35d]', texto_aposta)\n    \n    if simbolo_match:\n        parte_antes_simbolo = texto_aposta[:simbolo_match.start()].strip()\n        parte_depois_simbolo = texto_aposta[simbolo_match.end():].strip()\n    else:\n        # Se não tem símbolo, usa moeda como divisor\n        moeda_match = re.search(r'(USD|BRL)', texto_aposta)\n        if moeda_match:\n            parte_antes_simbolo = texto_aposta[:moeda_match.start()].strip()\n            parte_depois_simbolo = texto_aposta[moeda_match.start():].strip()\n        else:\n            parte_antes_simbolo = texto_aposta\n            parte_depois_simbolo = \"\"\n    \n    # === EXTRAÇÃO DE ODD ===\n    # A odd geralmente é o último número decimal antes do símbolo/stake\n    # e está no range típico de 1.0 a 50.0\n    numeros_antes = re.findall(r'\\d+\\.\\d+', parte_antes_simbolo)\n    odd = None\n    \n    if numeros_antes:\n        # Busca do FIM para o início (último número válido antes do símbolo é a odd)\n        # Isso evita pegar números que fazem parte do tipo (ex: \"Acima 1.5\")\n        for num_str in reversed(numeros_antes):\n            num = float(num_str)\n            if 1.0 <= num <= 50.0:\n                odd = num\n                break\n        \n        if not odd:  # Fallback\n            odd = float(numeros_antes[-1])\n    \n    # === EXTRAÇÃO DE STAKE E PROFIT ===\n    stake = None\n    profit = None\n    \n    # Busca padrões baseados em moeda para garantir precisão\n    # Padrão: NUMBER USD/BRL -> stake\n    stake_matches = re.findall(r'(\\d+\\.?\\d*)\\s+(USD|BRL)', texto_aposta)\n    if stake_matches:\n        stake = float(stake_matches[0][0])\n    \n    # Profit é o último número após stake (geralmente < 1000 para lucros individuais)\n    # Extração mais robusta: procura o último número DEPOIS do stake\n    todos_numeros = re.findall(r'\\d+\\.\\d+', texto_aposta)\n    \n    # Primeiro tenta buscar especificamente após stake (mais preciso)\n    if stake:\n        # Encontra posição do stake no texto\n        stake_str = str(stake).replace('.', r'\\.')\n        stake_pattern = re.search(stake_str, texto_aposta)\n        if stake_pattern:\n            texto_pos_stake = texto_aposta[stake_pattern.end():]\n            numeros_pos_stake = re.findall(r'\\d+\\.\\d+', texto_pos_stake)\n            if numeros_pos_stake:\n                # Pega o último número após o stake (profit geralmente vem por último)\n                profit = float(numeros_pos_stake[-1])\n    \n    # Fallback: busca último número pequeno (< 1000) que não seja stake nem odd\n    if not profit:\n        for num_str in reversed(todos_numeros):\n            num = float(num_str)\n            if num != stake and num != odd and num < 1000:\n                profit = num\n                break\n    \n    # === EXTRAÇÃO DO TIPO DE APOSTA ===\n    # Extrai tipo de TODA a linha, não apenas da parte antes de USD\n    # O tipo pode estar dividido: parte antes USD + parte depois USD\n    tipo_completo = texto_aposta.replace(casa_aposta, '', 1).strip()\n    tipo_completo = re.sub(r'\\(BR\\)', '', tipo_completo).strip()\n    \n    # Remove números financeiros (odd, stake, profit) e moedas do tipo completo\n    palavras = tipo_completo.split()\n    palavras_filtradas = []\n    \n    # Palavras-chave que indicam que o próximo número faz parte do tipo de aposta\n    palavras_chave_tipo = ['acima', 'abaixo', 'total', 'over', 'under', 'mais', 'menos', \n                           'primeiro', 'segundo', 'tempo', 'extra', '1º', '2º']\n    \n    for i, palavra in enumerate(palavras):\n        # Remove moedas\n        if palavra in ['USD', 'BRL']:\n            continue\n        \n        # Verifica se a palavra anterior é uma palavra-chave de tipo de aposta\n        palavra_anterior_eh_chave = False\n        if i > 0:\n            palavra_anterior_lower = palavras[i-1].lower().replace('≥', '').replace('≤', '').strip()\n            palavra_anterior_eh_chave = any(chave in palavra_anterior_lower for chave in palavras_chave_tipo)\n        \n        # Verifica se é número\n        if re.match(r'^-?\\d+\\.?\\d*$', palavra):\n            num = float(palavra)\n            \n            # SEMPRE preserva números que vêm depois de palavras-chave (ex: \"Acima 27.5\")\n            if palavra_anterior_eh_chave:\n                palavras_filtradas.append(palavra)\n                continue\n            \n            # Remove se for odd, stake ou profit (com tolerância)\n            if (odd and abs(num - odd) < 0.01):\n                continue\n            if (stake and abs(num - stake) < 0.01):\n                continue\n            if (profit and abs(num - profit) < 0.01):\n                continue\n            \n            # Remove se for negativo (profit negativo)\n            if num < 0:\n                continue\n        \n        palavras_filtradas.append(palavra)\n    \n    tipo_aposta = ' '.join(palavras_filtradas)\n    \n    # Limpeza final de símbolos e formatação\n    tipo_aposta = re.sub(r'[●○]', '', tipo_aposta)  # Remove símbolos circulares\n    tipo_aposta = re.sub(r'\\uf35d', '', tipo_aposta)  # Remove unicode F35D\n    tipo_aposta = tipo_aposta.replace('\\u232A', '')  # Remove U+232A (〉)\n    tipo_aposta = re.sub(r'\\s+', ' ', tipo_aposta).strip()  # Limpa espaços\n    tipo_aposta = re.sub(r'[-–]\\s*$', '', tipo_aposta).strip()  # Remove traços finais\n    \n    # Remove o nome da casa de apostas do tipo de aposta\n    casa_sem_parenteses = re.sub(r'\\s*\\([A-Z]{2}\\)\\s*', '', casa_aposta).strip()\n    \n    # PRIMEIRO: Tenta remover o nome completo da casa como frase única\n    tipo_aposta = re.sub(r'\\b' + re.escape(casa_sem_parenteses) + r'\\b', '', tipo_aposta, flags=re.IGNORECASE)\n    \n    # SEGUNDO: Remove palavras individuais apenas para casas conhecidas (evita remover \"Bet\" genérico)\n    # Lista de casas conhecidas onde podemos remover palavras específicas\n    casas_conhecidas = {\n        'estrela': ['EstrelaBet', 'Estrela'],\n        'pinnacle': ['Pinnacle'],\n        'marjo': ['MarjoSports', 'Marjo', 'Sports'],  # Sports só se for MarjoSports\n        'super': ['SuperBet', 'Super'],\n        'stake': ['Stake'],\n        'kto': ['KTO'],\n        'blaze': ['Blaze'],\n        'multibet': ['MultiBet', 'Multi'],\n        'bravo': ['BravoBet', 'Bravo'],\n        'betfast': ['Betfast'],\n        'betano': ['Betano']\n    }\n    \n    casa_lower = casa_sem_parenteses.lower()\n    \n    # Remove palavras específicas apenas para casas conhecidas\n    for chave, palavras in casas_conhecidas.items():\n        if chave in casa_lower:\n            for palavra in palavras:\n                tipo_aposta = re.sub(r'\\b' + re.escape(palavra) + r'\\b', '', tipo_aposta, flags=re.IGNORECASE)\n            break  # Para após encontrar a casa\n    \n    # Limpa espaços extras resultantes da remoção\n    tipo_aposta = re.sub(r'\\s+', ' ', tipo_aposta).strip()\n    \n    return {\n        'house': casa_aposta,\n        'odd': odd,\n        'type': tipo_aposta if tipo_aposta else None,\n        'stake': stake,\n        'profit': profit\n    }\n\ndef main():\n    if len(sys.argv) != 2:\n        print(\"Uso: python parse_pdf.py <caminho_do_pdf>\", file=sys.stderr)\n        sys.exit(1)\n    \n    caminho_pdf = sys.argv[1]\n    \n    try:\n        dados = extrair_dados_pdf(caminho_pdf)\n        # Imprime JSON para stdout para o Node.js capturar\n        print(json.dumps(dados, ensure_ascii=False, indent=None))\n    except Exception as e:\n        print(f\"Erro fatal: {str(e)}\", file=sys.stderr)\n        # Retorna estrutura vazia mas válida em caso de erro\n        dados_vazio = {\n            'date': None,\n            'sport': None,\n            'league': None,\n            'teamA': None,\n            'teamB': None,\n            'bet1': {'house': None, 'odd': None, 'type': None, 'stake': None, 'profit': None},\n            'bet2': {'house': None, 'odd': None, 'type': None, 'stake': None, 'profit': None},\n            'profitPercentage': None\n        }\n        print(json.dumps(dados_vazio, ensure_ascii=False, indent=None))\n        sys.exit(1)\n\nif __name__ == \"__main__\":\n    main()","path":null,"size_bytes":49698,"size_tokens":null},"client/src/components/examples/ImageUpload.tsx":{"content":"import { ImageUpload } from '../image-upload';\n\nexport default function ImageUploadExample() {\n  const handleImageUpload = (file: File) => {\n    console.log('Image uploaded:', file.name);\n  };\n\n  const handleImageRemove = () => {\n    console.log('Image removed');\n  };\n\n  return (\n    <div className=\"max-w-2xl p-4\">\n      <ImageUpload \n        onImageUpload={handleImageUpload}\n        onImageRemove={handleImageRemove}\n        isProcessing={false}\n      />\n    </div>\n  );\n}","path":null,"size_bytes":476,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"design_guidelines.md":{"content":"# Design Guidelines for Surebet Management System\n\n## Design Approach\n**System Selected**: Material Design with data-focused adaptations\n**Justification**: This is a utility-focused application prioritizing efficiency and data processing. The interface needs to handle complex workflows (OCR processing, dual-bet management) while maintaining clarity for financial data tracking.\n\n## Core Design Elements\n\n### A. Color Palette\n**Primary Colors (Dark Mode)**:\n- Background: 217 33% 17% (deep blue-gray)\n- Surface: 217 25% 25% (elevated surfaces)\n- Primary: 210 100% 70% (bright blue for CTAs)\n- Success: 140 65% 55% (for winning bets)\n- Error: 0 75% 65% (for losing bets)\n- Warning: 45 95% 65% (for pending/returned bets)\n\n**Light Mode**:\n- Background: 0 0% 98% (near white)\n- Surface: 0 0% 100% (pure white cards)\n- Primary: 210 100% 50% (blue)\n- Text: 217 33% 17% (dark blue-gray)\n\n### B. Typography\n**Font Family**: Inter (Google Fonts)\n- Headers: 600 weight\n- Body text: 400 weight\n- Data/numbers: 500 weight (for emphasis on financial values)\n- Small labels: 400 weight, slightly reduced opacity\n\n### C. Layout System\n**Spacing Units**: Tailwind units of 2, 4, 6, and 8\n- Component padding: p-4, p-6\n- Section margins: m-6, m-8\n- Element spacing: gap-2, gap-4\n- Form field spacing: space-y-4\n\n### D. Component Library\n\n**Navigation**:\n- Fixed sidebar with collapsible menu\n- Clean icons with labels\n- Active state highlighting\n\n**Data Entry**:\n- Large drag-and-drop upload area with dashed border\n- Editable form fields with clear labels\n- Two-column layout for dual-bet comparison\n- Validation states with color coding\n\n**Data Display**:\n- Card-based layout for bet pairs\n- Status badges (Pending/Won/Lost/Returned)\n- Data tables with sorting capabilities\n- Progress indicators for OCR processing\n\n**Interactive Elements**:\n- Primary buttons for main actions (Process Image, Save Bet)\n- Secondary buttons for status changes\n- Dropdown selectors for account holders and betting houses\n- Date/time pickers for filtering\n\n**Overlays**:\n- Modal dialogs for account/house registration\n- Toast notifications for OCR results and save confirmations\n- Loading states during image processing\n\n### E. Key Interface Sections\n\n**Main Dashboard**:\n- Clean data table showing bet pairs\n- Filter panel with date ranges and status options\n- Summary cards showing total profit/loss\n- Quick action buttons for common tasks\n\n**Upload Interface**:\n- Prominent drop zone occupying most viewport\n- Live preview of uploaded images\n- OCR results display with editable extraction\n- Side-by-side comparison of extracted vs. corrected data\n\n**Test OCR Screen**:\n- Simple image upload area\n- Raw text extraction display\n- Structured data parsing results\n- Debug information for OCR accuracy\n\n**Settings/Management**:\n- Simple forms for account holder registration\n- Minimal required fields (name + betting house)\n- Optional fields clearly marked\n- Bulk actions for managing multiple accounts\n\n## Visual Hierarchy\n- Financial data (odds, stakes, profits) emphasized with medium font weight\n- Status indicators using color and typography\n- Clear separation between bet pairs using cards/borders\n- Consistent spacing for scanning efficiency\n\n## Data Presentation\n- Numerical values right-aligned in tables\n- Currency formatting with consistent decimal places\n- Clear profit/loss indicators with appropriate colors\n- Date/time stamps in consistent format\n\nThis design prioritizes data clarity, efficient workflows, and error prevention while maintaining visual appeal appropriate for a professional betting management tool.","path":null,"size_bytes":3595,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/components/examples/StatusBadge.tsx":{"content":"import { StatusBadge } from '../status-badge';\n\nexport default function StatusBadgeExample() {\n  return (\n    <div className=\"flex gap-4 p-4\">\n      <StatusBadge status=\"pending\" />\n      <StatusBadge status=\"won\" />\n      <StatusBadge status=\"lost\" />\n      <StatusBadge status=\"returned\" />\n    </div>\n  );\n}","path":null,"size_bytes":310,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":689,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/components/bet-card.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { StatusBadge } from \"./status-badge\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Calendar, TrendingUp, Users, Check, Edit, Trash2, RotateCcw, Loader2, ChevronDown } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\n// Função para formatar data sem conversão de timezone\nfunction formatEventDate(isoString: string): { date: string; time: string } {\n  // Extrai data/hora diretamente da string ISO: \"2025-10-03T11:00:00.000Z\" -> \"2025-10-03T11:00\"\n  const dateTimeLocal = isoString.substring(0, 16);\n  const [datePart, timePart] = dateTimeLocal.split('T');\n  const [year, month, day] = datePart.split('-');\n  \n  return {\n    date: `${day}/${month}/${year}`,\n    time: timePart\n  };\n}\n\ninterface BetData {\n  id: string;\n  house: string;\n  accountHolder: string;\n  betType: string;\n  odd: number;\n  stake: number;\n  potentialProfit: number;\n  actualProfit?: number | null;\n  result?: \"won\" | \"lost\" | \"returned\" | \"half_won\" | \"half_returned\";\n}\n\ninterface SurebetCardProps {\n  id: string;\n  eventDate: string;\n  sport: string;\n  league: string;\n  teamA: string;\n  teamB: string;\n  profitPercentage: number;\n  status: \"pending\" | \"resolved\";\n  isChecked: boolean;\n  bet1: BetData;\n  bet2: BetData;\n  bet3?: BetData; // Optional third bet\n  onResolve: (betId: string, result: \"won\" | \"lost\" | \"returned\" | \"half_won\" | \"half_returned\") => void;\n  onStatusChange?: (surebetSetId: string, isChecked: boolean) => void;\n  onReset?: (surebetSetId: string) => void;\n  onEdit?: (surebetSetId: string) => void;\n  onDelete?: (surebetSetId: string) => void;\n  isResetting?: boolean;\n  className?: string;\n}\n\nexport function BetCard({\n  id,\n  eventDate,\n  sport,\n  league,\n  teamA,\n  teamB,\n  profitPercentage,\n  status,\n  isChecked,\n  bet1,\n  bet2,\n  bet3,\n  onResolve,\n  onStatusChange,\n  onReset,\n  onEdit,\n  onDelete,\n  isResetting,\n  className,\n}: SurebetCardProps) {\n  const isResolved = status === \"resolved\";\n  const isPending = status === \"pending\";\n  const totalStake = bet1.stake + bet2.stake + (bet3?.stake || 0);\n  \n  // Use actualProfit from backend - don't calculate locally to avoid showing incorrect values\n  let actualProfit: number | null = null;\n  \n  if (bet1.actualProfit !== undefined && bet1.actualProfit !== null) {\n    // Use the value calculated by backend (all bets have same actualProfit)\n    actualProfit = parseFloat(String(bet1.actualProfit));\n  } else if (bet2.actualProfit !== undefined && bet2.actualProfit !== null) {\n    // Use the value calculated by backend (all bets have same actualProfit)\n    actualProfit = parseFloat(String(bet2.actualProfit));\n  } else if (bet3 && bet3.actualProfit !== undefined && bet3.actualProfit !== null) {\n    // For triple bets, check bet3 as well\n    actualProfit = parseFloat(String(bet3.actualProfit));\n  } else if (false && bet1.result && bet2.result) { // Disabled fallback to prevent incorrect temporary values\n    // Fallback: Calculate actual profit based on bet results (legacy logic)\n    if (bet1.result === \"won\" && bet2.result === \"lost\") {\n      // Win/Loss: (winning_stake × odd) - losing_stake - winning_stake\n      actualProfit = (bet1.stake * bet1.odd) - bet2.stake - bet1.stake;\n    } else if (bet2.result === \"won\" && bet1.result === \"lost\") {\n      // Win/Loss: (winning_stake × odd) - losing_stake - winning_stake\n      actualProfit = (bet2.stake * bet2.odd) - bet1.stake - bet2.stake;\n    } else if (bet1.result === \"won\" && bet2.result === \"returned\") {\n      // Win/Return: (winning_stake × odd) - winning_stake\n      actualProfit = (bet1.stake * bet1.odd) - bet1.stake;\n    } else if (bet2.result === \"won\" && bet1.result === \"returned\") {\n      // Win/Return: (winning_stake × odd) - winning_stake\n      actualProfit = (bet2.stake * bet2.odd) - bet2.stake;\n    } else if (bet1.result === \"lost\" && bet2.result === \"returned\") {\n      // Loss/Return: -lost_stake (returned stake doesn't count, just comes back)\n      actualProfit = -bet1.stake;\n    } else if (bet2.result === \"lost\" && bet1.result === \"returned\") {\n      // Loss/Return: -lost_stake (returned stake doesn't count, just comes back)\n      actualProfit = -bet2.stake;\n    } else if (bet1.result === \"won\" && bet2.result === \"won\") {\n      // Both won: (return1 + return2) - (stake1 + stake2)\n      actualProfit = (bet1.stake * bet1.odd + bet2.stake * bet2.odd) - (bet1.stake + bet2.stake);\n    } else if (bet1.result === \"lost\" && bet2.result === \"lost\") {\n      // Loss/Loss: negative value (lost both stakes)\n      actualProfit = -(bet1.stake + bet2.stake);\n    } else if (bet1.result === \"returned\" && bet2.result === \"returned\") {\n      // Both returned: no profit or loss\n      actualProfit = 0;\n    } else if (bet1.result === \"half_won\" && bet2.result === \"lost\") {\n      // Half Won + Lost: (half_stake × odd) - half_stake - lost_stake\n      actualProfit = ((bet1.stake / 2) * bet1.odd) - (bet1.stake / 2) - bet2.stake;\n    } else if (bet2.result === \"half_won\" && bet1.result === \"lost\") {\n      // Half Won + Lost: (half_stake × odd) - half_stake - lost_stake\n      actualProfit = ((bet2.stake / 2) * bet2.odd) - (bet2.stake / 2) - bet1.stake;\n    } else if (bet1.result === \"half_returned\" && bet2.result === \"lost\") {\n      // Half Returned + Lost: -lost_stake (half returned doesn't affect profit)\n      actualProfit = -bet2.stake;\n    } else if (bet2.result === \"half_returned\" && bet1.result === \"lost\") {\n      // Half Returned + Lost: -lost_stake (half returned doesn't affect profit)\n      actualProfit = -bet1.stake;\n    } else if (bet1.result === \"half_won\" && bet2.result === \"returned\") {\n      // Half Won + Returned: (half_stake × odd) - half_stake\n      actualProfit = ((bet1.stake / 2) * bet1.odd) - (bet1.stake / 2);\n    } else if (bet2.result === \"half_won\" && bet1.result === \"returned\") {\n      // Half Won + Returned: (half_stake × odd) - half_stake\n      actualProfit = ((bet2.stake / 2) * bet2.odd) - (bet2.stake / 2);\n    } else if (bet1.result === \"half_returned\" && bet2.result === \"returned\") {\n      // Both partial returns: no profit or loss\n      actualProfit = 0;\n    } else if (bet1.result === \"half_won\" && bet2.result === \"half_returned\") {\n      // Half Won + Half Returned: calculate returns for each bet then subtract total invested\n      const return1 = (bet1.stake / 2) * bet1.odd + (bet1.stake / 2); // Half won: (half × odd) + half returned\n      const return2 = bet2.stake / 2; // Half returned: only half returned\n      actualProfit = (return1 + return2) - (bet1.stake + bet2.stake);\n    } else if (bet2.result === \"half_won\" && bet1.result === \"half_returned\") {\n      // Half Won + Half Returned: calculate returns for each bet then subtract total invested\n      const return1 = bet1.stake / 2; // Half returned: only half returned\n      const return2 = (bet2.stake / 2) * bet2.odd + (bet2.stake / 2); // Half won: (half × odd) + half returned\n      actualProfit = (return1 + return2) - (bet1.stake + bet2.stake);\n    } else if (bet1.result === \"won\" && bet2.result === \"half_returned\") {\n      // Won + Half Returned: (winning_stake × odd) - winning_stake\n      actualProfit = (bet1.stake * bet1.odd) - bet1.stake;\n    } else if (bet2.result === \"won\" && bet1.result === \"half_returned\") {\n      // Won + Half Returned: (winning_stake × odd) - winning_stake\n      actualProfit = (bet2.stake * bet2.odd) - bet2.stake;\n    } else if (bet1.result === \"half_won\" && bet2.result === \"half_won\") {\n      // Both Half Won: sum of half profits\n      actualProfit = ((bet1.stake / 2) * bet1.odd) - (bet1.stake / 2) + ((bet2.stake / 2) * bet2.odd) - (bet2.stake / 2);\n    }\n  }\n\n  return (\n    <Card className={cn(\"hover-elevate\", status === \"resolved\" && \"bg-[#e6f7ed] dark:bg-[#344038]\", className)} data-testid={`card-surebet-${id}`}>\n      <CardHeader className=\"pb-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <CardTitle className=\"text-lg font-semibold\">\n              {teamA} vs {teamB}\n            </CardTitle>\n            {onEdit && (\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => onEdit(id)}\n                data-testid={`button-edit-${id}`}\n              >\n                <Edit className=\"w-3 h-3\" />\n              </Button>\n            )}\n            {onReset && (bet1.result || bet2.result || bet3?.result) && (\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => onReset(id)}\n                disabled={isResetting}\n                data-testid={`button-reset-${id}`}\n              >\n                {isResetting ? (\n                  <Loader2 className=\"w-3 h-3 animate-spin\" />\n                ) : (\n                  <RotateCcw className=\"w-3 h-3\" />\n                )}\n              </Button>\n            )}\n            {onDelete && (\n              <Button\n                size=\"sm\"\n                variant=\"destructive\"\n                onClick={() => onDelete(id)}\n                data-testid={`button-delete-${id}`}\n              >\n                <Trash2 className=\"w-3 h-3\" />\n              </Button>\n            )}\n          </div>\n          <div className=\"flex items-center gap-2\">\n            {!isChecked && onStatusChange && !isResolved && (\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => onStatusChange(id, true)}\n                className=\"bg-background\"\n                data-testid={`button-mark-checked-${id}`}\n              >\n                Conferido\n              </Button>\n            )}\n            {isChecked && onStatusChange && !isResolved && (\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                className=\"bg-background\"\n                onClick={() => onStatusChange(id, false)}\n                data-testid={`button-uncheck-${id}`}\n              >\n                <Check className=\"w-3 h-3 mr-1\" />\n                Conferido\n              </Button>\n            )}\n            {isResolved && (\n              <Badge className=\"bg-green-600 text-white\">\n                Resolvido\n              </Badge>\n            )}\n            {isPending && !isResolved && <StatusBadge status=\"pending\" />}\n            <Badge variant=\"outline\" className=\"bg-primary text-primary-foreground\">\n              <TrendingUp className=\"w-3 h-3 mr-1\" />\n              {profitPercentage}%\n            </Badge>\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\n          <div className=\"flex items-center gap-1\">\n            <Calendar className=\"w-4 h-4\" />\n            <span>{formatEventDate(eventDate).date} às {formatEventDate(eventDate).time}</span>\n          </div>\n          <span>{sport} • {league}</span>\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"space-y-4\">\n        {/* Bet 1 */}\n        <div className=\"p-4 rounded-lg border bg-card/50\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"flex items-center gap-2\">\n              <Badge variant=\"outline\">{bet1.house}</Badge>\n              <span className=\"text-sm text-muted-foreground\">\n                <Users className=\"w-3 h-3 inline mr-1\" />\n                {bet1.accountHolder}\n              </span>\n            </div>\n            {bet1.result && <StatusBadge status={bet1.result} />}\n          </div>\n\n          <div className=\"grid grid-cols-5 gap-2 text-sm\">\n            <div>\n              <span className=\"text-muted-foreground\">Tipo</span>\n              <p className=\"font-medium\">{bet1.betType}</p>\n            </div>\n            <div>\n              <span className=\"text-muted-foreground\">Odd</span>\n              <p className=\"font-medium\">{bet1.odd}</p>\n            </div>\n            <div>\n              <span className=\"text-muted-foreground\">Stake</span>\n              <p className=\"font-medium\">R$ {bet1.stake.toFixed(2)}</p>\n            </div>\n            <div>\n              <span className=\"text-muted-foreground\">Retorno</span>\n              <p className=\"font-medium\">R$ {(bet1.odd * bet1.stake).toFixed(2)}</p>\n            </div>\n            <div>\n              <span className=\"text-muted-foreground\">Lucro Pot.</span>\n              <p className=\"font-medium text-betting-profit\">R$ {bet1.potentialProfit.toFixed(2)}</p>\n            </div>\n          </div>\n\n          {!bet1.result && (\n            <div className=\"flex gap-2 mt-3\">\n              <Button\n                size=\"sm\"\n                onClick={() => onResolve(bet1.id, \"won\")}\n                className=\"bg-betting-win hover:bg-betting-win/80\"\n                data-testid={`button-resolve-won-${bet1.id}`}\n              >\n                Ganhou\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"destructive\"\n                onClick={() => onResolve(bet1.id, \"lost\")}\n                data-testid={`button-resolve-lost-${bet1.id}`}\n              >\n                Perdeu\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => onResolve(bet1.id, \"returned\")}\n                data-testid={`button-resolve-returned-${bet1.id}`}\n              >\n                Devolvido\n              </Button>\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button\n                    size=\"sm\"\n                    className=\"bg-sky-400 hover:bg-sky-500 text-white\"\n                    data-testid={`button-half-green-${bet1.id}`}\n                  >\n                    Meio Green\n                    <ChevronDown className=\"w-3 h-3 ml-1\" />\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent>\n                  <DropdownMenuItem\n                    onClick={() => onResolve(bet1.id, \"half_won\")}\n                    data-testid={`button-half-won-${bet1.id}`}\n                  >\n                    Ganho\n                  </DropdownMenuItem>\n                  <DropdownMenuItem\n                    onClick={() => onResolve(bet1.id, \"half_returned\")}\n                    data-testid={`button-half-returned-${bet1.id}`}\n                  >\n                    Devolvido\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            </div>\n          )}\n        </div>\n\n        {/* Bet 2 */}\n        <div className=\"p-4 rounded-lg border bg-card/50\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"flex items-center gap-2\">\n              <Badge variant=\"outline\">{bet2.house}</Badge>\n              <span className=\"text-sm text-muted-foreground\">\n                <Users className=\"w-3 h-3 inline mr-1\" />\n                {bet2.accountHolder}\n              </span>\n            </div>\n            {bet2.result && <StatusBadge status={bet2.result} />}\n          </div>\n\n          <div className=\"grid grid-cols-5 gap-2 text-sm\">\n            <div>\n              <span className=\"text-muted-foreground\">Tipo</span>\n              <p className=\"font-medium\">{bet2.betType}</p>\n            </div>\n            <div>\n              <span className=\"text-muted-foreground\">Odd</span>\n              <p className=\"font-medium\">{bet2.odd}</p>\n            </div>\n            <div>\n              <span className=\"text-muted-foreground\">Stake</span>\n              <p className=\"font-medium\">R$ {bet2.stake.toFixed(2)}</p>\n            </div>\n            <div>\n              <span className=\"text-muted-foreground\">Retorno</span>\n              <p className=\"font-medium\">R$ {(bet2.odd * bet2.stake).toFixed(2)}</p>\n            </div>\n            <div>\n              <span className=\"text-muted-foreground\">Lucro Pot.</span>\n              <p className=\"font-medium text-betting-profit\">R$ {bet2.potentialProfit.toFixed(2)}</p>\n            </div>\n          </div>\n\n          {!bet2.result && (\n            <div className=\"flex gap-2 mt-3\">\n              <Button\n                size=\"sm\"\n                onClick={() => onResolve(bet2.id, \"won\")}\n                className=\"bg-betting-win hover:bg-betting-win/80\"\n                data-testid={`button-resolve-won-${bet2.id}`}\n              >\n                Ganhou\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"destructive\"\n                onClick={() => onResolve(bet2.id, \"lost\")}\n                data-testid={`button-resolve-lost-${bet2.id}`}\n              >\n                Perdeu\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => onResolve(bet2.id, \"returned\")}\n                data-testid={`button-resolve-returned-${bet2.id}`}\n              >\n                Devolvido\n              </Button>\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button\n                    size=\"sm\"\n                    className=\"bg-sky-400 hover:bg-sky-500 text-white\"\n                    data-testid={`button-half-green-${bet2.id}`}\n                  >\n                    Meio Green\n                    <ChevronDown className=\"w-3 h-3 ml-1\" />\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent>\n                  <DropdownMenuItem\n                    onClick={() => onResolve(bet2.id, \"half_won\")}\n                    data-testid={`button-half-won-${bet2.id}`}\n                  >\n                    Ganho\n                  </DropdownMenuItem>\n                  <DropdownMenuItem\n                    onClick={() => onResolve(bet2.id, \"half_returned\")}\n                    data-testid={`button-half-returned-${bet2.id}`}\n                  >\n                    Devolvido\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            </div>\n          )}\n        </div>\n\n        {/* Bet 3 (if exists) */}\n        {bet3 && (\n          <div className=\"p-4 rounded-lg border bg-card/50\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <div className=\"flex items-center gap-2\">\n                <Badge variant=\"outline\">{bet3.house}</Badge>\n                <span className=\"text-sm text-muted-foreground\">\n                  <Users className=\"w-3 h-3 inline mr-1\" />\n                  {bet3.accountHolder}\n                </span>\n              </div>\n              {bet3.result && <StatusBadge status={bet3.result} />}\n            </div>\n\n            <div className=\"grid grid-cols-5 gap-2 text-sm\">\n              <div>\n                <span className=\"text-muted-foreground\">Tipo</span>\n                <p className=\"font-medium\">{bet3.betType}</p>\n              </div>\n              <div>\n                <span className=\"text-muted-foreground\">Odd</span>\n                <p className=\"font-medium\">{bet3.odd}</p>\n              </div>\n              <div>\n                <span className=\"text-muted-foreground\">Stake</span>\n                <p className=\"font-medium\">R$ {bet3.stake.toFixed(2)}</p>\n              </div>\n              <div>\n                <span className=\"text-muted-foreground\">Retorno</span>\n                <p className=\"font-medium\">R$ {(bet3.odd * bet3.stake).toFixed(2)}</p>\n              </div>\n              <div>\n                <span className=\"text-muted-foreground\">Lucro Pot.</span>\n                <p className=\"font-medium text-betting-profit\">R$ {bet3.potentialProfit.toFixed(2)}</p>\n              </div>\n            </div>\n\n            {!bet3.result && (\n              <div className=\"flex gap-2 mt-3\">\n                <Button\n                  size=\"sm\"\n                  onClick={() => onResolve(bet3.id, \"won\")}\n                  className=\"bg-betting-win hover:bg-betting-win/80\"\n                  data-testid={`button-resolve-won-${bet3.id}`}\n                >\n                  Ganhou\n                </Button>\n                <Button\n                  size=\"sm\"\n                  variant=\"destructive\"\n                  onClick={() => onResolve(bet3.id, \"lost\")}\n                  data-testid={`button-resolve-lost-${bet3.id}`}\n                >\n                  Perdeu\n                </Button>\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  onClick={() => onResolve(bet3.id, \"returned\")}\n                  data-testid={`button-resolve-returned-${bet3.id}`}\n                >\n                  Devolvido\n                </Button>\n                <DropdownMenu>\n                  <DropdownMenuTrigger asChild>\n                    <Button\n                      size=\"sm\"\n                      className=\"bg-sky-400 hover:bg-sky-500 text-white\"\n                      data-testid={`button-half-green-${bet3.id}`}\n                    >\n                      Meio Green\n                      <ChevronDown className=\"w-3 h-3 ml-1\" />\n                    </Button>\n                  </DropdownMenuTrigger>\n                  <DropdownMenuContent>\n                    <DropdownMenuItem\n                      onClick={() => onResolve(bet3.id, \"half_won\")}\n                      data-testid={`button-half-won-${bet3.id}`}\n                    >\n                      Ganho\n                    </DropdownMenuItem>\n                    <DropdownMenuItem\n                      onClick={() => onResolve(bet3.id, \"half_returned\")}\n                      data-testid={`button-half-returned-${bet3.id}`}\n                    >\n                      Devolvido\n                    </DropdownMenuItem>\n                  </DropdownMenuContent>\n                </DropdownMenu>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Summary */}\n        <div className=\"flex items-center justify-between pt-2 border-t\">\n          <div className=\"text-sm\">\n            <span className=\"text-muted-foreground\">Total Investido: </span>\n            <span className=\"font-medium\">R$ {totalStake.toFixed(2)}</span>\n          </div>\n\n          {(bet1.result && bet2.result && (!bet3 || bet3.result) && actualProfit !== null) && (\n            <div className=\"text-sm\">\n              <span className=\"text-muted-foreground\">Lucro Real: </span>\n              <span className={cn(\n                \"font-medium\",\n                actualProfit > 0 ? \"text-betting-profit\" : \"text-betting-loss\"\n              )}>\n                R$ {actualProfit.toFixed(2)}\n              </span>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","path":null,"size_bytes":22904,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2154,"size_tokens":null},"client/src/components/ui/date-range-picker.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { CalendarIcon } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\n\ninterface DatePickerWithRangeProps {\n  selected?: DateRange;\n  onSelect?: (range: DateRange | undefined) => void;\n  placeholder?: string;\n  className?: string;\n  \"data-testid\"?: string;\n}\n\nexport function DatePickerWithRange({\n  selected,\n  onSelect,\n  placeholder = \"Selecionar data\",\n  className,\n  \"data-testid\": testId,\n}: DatePickerWithRangeProps) {\n  const [date, setDate] = useState<DateRange | undefined>(selected);\n\n  useEffect(() => {\n    setDate(selected);\n  }, [selected]);\n\n  const handleSelect = (range: DateRange | undefined) => {\n    setDate(range);\n    onSelect?.(range);\n  };\n\n  return (\n    <div className={cn(\"grid gap-2\", className)}>\n      <Popover>\n        <PopoverTrigger asChild>\n          <Button\n            id=\"date\"\n            variant=\"outline\"\n            className={cn(\n              \"w-full justify-start text-left font-normal\",\n              !date && \"text-muted-foreground\"\n            )}\n            data-testid={testId}\n          >\n            <CalendarIcon className=\"mr-2 h-4 w-4\" />\n            {date?.from ? (\n              date.to ? (\n                <>\n                  {format(date.from, \"dd/MM/yyyy\", { locale: ptBR })} -{\" \"}\n                  {format(date.to, \"dd/MM/yyyy\", { locale: ptBR })}\n                </>\n              ) : (\n                format(date.from, \"dd/MM/yyyy\", { locale: ptBR })\n              )\n            ) : (\n              <span>{placeholder}</span>\n            )}\n          </Button>\n        </PopoverTrigger>\n        <PopoverContent className=\"w-auto p-0\" align=\"start\">\n          <Calendar\n            initialFocus\n            mode=\"range\"\n            defaultMonth={date?.from}\n            selected={date}\n            onSelect={handleSelect}\n            numberOfMonths={2}\n            locale={ptBR}\n          />\n        </PopoverContent>\n      </Popover>\n    </div>\n  );\n}","path":null,"size_bytes":2278,"size_tokens":null},"client/src/pages/admin-migration.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { ArrowLeft, Database, Download, Loader2, FileText, CheckCircle } from \"lucide-react\";\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\n\ninterface TableStats {\n  name: string;\n  count: number;\n}\n\ninterface MigrationStats {\n  tables: TableStats[];\n  totalRecords: number;\n}\n\nexport default function AdminMigration() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  \n  const [isLoadingStats, setIsLoadingStats] = useState(true);\n  const [stats, setStats] = useState<MigrationStats | null>(null);\n  const [isExporting, setIsExporting] = useState(false);\n  const [exported, setExported] = useState(false);\n\n  useEffect(() => {\n    loadStats();\n  }, []);\n\n  const loadStats = async () => {\n    try {\n      const response = await fetch(\"/api/admin/migration/stats\", {\n        credentials: \"include\"\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setStats(data);\n      }\n    } catch (error) {\n      console.error(\"Error loading stats:\", error);\n    } finally {\n      setIsLoadingStats(false);\n    }\n  };\n\n  const downloadSQL = async () => {\n    setIsExporting(true);\n    \n    try {\n      const response = await fetch(\"/api/admin/migration/export-sql\", {\n        credentials: \"include\"\n      });\n      \n      if (!response.ok) {\n        throw new Error(\"Export failed\");\n      }\n      \n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'supabase_migration.sql';\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n      \n      setExported(true);\n      toast({\n        title: \"Exportado com sucesso!\",\n        description: \"O arquivo SQL foi baixado. Siga as instrucoes abaixo para importar no Supabase.\"\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"Nao foi possivel exportar os dados\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background p-4 md:p-8\">\n      <div className=\"max-w-2xl mx-auto space-y-6\">\n        <Button \n          variant=\"ghost\" \n          onClick={() => setLocation(\"/\")}\n          className=\"mb-4\"\n          data-testid=\"button-back\"\n        >\n          <ArrowLeft className=\"h-4 w-4 mr-2\" />\n          Voltar\n        </Button>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Database className=\"h-5 w-5\" />\n              Migracao para Supabase\n            </CardTitle>\n            <CardDescription>\n              Exporte todos os dados do banco atual para importar no Supabase\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {isLoadingStats ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <Loader2 className=\"h-6 w-6 animate-spin\" />\n              </div>\n            ) : stats && (\n              <>\n                <div className=\"space-y-3\">\n                  <h3 className=\"font-semibold\">Dados a serem exportados:</h3>\n                  <div className=\"grid gap-2\">\n                    {stats.tables.map((table) => (\n                      <div \n                        key={table.name}\n                        className=\"flex items-center justify-between p-3 bg-muted rounded-lg\"\n                      >\n                        <span className=\"font-mono text-sm\">{table.name}</span>\n                        <span className=\"text-sm text-muted-foreground\">\n                          {table.count} registros\n                        </span>\n                      </div>\n                    ))}\n                  </div>\n                  <div className=\"p-4 bg-primary/10 rounded-lg\">\n                    <p className=\"font-semibold\">\n                      Total: {stats.totalRecords} registros\n                    </p>\n                  </div>\n                </div>\n\n                <Button\n                  onClick={downloadSQL}\n                  disabled={isExporting}\n                  size=\"lg\"\n                  className=\"w-full\"\n                  data-testid=\"button-export-sql\"\n                >\n                  {isExporting ? (\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  ) : exported ? (\n                    <CheckCircle className=\"h-4 w-4 mr-2\" />\n                  ) : (\n                    <Download className=\"h-4 w-4 mr-2\" />\n                  )}\n                  {isExporting ? \"Exportando...\" : exported ? \"Baixar Novamente\" : \"Baixar Arquivo SQL\"}\n                </Button>\n\n                {exported && (\n                  <Alert className=\"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800\">\n                    <FileText className=\"h-4 w-4 text-blue-600\" />\n                    <AlertTitle>Como importar no Supabase</AlertTitle>\n                    <AlertDescription className=\"space-y-3 mt-2\">\n                      <p><strong>Opcao 1 - SQL Editor (Recomendado):</strong></p>\n                      <ol className=\"list-decimal list-inside space-y-1 text-sm\">\n                        <li>Acesse seu projeto no Supabase</li>\n                        <li>Va em <strong>SQL Editor</strong> no menu lateral</li>\n                        <li>Clique em <strong>New query</strong></li>\n                        <li>Cole o conteudo do arquivo SQL</li>\n                        <li>Clique em <strong>Run</strong></li>\n                      </ol>\n                      \n                      <p className=\"pt-2\"><strong>Opcao 2 - Via Terminal (psql):</strong></p>\n                      <code className=\"block p-2 bg-muted rounded text-xs break-all\">\n                        psql \"sua_url_supabase\" -f supabase_migration.sql\n                      </code>\n                      \n                      <p className=\"pt-3 text-sm\">\n                        <strong>Depois de importar:</strong> Me avise para atualizar a conexao do sistema para usar o Supabase!\n                      </p>\n                    </AlertDescription>\n                  </Alert>\n                )}\n              </>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":6670,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5741,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3021,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4120,"size_tokens":null},"client/src/pages/batch-upload.tsx":{"content":"import { useState, useMemo } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Upload, FileText, CheckCircle, XCircle, Loader2, Package, AlertTriangle, Plus } from \"lucide-react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport type { BettingHouse, AccountHolder } from \"@shared/schema\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useLocation } from \"wouter\";\n\ninterface ExtractedBet {\n  fileName: string;\n  success: boolean;\n  error?: string;\n  data?: {\n    date: string;\n    sport: string;\n    league: string;\n    teamA: string;\n    teamB: string;\n    bet1: {\n      house: string;\n      odd: number;\n      type: string;\n      stake: number;\n      profit: number;\n    };\n    bet2: {\n      house: string;\n      odd: number;\n      type: string;\n      stake: number;\n      profit: number;\n    };\n    bet3?: {\n      house: string;\n      odd: number;\n      type: string;\n      stake: number;\n      profit: number;\n    };\n    profitPercentage: number;\n  };\n}\n\ninterface EditableBetData {\n  date: string;\n  sport: string;\n  league: string;\n  teamA: string;\n  teamB: string;\n  profitPercentage: string;\n  bet1House: string;\n  bet1HouseId: string;\n  bet1Type: string;\n  bet1Odd: string;\n  bet1Stake: string;\n  bet1Profit: string;\n  bet2House: string;\n  bet2HouseId: string;\n  bet2Type: string;\n  bet2Odd: string;\n  bet2Stake: string;\n  bet2Profit: string;\n  bet3House?: string;\n  bet3HouseId?: string;\n  bet3Type?: string;\n  bet3Odd?: string;\n  bet3Stake?: string;\n  bet3Profit?: string;\n}\n\n// Helper function to wrap apiRequest with proper error handling and JSON parsing\nasync function createResource<T>(\n  endpoint: string,\n  payload: unknown,\n  resourceLabel: string\n): Promise<T> {\n  try {\n    const response = await apiRequest(\"POST\", endpoint, payload);\n    return await response.json();\n  } catch (error) {\n    // apiRequest already throws enriched errors with backend messages\n    const errorMsg = error instanceof Error ? error.message : \"Erro desconhecido\";\n    throw new Error(`Falha ao criar ${resourceLabel}: ${errorMsg}`);\n  }\n}\n\nexport default function BatchUpload() {\n  const [files, setFiles] = useState<File[]>([]);\n  const [extractedBets, setExtractedBets] = useState<ExtractedBet[]>([]);\n  const [editableData, setEditableData] = useState<Record<number, EditableBetData>>({});\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [isCreating, setIsCreating] = useState(false);\n  const [isCreatingHouse, setIsCreatingHouse] = useState(false);\n  const { toast} = useToast();\n  const [, navigate] = useLocation();\n\n  const { data: holders = [], isLoading: holdersLoading } = useQuery<AccountHolder[]>({\n    queryKey: [\"/api/account-holders\"],\n  });\n\n  const { data: allHouses = [], isLoading: housesLoading } = useQuery<BettingHouse[]>({\n    queryKey: ['/api/betting-houses'],\n  });\n\n  const isDataLoading = holdersLoading || housesLoading;\n\n  // Create combined options for dropdowns: \"Titular - Casa\"\n  const houseOptions = allHouses\n    .map(house => {\n      const holder = holders.find(h => h.id === house.accountHolderId);\n      return {\n        id: house.id,\n        name: house.name,\n        holderName: holder?.name || \"Titular não encontrado\",\n        displayLabel: `${holder?.name || \"Titular não encontrado\"} - ${house.name}`,\n      };\n    })\n    .sort((a, b) => {\n      const holderCompare = a.holderName.localeCompare(b.holderName);\n      if (holderCompare !== 0) return holderCompare;\n      return a.name.localeCompare(b.name);\n    });\n\n  // Derive unmatched betting houses from editable data (supports bet3)\n  const unmatchedHouses = useMemo(() => {\n    const unmatched: string[] = [];\n    const seen = new Set<string>();\n    \n    Object.values(editableData).forEach((data) => {\n      // Check bet1: has house name but no house ID\n      if (data.bet1House && !data.bet1HouseId) {\n        const normalized = data.bet1House.trim().toLowerCase();\n        if (!seen.has(normalized)) {\n          seen.add(normalized);\n          unmatched.push(data.bet1House); // Keep original casing for display\n        }\n      }\n      // Check bet2: has house name but no house ID\n      if (data.bet2House && !data.bet2HouseId) {\n        const normalized = data.bet2House.trim().toLowerCase();\n        if (!seen.has(normalized)) {\n          seen.add(normalized);\n          unmatched.push(data.bet2House); // Keep original casing for display\n        }\n      }\n      // Check bet3: has house name but no house ID (triple bets)\n      if (data.bet3House && !data.bet3HouseId) {\n        const normalized = data.bet3House.trim().toLowerCase();\n        if (!seen.has(normalized)) {\n          seen.add(normalized);\n          unmatched.push(data.bet3House); // Keep original casing for display\n        }\n      }\n    });\n    return unmatched;\n  }, [editableData]);\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) {\n      const selectedFiles = Array.from(e.target.files);\n      const pdfFiles = selectedFiles.filter(file => file.type === 'application/pdf');\n      \n      if (pdfFiles.length !== selectedFiles.length) {\n        toast({\n          title: \"Alguns arquivos foram ignorados\",\n          description: \"Apenas arquivos PDF são aceitos\",\n          variant: \"destructive\",\n        });\n      }\n      \n      setFiles(pdfFiles);\n      setExtractedBets([]);\n      setEditableData({});\n    }\n  };\n\n  const findBettingHouse = (houseName: string) => {\n    if (!allHouses) return null;\n    \n    const cleanName = houseName.replace(/\\s*\\([A-Z]{2}\\)\\s*/, '').trim().toLowerCase();\n    \n    return allHouses.find(house => {\n      const houseNameClean = house.name.toLowerCase();\n      return houseNameClean.includes(cleanName) || cleanName.includes(houseNameClean);\n    });\n  };\n\n  const processAllPdfs = async () => {\n    if (files.length === 0) {\n      toast({\n        title: \"Nenhum arquivo selecionado\",\n        description: \"Por favor, selecione arquivos PDF primeiro\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsProcessing(true);\n    setExtractedBets([]);\n    setEditableData({});\n\n    try {\n      const formData = new FormData();\n      files.forEach((file) => {\n        formData.append('files', file);\n      });\n\n      const response = await fetch('/api/ocr/process-batch', {\n        method: 'POST',\n        body: formData,\n      });\n\n      const result = await response.json();\n\n      if (response.ok && result.success) {\n        setExtractedBets(result.results);\n        \n        // Initialize editable data for successful extractions (supports bet3)\n        const initialEditableData: Record<number, EditableBetData> = {};\n        result.results.forEach((bet: ExtractedBet, index: number) => {\n          if (bet.success && bet.data) {\n            const house1 = findBettingHouse(bet.data.bet1.house);\n            const house2 = findBettingHouse(bet.data.bet2.house);\n            const house3 = bet.data.bet3 ? findBettingHouse(bet.data.bet3.house) : null;\n            \n            initialEditableData[index] = {\n              date: bet.data.date,\n              sport: bet.data.sport,\n              league: bet.data.league,\n              teamA: bet.data.teamA,\n              teamB: bet.data.teamB,\n              profitPercentage: bet.data.profitPercentage.toString(),\n              bet1House: bet.data.bet1.house,\n              bet1HouseId: house1?.id || '',\n              bet1Type: bet.data.bet1.type,\n              bet1Odd: bet.data.bet1.odd.toString(),\n              bet1Stake: bet.data.bet1.stake.toString(),\n              bet1Profit: bet.data.bet1.profit.toString(),\n              bet2House: bet.data.bet2.house,\n              bet2HouseId: house2?.id || '',\n              bet2Type: bet.data.bet2.type,\n              bet2Odd: bet.data.bet2.odd.toString(),\n              bet2Stake: bet.data.bet2.stake.toString(),\n              bet2Profit: bet.data.bet2.profit.toString(),\n            };\n            \n            // Add bet3 if it exists (triple bets)\n            if (bet.data.bet3) {\n              initialEditableData[index].bet3House = bet.data.bet3.house;\n              initialEditableData[index].bet3HouseId = house3?.id || '';\n              initialEditableData[index].bet3Type = bet.data.bet3.type;\n              initialEditableData[index].bet3Odd = bet.data.bet3.odd.toString();\n              initialEditableData[index].bet3Stake = bet.data.bet3.stake.toString();\n              initialEditableData[index].bet3Profit = bet.data.bet3.profit.toString();\n            }\n          }\n        });\n        setEditableData(initialEditableData);\n        \n        const successCount = result.results.filter((r: ExtractedBet) => r.success).length;\n        const failCount = result.results.length - successCount;\n        \n        toast({\n          title: \"Processamento concluído\",\n          description: `${successCount} PDFs processados com sucesso${failCount > 0 ? `, ${failCount} com erro` : ''}`,\n        });\n      } else {\n        toast({\n          title: \"Erro no processamento\",\n          description: result.error || \"Erro ao processar PDFs\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"Erro de conexão\",\n        description: \"Falha ao processar PDFs. Tente novamente.\",\n        variant: \"destructive\",\n      });\n      console.error('Batch processing error:', error);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const formatDateForInput = (isoDate: string): string => {\n    if (!isoDate) return '';\n    try {\n      return isoDate.substring(0, 16);\n    } catch {\n      return '';\n    }\n  };\n\n  const updateEditableField = (index: number, field: keyof EditableBetData, value: string) => {\n    setEditableData(prev => ({\n      ...prev,\n      [index]: {\n        ...prev[index],\n        [field]: value\n      }\n    }));\n  };\n\n  const handleQuickCreateHouses = async () => {\n    setIsCreatingHouse(true);\n    \n    try {\n      // 1. Ensure we have an account holder\n      let holderId = \"\";\n      \n      if (holders.length === 0) {\n        // Create a default account holder using helper\n        const newHolder = await createResource<AccountHolder>(\n          '/api/account-holders',\n          { name: \"Titular Padrão\" },\n          \"titular padrão\"\n        );\n        holderId = newHolder.id;\n        \n        // Invalidate AND refetch to ensure dropdowns update\n        await queryClient.invalidateQueries({ queryKey: ['/api/account-holders'] });\n        await queryClient.refetchQueries({ queryKey: ['/api/account-holders'] });\n      } else {\n        // Use the first available holder\n        holderId = holders[0].id;\n      }\n      \n      // 2. Create all unmatched houses one by one\n      const createdHouses: { originalName: string; normalizedName: string; id: string }[] = [];\n      const errors: string[] = [];\n      \n      for (const houseName of unmatchedHouses) {\n        try {\n          const newHouse = await createResource<BettingHouse>(\n            '/api/betting-houses',\n            {\n              name: houseName,\n              accountHolderId: holderId,\n            },\n            `casa \"${houseName}\"`\n          );\n          \n          createdHouses.push({\n            originalName: houseName,\n            normalizedName: houseName.trim().toLowerCase(),\n            id: newHouse.id\n          });\n        } catch (error) {\n          // Preserve backend error message\n          const errorMsg = error instanceof Error ? error.message : 'Erro desconhecido';\n          errors.push(`${houseName}: ${errorMsg}`);\n        }\n      }\n      \n      // If ALL houses failed to create, throw error\n      if (errors.length > 0 && createdHouses.length === 0) {\n        throw new Error(`Nenhuma casa foi criada. Erros:\\n${errors.join('\\n')}`);\n      }\n      \n      // 3. Update editableData ONLY for successfully created houses\n      if (createdHouses.length > 0) {\n        setEditableData(prev => {\n          const updated = { ...prev };\n          Object.keys(updated).forEach(key => {\n            const k = parseInt(key);\n            \n            createdHouses.forEach(({ normalizedName, id }) => {\n              // Normalize bet house names for comparison\n              const bet1Normalized = updated[k].bet1House?.trim().toLowerCase();\n              const bet2Normalized = updated[k].bet2House?.trim().toLowerCase();\n              \n              if (bet1Normalized === normalizedName) {\n                updated[k].bet1HouseId = id;\n              }\n              if (bet2Normalized === normalizedName) {\n                updated[k].bet2HouseId = id;\n              }\n            });\n          });\n          return updated;\n        });\n        \n        // 4. Invalidate queries to refresh dropdowns\n        await queryClient.invalidateQueries({ queryKey: ['/api/betting-houses'] });\n      }\n      \n      // Show success/partial success message with backend error details\n      if (errors.length > 0) {\n        const failedHouses = errors.map(e => e.split(':')[0]).join(', ');\n        toast({\n          title: \"Casas criadas parcialmente\",\n          description: `${createdHouses.length} casa(s) criadas com sucesso. ${errors.length} falharam: ${failedHouses}. Veja o console para mais detalhes.`,\n          variant: \"default\",\n        });\n        console.error('Erros detalhados ao criar casas:', errors);\n      } else {\n        toast({\n          title: \"Casas criadas com sucesso!\",\n          description: `${createdHouses.length} casa(s) de apostas foram criadas. Agora você pode adicionar as apostas ao sistema.`,\n        });\n      }\n      \n    } catch (error) {\n      // Display backend error message to user\n      const errorMsg = error instanceof Error ? error.message : \"Erro desconhecido\";\n      toast({\n        title: \"Erro ao criar casas\",\n        description: errorMsg,\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsCreatingHouse(false);\n    }\n  };\n\n  const createAllBets = async () => {\n    const successfulBets = extractedBets\n      .map((bet, index) => ({ bet, index }))\n      .filter(({ bet }) => bet.success && bet.data);\n    \n    if (successfulBets.length === 0) {\n      toast({\n        title: \"Nenhuma aposta para criar\",\n        description: \"Não há apostas extraídas com sucesso\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsCreating(true);\n\n    try {\n      let created = 0;\n      let failed = 0;\n      const errors: string[] = [];\n\n      for (const { bet, index } of successfulBets) {\n        try {\n          const data = editableData[index];\n          \n          if (!data) {\n            errors.push(`${bet.fileName}: Dados editáveis não encontrados`);\n            failed++;\n            continue;\n          }\n\n          // Check if bet3 exists (triple bet detection)\n          const hasBet3 = !!(data.bet3House || data.bet3Type || data.bet3Odd);\n          \n          // Validação completa de campos obrigatórios\n          const missingFields: string[] = [];\n          \n          if (!data.date) missingFields.push(\"Data/Hora\");\n          if (!data.sport?.trim()) missingFields.push(\"Esporte\");\n          if (!data.league?.trim()) missingFields.push(\"Liga\");\n          if (!data.teamA?.trim()) missingFields.push(\"Time A\");\n          if (!data.teamB?.trim()) missingFields.push(\"Time B\");\n          if (!data.profitPercentage) missingFields.push(\"Lucro %\");\n          \n          if (!data.bet1HouseId) missingFields.push(\"Titular Aposta 1\");\n          if (!data.bet1Type?.trim()) missingFields.push(\"Tipo Aposta 1\");\n          if (!data.bet2HouseId) missingFields.push(\"Titular Aposta 2\");\n          if (!data.bet2Type?.trim()) missingFields.push(\"Tipo Aposta 2\");\n          \n          if (hasBet3) {\n            if (!data.bet3HouseId) missingFields.push(\"Titular Aposta 3\");\n            if (!data.bet3Type?.trim()) missingFields.push(\"Tipo Aposta 3\");\n          }\n          \n          if (missingFields.length > 0) {\n            errors.push(`${bet.fileName}: Preencha todos os campos obrigatórios: ${missingFields.join(\", \")}`);\n            failed++;\n            continue;\n          }\n\n          const surebetSetData = {\n            eventDate: data.date || null,\n            sport: data.sport,\n            league: data.league,\n            teamA: data.teamA,\n            teamB: data.teamB,\n            profitPercentage: data.profitPercentage.toString(),\n            status: \"pending\",\n          };\n\n          const bet1Data = {\n            betType: data.bet1Type,\n            odd: data.bet1Odd.toString(),\n            stake: data.bet1Stake.toString(),\n            potentialProfit: data.bet1Profit.toString(),\n            bettingHouseId: data.bet1HouseId,\n          };\n\n          const bet2Data = {\n            betType: data.bet2Type,\n            odd: data.bet2Odd.toString(),\n            stake: data.bet2Stake.toString(),\n            potentialProfit: data.bet2Profit.toString(),\n            bettingHouseId: data.bet2HouseId,\n          };\n\n          const betsArray = [bet1Data, bet2Data];\n\n          // Add bet3 if it exists (triple bets)\n          if (hasBet3) {\n            const bet3Data = {\n              betType: data.bet3Type!,\n              odd: data.bet3Odd!.toString(),\n              stake: data.bet3Stake!.toString(),\n              potentialProfit: data.bet3Profit!.toString(),\n              bettingHouseId: data.bet3HouseId!,\n            };\n            betsArray.push(bet3Data);\n          }\n\n          const response = await fetch('/api/surebet-sets', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n              surebetSet: surebetSetData,\n              bets: betsArray,\n            }),\n          });\n\n          if (response.ok) {\n            created++;\n          } else {\n            const errorText = await response.text();\n            errors.push(`${bet.fileName}: ${errorText}`);\n            failed++;\n          }\n        } catch (error) {\n          errors.push(`${bet.fileName}: ${error instanceof Error ? error.message : 'Erro desconhecido'}`);\n          failed++;\n        }\n      }\n\n      queryClient.invalidateQueries({ queryKey: ['/api/surebet-sets'] });\n\n      if (created > 0) {\n        toast({\n          title: \"✅ Apostas criadas com sucesso!\",\n          description: `${created} aposta(s) adicionada(s) ao sistema${failed > 0 ? `. ${failed} falhou(aram)` : ''}`,\n        });\n\n        // Reset para tela inicial após sucesso\n        if (failed === 0) {\n          setTimeout(() => {\n            setFiles([]);\n            setExtractedBets([]);\n            setEditableData({});\n          }, 1500);\n        }\n      }\n\n      if (errors.length > 0 && failed > 0) {\n        console.error('Erros na criação:', errors);\n        toast({\n          title: \"⚠️ Alguns erros ocorreram\",\n          description: `${failed} aposta(s) não puderam ser criadas. Verifique o console.`,\n          variant: \"destructive\",\n        });\n      }\n\n    } catch (error) {\n      toast({\n        title: \"Erro ao criar apostas\",\n        description: \"Falha ao adicionar apostas ao sistema\",\n        variant: \"destructive\",\n      });\n      console.error('Batch creation error:', error);\n    } finally {\n      setIsCreating(false);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto p-6 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold mb-2 flex items-center gap-2\">\n          <Package className=\"h-8 w-8\" />\n          Enviar Lote de Apostas\n        </h1>\n        <p className=\"text-muted-foreground\">\n          Envie múltiplos PDFs de uma vez e crie todas as apostas automaticamente\n        </p>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Selecionar Arquivos PDF</CardTitle>\n          <CardDescription>\n            Escolha um ou mais arquivos PDF de surebets para processar\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center gap-4\">\n            <input\n              type=\"file\"\n              id=\"batch-file-input\"\n              className=\"hidden\"\n              accept=\".pdf,application/pdf\"\n              multiple\n              onChange={handleFileSelect}\n              data-testid=\"input-batch-files\"\n            />\n            <label htmlFor=\"batch-file-input\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => document.getElementById('batch-file-input')?.click()}\n                data-testid=\"button-select-files\"\n              >\n                <Upload className=\"h-4 w-4 mr-2\" />\n                Selecionar PDFs\n              </Button>\n            </label>\n            \n            {files.length > 0 && (\n              <div className=\"flex items-center gap-2\">\n                <Badge variant=\"secondary\">\n                  <FileText className=\"h-3 w-3 mr-1\" />\n                  {files.length} arquivo(s) selecionado(s)\n                </Badge>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => {\n                    setFiles([]);\n                    setExtractedBets([]);\n                    setEditableData({});\n                  }}\n                  data-testid=\"button-clear-files\"\n                >\n                  Limpar\n                </Button>\n              </div>\n            )}\n          </div>\n\n          {files.length > 0 && (\n            <div className=\"space-y-2\">\n              <p className=\"text-sm font-medium\">Arquivos selecionados:</p>\n              <div className=\"grid gap-2 max-h-40 overflow-y-auto\">\n                {files.map((file, index) => (\n                  <div\n                    key={index}\n                    className=\"flex items-center gap-2 p-2 rounded-md bg-muted/50 text-sm\"\n                    data-testid={`file-item-${index}`}\n                  >\n                    <FileText className=\"h-4 w-4 text-muted-foreground\" />\n                    <span className=\"flex-1 truncate\">{file.name}</span>\n                    <span className=\"text-xs text-muted-foreground\">\n                      {(file.size / 1024).toFixed(1)} KB\n                    </span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          <Button\n            onClick={processAllPdfs}\n            disabled={files.length === 0 || isProcessing}\n            className=\"w-full\"\n            data-testid=\"button-process-batch\"\n          >\n            {isProcessing ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Processando {files.length} PDF(s)...\n              </>\n            ) : (\n              <>\n                <FileText className=\"h-4 w-4 mr-2\" />\n                Processar {files.length > 0 ? `${files.length} PDF(s)` : 'PDFs'}\n              </>\n            )}\n          </Button>\n        </CardContent>\n      </Card>\n\n      {/* Blocking Alert for Unmatched Betting Houses */}\n      {extractedBets.length > 0 && unmatchedHouses.length > 0 && (\n        <Alert variant=\"destructive\" data-testid=\"alert-unmatched-houses\">\n          <AlertTriangle className=\"h-4 w-4\" />\n          <AlertTitle>Casas de Apostas Não Cadastradas</AlertTitle>\n          <AlertDescription className=\"space-y-3\">\n            <p>As seguintes casas precisam ser criadas antes de adicionar as apostas ao sistema:</p>\n            <div className=\"flex flex-wrap gap-2\">\n              {unmatchedHouses.map(house => (\n                <Badge key={house} variant=\"outline\" className=\"text-sm\">\n                  {house}\n                </Badge>\n              ))}\n            </div>\n            <Button \n              onClick={handleQuickCreateHouses}\n              disabled={isCreatingHouse}\n              size=\"sm\"\n              variant=\"default\"\n              data-testid=\"button-create-houses\"\n            >\n              {isCreatingHouse ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Criando...\n                </>\n              ) : (\n                <>\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Criar Casas de Apostas Automaticamente\n                </>\n              )}\n            </Button>\n          </AlertDescription>\n        </Alert>\n      )}\n\n      {extractedBets.length > 0 && (\n        <>\n          <div className=\"space-y-6\">\n            {extractedBets.map((bet, index) => (\n              <div key={index}>\n                {bet.success && bet.data && editableData[index] ? (\n                  <div className=\"space-y-6\">\n                    <div className=\"flex items-center gap-2\">\n                      <CheckCircle className=\"h-5 w-5 text-green-600\" />\n                      <h2 className=\"text-xl font-semibold\">{bet.fileName}</h2>\n                      <Badge variant=\"default\">Sucesso</Badge>\n                    </div>\n\n                    {/* Event Information */}\n                    <Card>\n                      <CardHeader>\n                        <CardTitle>Informações do Evento</CardTitle>\n                      </CardHeader>\n                      <CardContent className=\"space-y-4\">\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`date-${index}`}>Data e Hora</Label>\n                            <Input\n                              id={`date-${index}`}\n                              type=\"datetime-local\"\n                              value={formatDateForInput(editableData[index].date)}\n                              onChange={(e) => updateEditableField(index, 'date', e.target.value)}\n                              data-testid={`input-date-${index}`}\n                            />\n                          </div>\n\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`profit-percentage-${index}`}>Lucro (%)</Label>\n                            <Input\n                              id={`profit-percentage-${index}`}\n                              type=\"number\"\n                              step=\"0.01\"\n                              value={editableData[index].profitPercentage}\n                              onChange={(e) => updateEditableField(index, 'profitPercentage', e.target.value)}\n                              data-testid={`input-profit-percentage-${index}`}\n                            />\n                          </div>\n                        </div>\n\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`sport-${index}`}>Esporte</Label>\n                            <Input\n                              id={`sport-${index}`}\n                              value={editableData[index].sport}\n                              onChange={(e) => updateEditableField(index, 'sport', e.target.value)}\n                              data-testid={`input-sport-${index}`}\n                            />\n                          </div>\n\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`league-${index}`}>Liga</Label>\n                            <Input\n                              id={`league-${index}`}\n                              value={editableData[index].league}\n                              onChange={(e) => updateEditableField(index, 'league', e.target.value)}\n                              data-testid={`input-league-${index}`}\n                            />\n                          </div>\n                        </div>\n\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`teamA-${index}`}>Time A</Label>\n                            <Input\n                              id={`teamA-${index}`}\n                              value={editableData[index].teamA}\n                              onChange={(e) => updateEditableField(index, 'teamA', e.target.value)}\n                              data-testid={`input-teamA-${index}`}\n                            />\n                          </div>\n\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`teamB-${index}`}>Time B</Label>\n                            <Input\n                              id={`teamB-${index}`}\n                              value={editableData[index].teamB}\n                              onChange={(e) => updateEditableField(index, 'teamB', e.target.value)}\n                              data-testid={`input-teamB-${index}`}\n                            />\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n\n                    {/* Bet 1 */}\n                    <Card>\n                      <CardHeader>\n                        <CardTitle>Aposta 1</CardTitle>\n                      </CardHeader>\n                      <CardContent className=\"space-y-4\">\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`bet1-house-${index}`}>Casa de Apostas</Label>\n                            <Input\n                              id={`bet1-house-${index}`}\n                              value={editableData[index].bet1House}\n                              onChange={(e) => updateEditableField(index, 'bet1House', e.target.value)}\n                              data-testid={`input-bet1-house-${index}`}\n                            />\n                          </div>\n\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`bet1-type-${index}`}>Tipo</Label>\n                            <Input\n                              id={`bet1-type-${index}`}\n                              value={editableData[index].bet1Type}\n                              onChange={(e) => updateEditableField(index, 'bet1Type', e.target.value)}\n                              data-testid={`input-bet1-type-${index}`}\n                            />\n                          </div>\n\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`bet1-house-id-${index}`}>Titular da Conta</Label>\n                            <Select\n                              value={editableData[index].bet1HouseId}\n                              onValueChange={(value) => updateEditableField(index, 'bet1HouseId', value)}\n                            >\n                              <SelectTrigger id={`bet1-house-id-${index}`} data-testid={`select-bet1-house-${index}`} disabled={isDataLoading}>\n                                <SelectValue placeholder={\n                                  isDataLoading \n                                    ? \"Carregando...\" \n                                    : houseOptions.length === 0 \n                                      ? \"Nenhuma casa cadastrada\" \n                                      : \"Selecionar titular\"\n                                } />\n                              </SelectTrigger>\n                              <SelectContent>\n                                {houseOptions.length === 0 && !isDataLoading ? (\n                                  <SelectItem value=\"no-houses\" disabled>\n                                    Nenhuma casa de apostas cadastrada\n                                  </SelectItem>\n                                ) : (\n                                  houseOptions.map((option) => (\n                                    <SelectItem key={option.id} value={option.id}>\n                                      {option.displayLabel}\n                                    </SelectItem>\n                                  ))\n                                )}\n                              </SelectContent>\n                            </Select>\n                          </div>\n                        </div>\n\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`bet1-odd-${index}`}>Odd</Label>\n                            <Input\n                              id={`bet1-odd-${index}`}\n                              type=\"number\"\n                              step=\"0.001\"\n                              value={editableData[index].bet1Odd}\n                              onChange={(e) => updateEditableField(index, 'bet1Odd', e.target.value)}\n                              data-testid={`input-bet1-odd-${index}`}\n                            />\n                          </div>\n\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`bet1-stake-${index}`}>Stake (R$)</Label>\n                            <Input\n                              id={`bet1-stake-${index}`}\n                              type=\"number\"\n                              step=\"0.01\"\n                              value={editableData[index].bet1Stake}\n                              onChange={(e) => updateEditableField(index, 'bet1Stake', e.target.value)}\n                              data-testid={`input-bet1-stake-${index}`}\n                            />\n                          </div>\n\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`bet1-profit-${index}`}>Lucro Potencial (R$)</Label>\n                            <Input\n                              id={`bet1-profit-${index}`}\n                              type=\"number\"\n                              step=\"0.01\"\n                              value={editableData[index].bet1Profit}\n                              onChange={(e) => updateEditableField(index, 'bet1Profit', e.target.value)}\n                              data-testid={`input-bet1-profit-${index}`}\n                            />\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n\n                    {/* Bet 2 */}\n                    <Card>\n                      <CardHeader>\n                        <CardTitle>Aposta 2</CardTitle>\n                      </CardHeader>\n                      <CardContent className=\"space-y-4\">\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`bet2-house-${index}`}>Casa de Apostas</Label>\n                            <Input\n                              id={`bet2-house-${index}`}\n                              value={editableData[index].bet2House}\n                              onChange={(e) => updateEditableField(index, 'bet2House', e.target.value)}\n                              data-testid={`input-bet2-house-${index}`}\n                            />\n                          </div>\n\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`bet2-type-${index}`}>Tipo</Label>\n                            <Input\n                              id={`bet2-type-${index}`}\n                              value={editableData[index].bet2Type}\n                              onChange={(e) => updateEditableField(index, 'bet2Type', e.target.value)}\n                              data-testid={`input-bet2-type-${index}`}\n                            />\n                          </div>\n\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`bet2-house-id-${index}`}>Titular da Conta</Label>\n                            <Select\n                              value={editableData[index].bet2HouseId}\n                              onValueChange={(value) => updateEditableField(index, 'bet2HouseId', value)}\n                            >\n                              <SelectTrigger id={`bet2-house-id-${index}`} data-testid={`select-bet2-house-${index}`} disabled={isDataLoading}>\n                                <SelectValue placeholder={\n                                  isDataLoading \n                                    ? \"Carregando...\" \n                                    : houseOptions.length === 0 \n                                      ? \"Nenhuma casa cadastrada\" \n                                      : \"Selecionar titular\"\n                                } />\n                              </SelectTrigger>\n                              <SelectContent>\n                                {houseOptions.length === 0 && !isDataLoading ? (\n                                  <SelectItem value=\"no-houses\" disabled>\n                                    Nenhuma casa de apostas cadastrada\n                                  </SelectItem>\n                                ) : (\n                                  houseOptions.map((option) => (\n                                    <SelectItem key={option.id} value={option.id}>\n                                      {option.displayLabel}\n                                    </SelectItem>\n                                  ))\n                                )}\n                              </SelectContent>\n                            </Select>\n                          </div>\n                        </div>\n\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`bet2-odd-${index}`}>Odd</Label>\n                            <Input\n                              id={`bet2-odd-${index}`}\n                              type=\"number\"\n                              step=\"0.001\"\n                              value={editableData[index].bet2Odd}\n                              onChange={(e) => updateEditableField(index, 'bet2Odd', e.target.value)}\n                              data-testid={`input-bet2-odd-${index}`}\n                            />\n                          </div>\n\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`bet2-stake-${index}`}>Stake (R$)</Label>\n                            <Input\n                              id={`bet2-stake-${index}`}\n                              type=\"number\"\n                              step=\"0.01\"\n                              value={editableData[index].bet2Stake}\n                              onChange={(e) => updateEditableField(index, 'bet2Stake', e.target.value)}\n                              data-testid={`input-bet2-stake-${index}`}\n                            />\n                          </div>\n\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`bet2-profit-${index}`}>Lucro Potencial (R$)</Label>\n                            <Input\n                              id={`bet2-profit-${index}`}\n                              type=\"number\"\n                              step=\"0.01\"\n                              value={editableData[index].bet2Profit}\n                              onChange={(e) => updateEditableField(index, 'bet2Profit', e.target.value)}\n                              data-testid={`input-bet2-profit-${index}`}\n                            />\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n\n                    {/* Bet 3 (condicional - apenas para apostas triplas) */}\n                    {editableData[index].bet3House && (\n                      <Card>\n                        <CardHeader>\n                          <CardTitle>Aposta 3</CardTitle>\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                            <div className=\"space-y-2\">\n                              <Label htmlFor={`bet3-house-${index}`}>Casa de Apostas</Label>\n                              <Input\n                                id={`bet3-house-${index}`}\n                                value={editableData[index].bet3House}\n                                onChange={(e) => updateEditableField(index, 'bet3House', e.target.value)}\n                                data-testid={`input-bet3-house-${index}`}\n                              />\n                            </div>\n\n                            <div className=\"space-y-2\">\n                              <Label htmlFor={`bet3-type-${index}`}>Tipo</Label>\n                              <Input\n                                id={`bet3-type-${index}`}\n                                value={editableData[index].bet3Type}\n                                onChange={(e) => updateEditableField(index, 'bet3Type', e.target.value)}\n                                data-testid={`input-bet3-type-${index}`}\n                              />\n                            </div>\n\n                            <div className=\"space-y-2\">\n                              <Label htmlFor={`bet3-house-id-${index}`}>Titular da Conta</Label>\n                              <Select\n                                value={editableData[index].bet3HouseId}\n                                onValueChange={(value) => updateEditableField(index, 'bet3HouseId', value)}\n                              >\n                                <SelectTrigger id={`bet3-house-id-${index}`} data-testid={`select-bet3-house-${index}`} disabled={isDataLoading}>\n                                  <SelectValue placeholder={\n                                    isDataLoading \n                                      ? \"Carregando...\" \n                                      : houseOptions.length === 0 \n                                        ? \"Nenhuma casa cadastrada\" \n                                        : \"Selecionar titular\"\n                                  } />\n                                </SelectTrigger>\n                                <SelectContent>\n                                  {houseOptions.length === 0 && !isDataLoading ? (\n                                    <SelectItem value=\"no-houses\" disabled>\n                                      Nenhuma casa de apostas cadastrada\n                                    </SelectItem>\n                                  ) : (\n                                    houseOptions.map((option) => (\n                                      <SelectItem key={option.id} value={option.id}>\n                                        {option.displayLabel}\n                                      </SelectItem>\n                                    ))\n                                  )}\n                                </SelectContent>\n                              </Select>\n                            </div>\n                          </div>\n\n                          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                            <div className=\"space-y-2\">\n                              <Label htmlFor={`bet3-odd-${index}`}>Odd</Label>\n                              <Input\n                                id={`bet3-odd-${index}`}\n                                type=\"number\"\n                                step=\"0.001\"\n                                value={editableData[index].bet3Odd}\n                                onChange={(e) => updateEditableField(index, 'bet3Odd', e.target.value)}\n                                data-testid={`input-bet3-odd-${index}`}\n                              />\n                            </div>\n\n                            <div className=\"space-y-2\">\n                              <Label htmlFor={`bet3-stake-${index}`}>Stake (R$)</Label>\n                              <Input\n                                id={`bet3-stake-${index}`}\n                                type=\"number\"\n                                step=\"0.01\"\n                                value={editableData[index].bet3Stake}\n                                onChange={(e) => updateEditableField(index, 'bet3Stake', e.target.value)}\n                                data-testid={`input-bet3-stake-${index}`}\n                              />\n                            </div>\n\n                            <div className=\"space-y-2\">\n                              <Label htmlFor={`bet3-profit-${index}`}>Lucro Potencial (R$)</Label>\n                              <Input\n                                id={`bet3-profit-${index}`}\n                                type=\"number\"\n                                step=\"0.01\"\n                                value={editableData[index].bet3Profit}\n                                onChange={(e) => updateEditableField(index, 'bet3Profit', e.target.value)}\n                                data-testid={`input-bet3-profit-${index}`}\n                              />\n                            </div>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    )}\n                  </div>\n                ) : (\n                  <Card className=\"border-red-200 dark:border-red-900\">\n                    <CardHeader>\n                      <div className=\"flex items-center gap-2\">\n                        <XCircle className=\"h-5 w-5 text-red-600\" />\n                        <CardTitle>{bet.fileName}</CardTitle>\n                        <Badge variant=\"destructive\">Erro</Badge>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <p className=\"text-sm text-red-600 dark:text-red-400\">\n                        {bet.error || \"Erro desconhecido ao processar PDF\"}\n                      </p>\n                    </CardContent>\n                  </Card>\n                )}\n              </div>\n            ))}\n          </div>\n\n          {extractedBets.some(b => b.success) && (\n            <Card className=\"border-green-200 dark:border-green-900\">\n              <CardContent className=\"pt-6\">\n                {unmatchedHouses.length > 0 && (\n                  <p className=\"text-sm text-muted-foreground mb-4 text-center\">\n                    ⚠️ Configure as casas de apostas acima antes de adicionar ao sistema\n                  </p>\n                )}\n                <Button\n                  onClick={createAllBets}\n                  disabled={isCreating || unmatchedHouses.length > 0 || isDataLoading || isCreatingHouse}\n                  className=\"w-full\"\n                  size=\"lg\"\n                  data-testid=\"button-create-all-bets\"\n                >\n                  {isCreating ? (\n                    <>\n                      <Loader2 className=\"h-5 w-5 mr-2 animate-spin\" />\n                      Criando apostas...\n                    </>\n                  ) : unmatchedHouses.length > 0 ? (\n                    <>\n                      <AlertTriangle className=\"h-5 w-5 mr-2\" />\n                      Configure as casas de apostas primeiro\n                    </>\n                  ) : (\n                    <>\n                      <CheckCircle className=\"h-5 w-5 mr-2\" />\n                      Adicionar Todas as Apostas ao Sistema ({extractedBets.filter(b => b.success).length})\n                    </>\n                  )}\n                </Button>\n              </CardContent>\n            </Card>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","path":null,"size_bytes":47868,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7609,"size_tokens":null},"server/storage.ts":{"content":"import { db } from \"./db\";\nimport { accountHolders, bettingHouses, surebetSets, bets, users } from \"@shared/schema\";\nimport type {\n  AccountHolder,\n  InsertAccountHolder,\n  BettingHouse,\n  InsertBettingHouse,\n  SurebetSet,\n  InsertSurebetSet,\n  Bet,\n  InsertBet,\n  SurebetSetWithBets,\n  User,\n  InsertUser\n} from \"@shared/schema\";\nimport { eq, desc, inArray, asc } from \"drizzle-orm\";\nimport session from \"express-session\";\nimport connectPg from \"connect-pg-simple\";\nimport { pool } from \"./db\";\n\nconst PostgresSessionStore = connectPg(session);\n\nexport interface IStorage {\n  // Session store\n  sessionStore: session.Store;\n\n  // Users\n  createUser(data: InsertUser): Promise<User>;\n  getUser(id: string): Promise<User | null>;\n  getUserByEmail(email: string): Promise<User | null>;\n  getAllUsers(): Promise<User[]>;\n  updateUser(id: string, data: Partial<InsertUser>): Promise<User>;\n  deleteUser(id: string): Promise<void>;\n\n  // Account Holders\n  createAccountHolder(data: InsertAccountHolder): Promise<AccountHolder>;\n  getAccountHolders(userId?: string): Promise<AccountHolder[]>;\n  updateAccountHolder(id: string, data: Partial<InsertAccountHolder>): Promise<AccountHolder>;\n  deleteAccountHolder(id: string): Promise<void>;\n\n  // Betting Houses  \n  createBettingHouse(data: InsertBettingHouse): Promise<BettingHouse>;\n  getBettingHouses(userId?: string): Promise<any[]>;\n  getBettingHousesByHolder(accountHolderId: string): Promise<BettingHouse[]>;\n  updateBettingHouse(id: string, data: Partial<InsertBettingHouse>): Promise<BettingHouse>;\n  deleteBettingHouse(id: string): Promise<void>;\n\n  // Surebet Sets\n  createSurebetSet(data: InsertSurebetSet): Promise<SurebetSet>;\n  getSurebetSets(userId?: string): Promise<SurebetSetWithBets[]>;\n  getSurebetSetById(id: string): Promise<SurebetSetWithBets | null>;\n  updateSurebetSet(id: string, data: Partial<InsertSurebetSet>): Promise<SurebetSet>;\n  deleteSurebetSet(id: string): Promise<void>;\n\n  // Individual Bets\n  createBet(data: InsertBet): Promise<Bet>;\n  updateBet(id: string, data: Partial<InsertBet>): Promise<Bet>;\n  deleteBet(id: string): Promise<void>;\n}\n\nclass DatabaseStorage implements IStorage {\n  sessionStore: session.Store;\n\n  constructor() {\n    this.sessionStore = new PostgresSessionStore({ pool, createTableIfMissing: true });\n  }\n\n  // Users\n  async createUser(data: InsertUser): Promise<User> {\n    const [user] = await db.insert(users).values(data).returning();\n    return user;\n  }\n\n  async getUser(id: string): Promise<User | null> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user || null;\n  }\n\n  async getUserByEmail(email: string): Promise<User | null> {\n    const [user] = await db.select().from(users).where(eq(users.email, email));\n    return user || null;\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return await db.select().from(users).orderBy(desc(users.createdAt));\n  }\n\n  async updateUser(id: string, data: Partial<InsertUser>): Promise<User> {\n    const [user] = await db\n      .update(users)\n      .set(data)\n      .where(eq(users.id, id))\n      .returning();\n    \n    if (!user) throw new Error('User not found');\n    return user;\n  }\n\n  async deleteUser(id: string): Promise<void> {\n    await db.delete(users).where(eq(users.id, id));\n  }\n\n  // Account Holders\n  async createAccountHolder(data: InsertAccountHolder): Promise<AccountHolder> {\n    const [accountHolder] = await db.insert(accountHolders).values(data).returning();\n    return accountHolder;\n  }\n\n  async getAccountHolders(userId?: string): Promise<AccountHolder[]> {\n    if (userId) {\n      return await db.select().from(accountHolders).where(eq(accountHolders.userId, userId)).orderBy(desc(accountHolders.createdAt));\n    }\n    return await db.select().from(accountHolders).orderBy(desc(accountHolders.createdAt));\n  }\n\n  async updateAccountHolder(id: string, data: Partial<InsertAccountHolder>): Promise<AccountHolder> {\n    const [accountHolder] = await db\n      .update(accountHolders)\n      .set(data)\n      .where(eq(accountHolders.id, id))\n      .returning();\n    \n    if (!accountHolder) throw new Error('Account holder not found');\n    return accountHolder;\n  }\n\n  async deleteAccountHolder(id: string): Promise<void> {\n    await db.delete(accountHolders).where(eq(accountHolders.id, id));\n  }\n\n  // Betting Houses\n  async createBettingHouse(data: InsertBettingHouse): Promise<BettingHouse> {\n    const [bettingHouse] = await db.insert(bettingHouses).values(data).returning();\n    return bettingHouse;\n  }\n\n  async getBettingHouses(userId?: string): Promise<any[]> {\n    let query = db\n      .select()\n      .from(bettingHouses)\n      .leftJoin(accountHolders, eq(bettingHouses.accountHolderId, accountHolders.id));\n    \n    if (userId) {\n      query = query.where(eq(bettingHouses.userId, userId)) as any;\n    }\n    \n    const houses = await query.orderBy(desc(bettingHouses.createdAt));\n    \n    return houses.map(row => ({\n      ...row.betting_houses,\n      accountHolder: row.account_holders\n    }));\n  }\n\n  async getBettingHousesByHolder(accountHolderId: string): Promise<BettingHouse[]> {\n    return await db\n      .select()\n      .from(bettingHouses)\n      .where(eq(bettingHouses.accountHolderId, accountHolderId))\n      .orderBy(desc(bettingHouses.createdAt));\n  }\n\n  async updateBettingHouse(id: string, data: Partial<InsertBettingHouse>): Promise<BettingHouse> {\n    const [bettingHouse] = await db\n      .update(bettingHouses)\n      .set(data)\n      .where(eq(bettingHouses.id, id))\n      .returning();\n    \n    if (!bettingHouse) throw new Error('Betting house not found');\n    return bettingHouse;\n  }\n\n  async deleteBettingHouse(id: string): Promise<void> {\n    await db.delete(bettingHouses).where(eq(bettingHouses.id, id));\n  }\n\n  // Surebet Sets\n  async createSurebetSet(data: InsertSurebetSet): Promise<SurebetSet> {\n    const [surebetSet] = await db.insert(surebetSets).values(data).returning();\n    return surebetSet;\n  }\n\n  async getSurebetSets(userId?: string): Promise<SurebetSetWithBets[]> {\n    // Query 1: Get all surebet sets\n    let query = db.select().from(surebetSets);\n    \n    if (userId) {\n      query = query.where(eq(surebetSets.userId, userId)) as any;\n    }\n    \n    const sets = await query.orderBy(desc(surebetSets.createdAt));\n    \n    if (sets.length === 0) {\n      return [];\n    }\n    \n    // Query 2: Get ALL bets for ALL sets in a single batched query\n    // ORDER BY garante ordem determinística (createdAt + id como critério de desempate)\n    const setIds = sets.map(set => set.id);\n    const allBets = await db\n      .select()\n      .from(bets)\n      .innerJoin(bettingHouses, eq(bets.bettingHouseId, bettingHouses.id))\n      .innerJoin(accountHolders, eq(bettingHouses.accountHolderId, accountHolders.id))\n      .where(inArray(bets.surebetSetId, setIds))\n      .orderBy(asc(bets.createdAt), asc(bets.id));\n    \n    // Group bets by set ID in memory\n    const betsBySetId = new Map<string, any[]>();\n    \n    for (const row of allBets) {\n      const setId = row.bets.surebetSetId;\n      if (!setId) continue; // Skip if no set ID (shouldn't happen)\n      \n      if (!betsBySetId.has(setId)) {\n        betsBySetId.set(setId, []);\n      }\n      \n      betsBySetId.get(setId)!.push({\n        ...row.bets,\n        bettingHouse: {\n          ...row.betting_houses,\n          accountHolder: row.account_holders\n        }\n      });\n    }\n    \n    // Assemble final result\n    // Converte Date para string ISO mantendo os valores UTC (que são os valores do banco sem timezone)\n    const formatDateToISO = (date: Date | string | null): string | null => {\n      if (!date) return null;\n      if (typeof date === 'string') return date;\n      \n      // Extrai componentes UTC do Date (que representam os valores do banco)\n      const year = date.getUTCFullYear();\n      const month = String(date.getUTCMonth() + 1).padStart(2, '0');\n      const day = String(date.getUTCDate()).padStart(2, '0');\n      const hours = String(date.getUTCHours()).padStart(2, '0');\n      const minutes = String(date.getUTCMinutes()).padStart(2, '0');\n      const seconds = String(date.getUTCSeconds()).padStart(2, '0');\n      \n      return `${year}-${month}-${day}T${hours}:${minutes}:${seconds}.000Z`;\n    };\n    \n    const result: SurebetSetWithBets[] = sets.map(set => {\n      // SQL já ordena - não reordenar aqui\n      const setBets = betsBySetId.get(set.id) || [];\n      \n      return {\n        ...set,\n        eventDate: formatDateToISO(set.eventDate) as any,\n        createdAt: formatDateToISO(set.createdAt) as any,\n        bets: setBets.map(bet => ({\n          ...bet,\n          createdAt: formatDateToISO(bet.createdAt) as any\n        }))\n      };\n    });\n    \n    return result;\n  }\n\n  async getSurebetSetById(id: string): Promise<SurebetSetWithBets | null> {\n    const [set] = await db\n      .select()\n      .from(surebetSets)\n      .where(eq(surebetSets.id, id));\n    \n    if (!set) return null;\n    \n    const setBets = await db\n      .select()\n      .from(bets)\n      .innerJoin(bettingHouses, eq(bets.bettingHouseId, bettingHouses.id))\n      .innerJoin(accountHolders, eq(bettingHouses.accountHolderId, accountHolders.id))\n      .where(eq(bets.surebetSetId, set.id))\n      .orderBy(asc(bets.createdAt), asc(bets.id));\n\n    // Helper para converter Date para ISO string sem conversão de timezone\n    const formatDateToISO = (date: Date | string | null): string | null => {\n      if (!date) return null;\n      if (typeof date === 'string') return date;\n      \n      const year = date.getUTCFullYear();\n      const month = String(date.getUTCMonth() + 1).padStart(2, '0');\n      const day = String(date.getUTCDate()).padStart(2, '0');\n      const hours = String(date.getUTCHours()).padStart(2, '0');\n      const minutes = String(date.getUTCMinutes()).padStart(2, '0');\n      const seconds = String(date.getUTCSeconds()).padStart(2, '0');\n      \n      return `${year}-${month}-${day}T${hours}:${minutes}:${seconds}.000Z`;\n    };\n\n    // SQL já ordena - não reordenar aqui\n    const formattedBets = setBets.map(row => ({\n        ...row.bets,\n        createdAt: formatDateToISO(row.bets.createdAt),\n        bettingHouse: {\n          ...row.betting_houses,\n          createdAt: formatDateToISO(row.betting_houses.createdAt),\n          accountHolder: row.account_holders\n        }\n      }));\n    \n    return {\n      ...set,\n      eventDate: formatDateToISO(set.eventDate) as any,\n      createdAt: formatDateToISO(set.createdAt) as any,\n      bets: formattedBets\n    } as SurebetSetWithBets;\n  }\n\n  async updateSurebetSet(id: string, data: Partial<InsertSurebetSet>): Promise<SurebetSet> {\n    const [surebetSet] = await db\n      .update(surebetSets)\n      .set(data)\n      .where(eq(surebetSets.id, id))\n      .returning();\n    \n    if (!surebetSet) throw new Error('Surebet set not found');\n    return surebetSet;\n  }\n\n  async deleteSurebetSet(id: string): Promise<void> {\n    // Delete associated bets first\n    await db.delete(bets).where(eq(bets.surebetSetId, id));\n    // Then delete the set\n    await db.delete(surebetSets).where(eq(surebetSets.id, id));\n  }\n\n  // Individual Bets\n  async createBet(data: InsertBet): Promise<Bet> {\n    const [bet] = await db.insert(bets).values(data).returning();\n    return bet;\n  }\n\n  async updateBet(id: string, data: Partial<InsertBet>): Promise<Bet> {\n    const [bet] = await db\n      .update(bets)\n      .set(data)\n      .where(eq(bets.id, id))\n      .returning();\n    \n    if (!bet) throw new Error('Bet not found');\n    return bet;\n  }\n\n  async deleteBet(id: string): Promise<void> {\n    await db.delete(bets).where(eq(bets.id, id));\n  }\n}\n\nexport const storage: IStorage = new DatabaseStorage();","path":null,"size_bytes":11693,"size_tokens":null},"client/src/components/image-upload.tsx":{"content":"import { useState, useCallback } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Upload, FileText, X, Loader2 } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface PdfUploadProps {\n  onImageUpload: (file: File) => void;\n  onImageRemove?: () => void;\n  isProcessing?: boolean;\n  uploadedImage?: string | null;\n  className?: string;\n  onOCRComplete?: (data: any) => void;\n  onOCRError?: (error: string) => void;\n}\n\nexport function ImageUpload({\n  onImageUpload,\n  onImageRemove,\n  isProcessing = false,\n  uploadedImage = null,\n  className,\n  onOCRComplete,\n  onOCRError,\n}: PdfUploadProps) {\n  const [isDragActive, setIsDragActive] = useState(false);\n\n  const onDrop = useCallback(async (acceptedFiles: File[]) => {\n    const file = acceptedFiles[0];\n    if (file && file.type === \"application/pdf\") {\n      onImageUpload(file);\n      \n      // Also trigger PDF processing if handlers are provided\n      if (onOCRComplete && onOCRError) {\n        try {\n          const formData = new FormData();\n          formData.append('file', file);\n          \n          const response = await fetch('/api/ocr/process', {\n            method: 'POST',\n            body: formData,\n          });\n          \n          const result = await response.json();\n          \n          if (response.ok && result.success) {\n            onOCRComplete(result.data);\n          } else {\n            onOCRError(result.error || 'Erro ao processar PDF');\n          }\n        } catch (error) {\n          console.error('PDF processing error:', error);\n          onOCRError('Erro ao processar PDF com pdfplumber');\n        }\n      }\n    }\n  }, [onImageUpload, onOCRComplete, onOCRError]);\n\n  const { getRootProps, getInputProps } = useDropzone({\n    onDrop,\n    accept: {\n      'application/pdf': ['.pdf']\n    },\n    multiple: false,\n    onDragEnter: () => setIsDragActive(true),\n    onDragLeave: () => setIsDragActive(false),\n  });\n\n\n  if (uploadedImage) {\n    return (\n      <Card className={cn(\"relative\", className)}>\n        <CardContent className=\"p-4\">\n          <div className=\"relative\">\n            {/* PDF Preview */}\n            <div className=\"w-full min-h-[200px] flex flex-col items-center justify-center border rounded-lg bg-muted/50\">\n              <div className=\"flex flex-col items-center gap-3 p-6\">\n                <div className=\"p-3 rounded-full bg-primary/10\">\n                  <FileText className=\"h-12 w-12 text-primary\" />\n                </div>\n                <div className=\"text-center\">\n                  <h3 className=\"font-medium\">PDF Carregado</h3>\n                  <p className=\"text-sm text-muted-foreground\">Documento pronto para processamento</p>\n                </div>\n              </div>\n            </div>\n            \n            {onImageRemove && (\n              <Button\n                variant=\"destructive\"\n                size=\"icon\"\n                className=\"absolute top-2 right-2\"\n                onClick={onImageRemove}\n                data-testid=\"button-remove-pdf\"\n              >\n                <X className=\"h-4 w-4\" />\n              </Button>\n            )}\n            \n            {isProcessing && (\n              <div className=\"absolute inset-0 bg-background/80 flex items-center justify-center rounded-lg\">\n                <div className=\"flex flex-col items-center gap-2\">\n                  <Loader2 className=\"h-8 w-8 animate-spin\" />\n                  <p className=\"text-sm text-muted-foreground\">Processando PDF com pdfplumber...</p>\n                </div>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card\n      {...getRootProps()}\n      className={cn(\n        \"border-2 border-dashed cursor-pointer transition-colors hover-elevate\",\n        isDragActive ? \"border-primary bg-primary/5\" : \"border-muted-foreground/25\",\n        isProcessing && \"pointer-events-none opacity-50\",\n        className\n      )}\n      tabIndex={0}\n      data-testid=\"dropzone-upload\"\n    >\n      <CardContent className=\"flex flex-col items-center justify-center p-8 text-center\">\n        <input {...getInputProps()} />\n        \n        <div className=\"flex flex-col items-center gap-4\">\n          <div className=\"p-4 rounded-full bg-muted\">\n            {isProcessing ? (\n              <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n            ) : (\n              <Upload className=\"h-8 w-8 text-muted-foreground\" />\n            )}\n          </div>\n          \n          <div className=\"space-y-2\">\n            <h3 className=\"text-lg font-semibold\">\n              {isProcessing ? \"Processando...\" : \"Faça upload do PDF\"}\n            </h3>\n            \n            <div className=\"text-muted-foreground space-y-1\">\n              <p>Arraste e solte um PDF aqui</p>\n              <p className=\"text-sm\">ou <span className=\"text-primary font-medium\">clique para selecionar</span></p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n            <FileText className=\"h-4 w-4\" />\n            <span>Apenas arquivos PDF</span>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","path":null,"size_bytes":5313,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1383,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5128,"size_tokens":null},"server/pdf-plumber-service.ts":{"content":"import { spawn } from 'child_process';\nimport { promises as fs } from 'fs';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\nimport { OCRResult } from '../shared/schema';\n\nexport class PdfPlumberService {\n  private readonly tempDir = '/tmp';\n  private readonly pythonScript = path.join(path.dirname(fileURLToPath(import.meta.url)), 'pdf', 'parse_pdf.py');\n  private readonly timeout = 30000; // 30 segundos timeout\n\n  async processDocument(\n    fileBuffer: Buffer, \n    filename: string, \n    mimeType: string,\n    customPrompt?: string\n  ): Promise<OCRResult> {\n    console.log(`Processing PDF with pdfplumber: ${filename}, size: ${fileBuffer.length} bytes`);\n    console.log(`Custom prompt provided: ${customPrompt ? 'Yes' : 'No'}`);\n    \n    // Valida que é um PDF\n    if (mimeType !== 'application/pdf') {\n      throw new Error(`Unsupported file type: ${mimeType}. Only PDF files are supported.`);\n    }\n\n    // Valida assinatura do PDF\n    if (!fileBuffer.subarray(0, 4).equals(Buffer.from('%PDF'))) {\n      throw new Error('Invalid PDF file: missing PDF signature');\n    }\n\n    console.log('Processing application/pdf with pdfplumber');\n\n    // Cria arquivo temporário\n    const tempFilePath = path.join(this.tempDir, `pdf_${Date.now()}_${Math.random().toString(36).substr(2, 9)}.pdf`);\n    \n    try {\n      await fs.writeFile(tempFilePath, fileBuffer);\n      console.log(`Temporary PDF file created: ${tempFilePath}`);\n\n      // Executa script Python\n      const result = await this.executePythonScript(tempFilePath);\n      \n      console.log('pdfplumber Raw Response:', JSON.stringify(result, null, 2));\n\n      return this.validateAndCleanResult(result);\n\n    } finally {\n      // Limpa arquivo temporário\n      try {\n        await fs.unlink(tempFilePath);\n        console.log(`Temporary file cleaned: ${tempFilePath}`);\n      } catch (error) {\n        console.warn(`Failed to clean temporary file: ${tempFilePath}`, error instanceof Error ? error.message : error);\n      }\n    }\n  }\n\n  private async executePythonScript(pdfPath: string): Promise<any> {\n    return new Promise((resolve, reject) => {\n      const python = spawn('python3', [this.pythonScript, pdfPath], {\n        stdio: ['pipe', 'pipe', 'pipe'],\n        timeout: this.timeout\n      });\n\n      let stdout = '';\n      let stderr = '';\n\n      python.stdout.on('data', (data) => {\n        stdout += data.toString();\n      });\n\n      python.stderr.on('data', (data) => {\n        stderr += data.toString();\n      });\n\n      python.on('close', (code) => {\n        if (stderr) {\n          console.warn('Python script stderr:', stderr);\n        }\n\n        if (code !== 0) {\n          reject(new Error(`Python script exited with code ${code}: ${stderr}`));\n          return;\n        }\n\n        try {\n          const result = JSON.parse(stdout.trim());\n          resolve(result);\n        } catch (error) {\n          const errorMessage = error instanceof Error ? error.message : String(error);\n          reject(new Error(`Failed to parse Python script output: ${errorMessage}\\nOutput: ${stdout}`));\n        }\n      });\n\n      python.on('error', (error) => {\n        reject(new Error(`Failed to spawn Python process: ${error.message}`));\n      });\n\n      // Timeout handling\n      setTimeout(() => {\n        python.kill('SIGKILL');\n        reject(new Error(`Python script timeout after ${this.timeout}ms`));\n      }, this.timeout);\n    });\n  }\n\n  private validateAndCleanResult(data: any): OCRResult {\n    // Garante que o resultado segue a estrutura OCRResult\n    const result: OCRResult = {\n      date: data.date || null,\n      sport: data.sport || null,\n      league: data.league || null,\n      teamA: data.teamA || null,\n      teamB: data.teamB || null,\n      bet1: {\n        house: data.bet1?.house || null,\n        odd: data.bet1?.odd || null,\n        type: data.bet1?.type || null,\n        stake: data.bet1?.stake || null,\n        profit: data.bet1?.profit || null\n      },\n      bet2: {\n        house: data.bet2?.house || null,\n        odd: data.bet2?.odd || null,\n        type: data.bet2?.type || null,\n        stake: data.bet2?.stake || null,\n        profit: data.bet2?.profit || null\n      },\n      profitPercentage: data.profitPercentage || null\n    };\n\n    // Add bet3 if it exists (supports triple bets)\n    if (data.bet3 && (data.bet3.house || data.bet3.type || data.bet3.odd)) {\n      result.bet3 = {\n        house: data.bet3.house || null,\n        odd: data.bet3.odd || null,\n        type: data.bet3.type || null,\n        stake: data.bet3.stake || null,\n        profit: data.bet3.profit || null\n      };\n    }\n\n    return result;\n  }\n}","path":null,"size_bytes":4628,"size_tokens":null},"client/src/pages/qr-reader.tsx":{"content":"import { useState, useRef, useCallback, useEffect } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Upload, Copy, CheckCircle2, XCircle } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport jsQR from \"jsqr\";\n\nexport default function QRReader() {\n  const [qrText, setQrText] = useState<string>(\"\");\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [status, setStatus] = useState<\"idle\" | \"success\" | \"error\">(\"idle\");\n  const [previewUrl, setPreviewUrl] = useState<string>(\"\");\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const { toast } = useToast();\n\n  const processImage = useCallback(async (file: File) => {\n    setIsProcessing(true);\n    setStatus(\"idle\");\n    setQrText(\"\");\n\n    try {\n      // Create preview\n      const url = URL.createObjectURL(file);\n      setPreviewUrl(url);\n\n      // Create image element\n      const img = new Image();\n      img.src = url;\n\n      img.onload = () => {\n        // Create canvas and get image data\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n\n        if (!ctx) {\n          setStatus(\"error\");\n          setIsProcessing(false);\n          toast({\n            variant: \"destructive\",\n            title: \"Erro\",\n            description: \"Não foi possível processar a imagem\",\n          });\n          return;\n        }\n\n        canvas.width = img.width;\n        canvas.height = img.height;\n        ctx.drawImage(img, 0, 0);\n\n        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n        \n        // Process with jsQR\n        const code = jsQR(imageData.data, imageData.width, imageData.height, {\n          inversionAttempts: \"dontInvert\",\n        });\n\n        if (code) {\n          setQrText(code.data);\n          setStatus(\"success\");\n          toast({\n            title: \"QR Code encontrado!\",\n            description: \"Texto extraído com sucesso\",\n          });\n        } else {\n          setStatus(\"error\");\n          toast({\n            variant: \"destructive\",\n            title: \"QR Code não encontrado\",\n            description: \"Não foi possível encontrar um QR code na imagem\",\n          });\n        }\n\n        setIsProcessing(false);\n      };\n\n      img.onerror = () => {\n        setStatus(\"error\");\n        setIsProcessing(false);\n        toast({\n          variant: \"destructive\",\n          title: \"Erro\",\n          description: \"Não foi possível carregar a imagem\",\n        });\n      };\n    } catch (error) {\n      setStatus(\"error\");\n      setIsProcessing(false);\n      toast({\n        variant: \"destructive\",\n        title: \"Erro\",\n        description: \"Ocorreu um erro ao processar a imagem\",\n      });\n    }\n  }, [toast]);\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file && (file.type === \"image/jpeg\" || file.type === \"image/png\")) {\n      processImage(file);\n    } else {\n      toast({\n        variant: \"destructive\",\n        title: \"Formato inválido\",\n        description: \"Por favor, selecione uma imagem JPG ou PNG\",\n      });\n    }\n  };\n\n  const handlePaste = useCallback((e: ClipboardEvent) => {\n    const items = e.clipboardData?.items;\n    if (!items) return;\n\n    for (let i = 0; i < items.length; i++) {\n      if (items[i].type.indexOf(\"image\") !== -1) {\n        const file = items[i].getAsFile();\n        if (file) {\n          processImage(file);\n        }\n        break;\n      }\n    }\n  }, [processImage]);\n\n  // Add paste event listener\n  useEffect(() => {\n    document.addEventListener(\"paste\", handlePaste as any);\n    return () => {\n      document.removeEventListener(\"paste\", handlePaste as any);\n    };\n  }, [handlePaste]);\n\n  const handleReset = () => {\n    setQrText(\"\");\n    setStatus(\"idle\");\n    setPreviewUrl(\"\");\n    setIsProcessing(false);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  };\n\n  const handleCopy = () => {\n    if (qrText) {\n      navigator.clipboard.writeText(qrText);\n      toast({\n        title: \"Copiado!\",\n        description: \"Texto copiado para a área de transferência\",\n      });\n    }\n  };\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">Leitor de QR Code</h1>\n        <p className=\"text-muted-foreground\">\n          Extraia texto de imagens de QR code rapidamente\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Upload ou Cole a Imagem</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"border-2 border-dashed border-muted rounded-lg p-8 text-center\">\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\"image/jpeg,image/png\"\n                onChange={handleFileSelect}\n                className=\"hidden\"\n                data-testid=\"input-qr-file\"\n              />\n              \n              {previewUrl ? (\n                <div className=\"space-y-4\">\n                  <img\n                    src={previewUrl}\n                    alt=\"Preview\"\n                    className=\"max-w-full max-h-64 mx-auto rounded-lg\"\n                    data-testid=\"img-qr-preview\"\n                  />\n                  <Button\n                    onClick={handleReset}\n                    variant=\"outline\"\n                    disabled={isProcessing}\n                    data-testid=\"button-new-qr\"\n                  >\n                    <Upload className=\"w-4 h-4 mr-2\" />\n                    Enviar um Novo QR\n                  </Button>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  <Upload className=\"w-16 h-16 mx-auto text-muted-foreground\" />\n                  <div>\n                    <Button\n                      onClick={() => fileInputRef.current?.click()}\n                      disabled={isProcessing}\n                      data-testid=\"button-upload-qr\"\n                    >\n                      <Upload className=\"w-4 h-4 mr-2\" />\n                      Selecionar Imagem\n                    </Button>\n                  </div>\n                  <p className=\"text-sm text-muted-foreground\">\n                    ou pressione <kbd className=\"px-2 py-1 bg-muted rounded\">Ctrl + V</kbd> para colar\n                  </p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    Formatos aceitos: JPG, PNG\n                  </p>\n                </div>\n              )}\n            </div>\n\n            {isProcessing && (\n              <div className=\"flex items-center justify-center gap-2 text-primary\">\n                <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-primary\"></div>\n                <span>Processando imagem...</span>\n              </div>\n            )}\n\n            {status === \"success\" && (\n              <div className=\"flex items-center gap-2 text-green-600\" data-testid=\"status-success\">\n                <CheckCircle2 className=\"w-5 h-5\" />\n                <span>QR Code encontrado!</span>\n              </div>\n            )}\n\n            {status === \"error\" && (\n              <div className=\"flex items-center gap-2 text-red-600\" data-testid=\"status-error\">\n                <XCircle className=\"w-5 h-5\" />\n                <span>QR Code não encontrado na imagem</span>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Texto Extraído</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <Textarea\n              value={qrText}\n              readOnly\n              placeholder=\"O texto do QR code aparecerá aqui...\"\n              className=\"min-h-[200px] font-mono\"\n              data-testid=\"textarea-qr-result\"\n            />\n            \n            <Button\n              onClick={handleCopy}\n              disabled={!qrText}\n              className=\"w-full\"\n              data-testid=\"button-copy-qr\"\n            >\n              <Copy className=\"w-4 h-4 mr-2\" />\n              Copiar Texto\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card className=\"bg-muted/50\">\n        <CardContent className=\"pt-6\">\n          <h3 className=\"font-semibold mb-2\">Como usar:</h3>\n          <ul className=\"space-y-1 text-sm text-muted-foreground\">\n            <li>1. Clique em \"Selecionar Imagem\" para fazer upload de uma imagem JPG ou PNG</li>\n            <li>2. Ou pressione Ctrl + V para colar uma imagem da área de transferência</li>\n            <li>3. O sistema irá processar automaticamente e extrair o texto do QR code</li>\n            <li>4. Use o botão \"Copiar Texto\" para copiar o resultado</li>\n          </ul>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":9060,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2765,"size_tokens":null},"client/src/hooks/use-auth.tsx":{"content":"import { createContext, ReactNode, useContext } from \"react\";\nimport {\n  useQuery,\n  useMutation,\n  UseMutationResult,\n} from \"@tanstack/react-query\";\nimport { User as SelectUser } from \"@shared/schema\";\nimport { getQueryFn, apiRequest, queryClient } from \"../lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ntype AuthContextType = {\n  user: SelectUser | null;\n  isLoading: boolean;\n  error: Error | null;\n  loginMutation: UseMutationResult<SelectUser, Error, LoginData>;\n  logoutMutation: UseMutationResult<void, Error, void>;\n};\n\ntype LoginData = {\n  email: string;\n  password: string;\n};\n\nexport const AuthContext = createContext<AuthContextType | null>(null);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const { toast } = useToast();\n  const {\n    data: user,\n    error,\n    isLoading,\n  } = useQuery<SelectUser | undefined, Error>({\n    queryKey: [\"/api/user\"],\n    queryFn: getQueryFn({ on401: \"returnNull\" }),\n  });\n\n  const loginMutation = useMutation({\n    mutationFn: async (credentials: LoginData) => {\n      const res = await apiRequest(\"POST\", \"/api/login\", credentials);\n      return await res.json();\n    },\n    onSuccess: async (user: SelectUser) => {\n      // Clear ALL cache to prevent showing previous user's data\n      queryClient.clear();\n      \n      // Set the new user data\n      queryClient.setQueryData([\"/api/user\"], user);\n      \n      // Force refetch all user-specific data with fresh data\n      await queryClient.invalidateQueries({ \n        refetchType: 'all' // Force refetch even if data is stale\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Falha no login\",\n        description: \"Email ou senha incorretos\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const logoutMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest(\"POST\", \"/api/logout\");\n    },\n    onSuccess: () => {\n      // Clear ALL cache when logging out to prevent data leakage to next user\n      queryClient.clear();\n      \n      // Set user to null\n      queryClient.setQueryData([\"/api/user\"], null);\n    },\n    onError: () => {\n      toast({\n        title: \"Erro ao sair\",\n        description: \"Erro ao sair do sistema\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user: user ?? null,\n        isLoading,\n        error,\n        loginMutation,\n        logoutMutation,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":2692,"size_tokens":null},"client/src/components/app-sidebar.tsx":{"content":"import {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarHeader,\n  SidebarFooter,\n} from \"@/components/ui/sidebar\";\nimport { Link, useLocation } from \"wouter\";\nimport { \n  LayoutDashboard, \n  Upload, \n  TestTube, \n  Users, \n  Filter,\n  TrendingUp,\n  BarChart3,\n  Settings,\n  LogOut,\n  User,\n  UserCircle,\n  QrCode,\n  Package,\n  Clipboard\n} from \"lucide-react\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Button } from \"@/components/ui/button\";\n\nconst menuItems = [\n  {\n    title: \"Dashboard\",\n    url: \"/\",\n    icon: LayoutDashboard,\n  },\n  {\n    title: \"Gerenciamento\",\n    url: \"/gerenciamento\",\n    icon: BarChart3,\n  },\n  {\n    title: \"Nova Aposta\",\n    url: \"/upload\",\n    icon: Upload,\n  },\n  {\n    title: \"Enviar Lote de Apostas\",\n    url: \"/batch-upload\",\n    icon: Package,\n  },\n  {\n    title: \"Bet Burger\",\n    url: \"/bet-burger\",\n    icon: Clipboard,\n  },\n  {\n    title: \"Teste de OCR\",\n    url: \"/test-ocr\",\n    icon: TestTube,\n  },\n  {\n    title: \"Leitor QR\",\n    url: \"/qr-reader\",\n    icon: QrCode,\n  },\n];\n\nconst managementItems = [\n  {\n    title: \"Titulares\",\n    url: \"/account-holders\",\n    icon: Users,\n  },\n];\n\nexport function AppSidebar() {\n  const [location] = useLocation();\n  const { user, logoutMutation } = useAuth();\n\n  return (\n    <Sidebar className=\"border-r\">\n      <SidebarHeader className=\"p-4\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"p-2 bg-primary rounded-lg\">\n            <TrendingUp className=\"h-6 w-6 text-primary-foreground\" />\n          </div>\n          <div>\n            <h1 className=\"font-bold text-lg\">BetTracker Pro</h1>\n          </div>\n        </div>\n      </SidebarHeader>\n\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Menu Principal</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {menuItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton \n                    asChild\n                    isActive={location === item.url}\n                    data-testid={`nav-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}\n                  >\n                    <Link href={item.url}>\n                      <item.icon className=\"h-4 w-4\" />\n                      <span>{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n\n        <SidebarGroup>\n          <SidebarGroupLabel>Gerenciamento</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {managementItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton \n                    asChild\n                    isActive={location === item.url}\n                    data-testid={`nav-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}\n                  >\n                    <Link href={item.url}>\n                      <item.icon className=\"h-4 w-4\" />\n                      <span>{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n\n      <SidebarFooter className=\"p-4 border-t\">\n        {user && (\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-primary/10 rounded-full\">\n                <User className=\"h-4 w-4 text-primary\" />\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium truncate\">{user.name}</p>\n                <p className=\"text-xs text-muted-foreground truncate\">{user.email}</p>\n              </div>\n            </div>\n            <div className=\"flex gap-2\">\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"flex-1\"\n                asChild\n                data-testid=\"button-profile\"\n              >\n                <Link href=\"/profile\">\n                  <UserCircle className=\"h-4 w-4 mr-1\" />\n                  Perfil\n                </Link>\n              </Button>\n              {user.role === 'admin' && (\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\" \n                  className=\"flex-1\"\n                  asChild\n                  data-testid=\"button-settings\"\n                >\n                  <Link href=\"/users\">\n                    <Settings className=\"h-4 w-4 mr-1\" />\n                    Usuários\n                  </Link>\n                </Button>\n              )}\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                onClick={() => logoutMutation.mutate()}\n                disabled={logoutMutation.isPending}\n                data-testid=\"button-logout\"\n              >\n                <LogOut className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n        )}\n      </SidebarFooter>\n    </Sidebar>\n  );\n}","path":null,"size_bytes":5300,"size_tokens":null},"server/ocr-service.ts":{"content":"import type { OCRResult } from \"@shared/schema\";\n\ninterface MistralResponse {\n  choices: Array<{\n    message: {\n      content: string;\n    };\n  }>;\n}\n\ninterface MistralFileResponse {\n  id: string;\n  object: string;\n  bytes: number;\n  created_at: number;\n  filename: string;\n  purpose: string;\n}\n\nexport class OCRService {\n  private apiKey: string;\n  private baseUrl = \"https://api.mistral.ai/v1\";\n\n  constructor(apiKey: string) {\n    this.apiKey = apiKey;\n  }\n\n  private async uploadFile(fileBuffer: Buffer, filename: string): Promise<string> {\n    const formData = new FormData();\n    \n    const blob = new Blob([fileBuffer], { type: 'application/pdf' });\n    formData.append('file', blob, filename);\n    formData.append('purpose', 'ocr');\n\n    const response = await fetch(`${this.baseUrl}/files`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${this.apiKey}`,\n      },\n      body: formData,\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error(`Mistral Files API error: ${response.status} - ${errorText}`);\n    }\n\n    const data: MistralFileResponse = await response.json();\n    return data.id;\n  }\n\n  private generatePrompt(customPrompt?: string): string {\n    if (customPrompt) {\n      return customPrompt;\n    }\n\n    return `Analise o documento fornecido e extraia EXATAMENTE os dados como aparecem. NÃO use valores padrão, exemplos ou substitutos.\n\n**REGRAS DE EXTRAÇÃO RIGOROSA:**\n1. **ZERO FALLBACKS:** Se um campo não estiver visível, deixe vazio/nulo\n2. **TIPOS DE APOSTA:** Copie LITERALMENTE cada caractere da coluna \"Chance\" ou \"Mercado\"\n3. **CASAS DE APOSTAS:** Nome EXATO da primeira coluna de cada linha\n4. **ODDS:** Números exatos preservando pontos/vírgulas\n5. **VALORES:** Apenas números, ignorando símbolos de moeda\n6. **DATA:** Formato AAAA-MM-DD HH:MM do cabeçalho\n\n**Formato de Saída:**\nDATA: [AAAA-MM-DD HH:MM ou vazio]\nESPORTE: [nome exato ou vazio]\nLIGA: [nome exato ou vazio]\nTime A: [nome exato ou vazio]\nTime B: [nome exato ou vazio]\nAPOSTA 1:\nCasa: [nome exato ou vazio]\nOdd: [valor exato ou vazio]\nTipo: [texto exato da coluna Chance/Mercado ou vazio]\nStake: [valor exato ou vazio]\nLucro: [valor exato ou vazio]\nAPOSTA 2:\nCasa: [nome exato ou vazio]\nOdd: [valor exato ou vazio]\nTipo: [texto exato da coluna Chance/Mercado ou vazio]\nStake: [valor exato ou vazio]\nLucro: [valor exato ou vazio]\nLucro%: [valor exato ou vazio]`;\n  }\n\n  async processDocument(fileBuffer: Buffer, mimeType: string, customPrompt?: string): Promise<OCRResult> {\n    try {\n      const prompt = this.generatePrompt(customPrompt);\n      let content: any[];\n\n      console.log(`Processing ${mimeType} with Pixtral Large`);\n\n      if (mimeType === 'application/pdf') {\n        // Upload PDF to Files API and use file reference\n        const fileId = await this.uploadFile(fileBuffer, 'document.pdf');\n        console.log(`Uploaded PDF with file ID: ${fileId}`);\n\n        content = [\n          {\n            type: \"text\",\n            text: prompt\n          },\n          {\n            type: \"file\",\n            file_id: fileId\n          }\n        ];\n      } else {\n        // Process images directly with base64\n        const base64Image = fileBuffer.toString('base64');\n        const dataUri = `data:${mimeType};base64,${base64Image}`;\n\n        content = [\n          {\n            type: \"text\",\n            text: prompt\n          },\n          {\n            type: \"image_url\",\n            image_url: {\n              url: dataUri\n            }\n          }\n        ];\n      }\n\n      const response = await fetch(`${this.baseUrl}/chat/completions`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${this.apiKey}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          model: \"pixtral-large-2411\",\n          messages: [\n            {\n              role: \"user\",\n              content: content\n            }\n          ],\n          max_tokens: 2000,\n          temperature: 0.1\n        })\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Mistral API Error:', errorText);\n        throw new Error(`Mistral API error: ${response.status} - ${errorText}`);\n      }\n\n      const data: MistralResponse = await response.json();\n      const responseContent = data.choices[0]?.message?.content;\n\n      if (!responseContent) {\n        throw new Error('No response content from Mistral API');\n      }\n\n      console.log('Pixtral Large Raw Response:', responseContent);\n\n      return this.parseResponse(responseContent);\n\n    } catch (error) {\n      console.error('OCR processing error:', error);\n      throw new Error(`Failed to process document: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n  }\n\n  private parseResponse(content: string): OCRResult {\n    const extractValue = (text: string, label: string): string => {\n      const regex = new RegExp(`${label}:\\\\s*(.+)`, 'i');\n      const match = text.match(regex);\n      return match ? match[1].trim() : '';\n    };\n\n    // Extract main data\n    const dateRaw = extractValue(content, 'DATA');\n    const sport = extractValue(content, 'ESPORTE');\n    const league = extractValue(content, 'LIGA');\n    const teamA = extractValue(content, 'Time A');\n    const teamB = extractValue(content, 'Time B');\n    const profitPercentage = extractValue(content, 'Lucro%');\n\n    console.log('Extracted values:', { dateRaw, sport, league, teamA, teamB, profitPercentage });\n\n    // Process date WITHOUT fallbacks\n    let formattedDate = '';\n    if (dateRaw && dateRaw.trim() && dateRaw !== 'vazio') {\n      const isoMatch = dateRaw.match(/(\\d{4}-\\d{2}-\\d{2})\\s*(\\d{2}:\\d{2})/);\n      if (isoMatch) {\n        const [, datePart, timePart] = isoMatch;\n        formattedDate = `${datePart}T${timePart}`;\n      } else {\n        const dateMatch = dateRaw.match(/(\\d{2}\\/\\d{2}\\/\\d{4})\\s*(\\d{2}:\\d{2})/);\n        if (dateMatch) {\n          const [, datePart, timePart] = dateMatch;\n          const [day, month, year] = datePart.split('/');\n          formattedDate = `${year}-${month}-${day}T${timePart}`;\n        }\n      }\n    }\n\n    // Extract APOSTA 1 data\n    const aposta1Section = content.match(/APOSTA 1:([\\s\\S]*?)(?=APOSTA 2:|$)/)?.[1] || '';\n    const bet1House = extractValue(aposta1Section, 'Casa');\n    const bet1Odd = extractValue(aposta1Section, 'Odd');\n    const bet1Type = extractValue(aposta1Section, 'Tipo');\n    const bet1Stake = extractValue(aposta1Section, 'Stake');\n    const bet1Profit = extractValue(aposta1Section, 'Lucro');\n\n    // Extract APOSTA 2 data\n    const aposta2Section = content.match(/APOSTA 2:([\\s\\S]*?)(?=Lucro%:|$)/)?.[1] || '';\n    const bet2House = extractValue(aposta2Section, 'Casa');\n    const bet2Odd = extractValue(aposta2Section, 'Odd');\n    const bet2Type = extractValue(aposta2Section, 'Tipo');\n    const bet2Stake = extractValue(aposta2Section, 'Stake');\n    const bet2Profit = extractValue(aposta2Section, 'Lucro');\n\n    // Process values WITHOUT defaults - return null for empty/invalid values\n    const processOdd = (oddStr: string): number | null => {\n      if (!oddStr || oddStr.trim() === '' || oddStr === 'vazio') return null;\n      const cleaned = oddStr.replace(',', '.');\n      const parsed = parseFloat(cleaned);\n      return isNaN(parsed) ? null : parsed;\n    };\n\n    const processAmount = (amountStr: string): number | null => {\n      if (!amountStr || amountStr.trim() === '' || amountStr === 'vazio') return null;\n      const cleaned = amountStr.replace(/[^\\d.,]/g, '').replace(',', '.');\n      const parsed = parseFloat(cleaned);\n      return isNaN(parsed) ? null : parsed;\n    };\n\n    const processPercentage = (percentStr: string): number | null => {\n      if (!percentStr || percentStr.trim() === '' || percentStr === 'vazio') return null;\n      const cleaned = percentStr.replace(/[^\\d.,]/g, '').replace(',', '.');\n      const parsed = parseFloat(cleaned);\n      return isNaN(parsed) ? null : parsed;\n    };\n\n    // Return extracted data with NULLs for missing values - NO FALLBACKS\n    return {\n      date: formattedDate || null,\n      sport: (sport && sport !== 'vazio') ? sport : null,\n      league: (league && league !== 'vazio') ? league : null,\n      teamA: (teamA && teamA !== 'vazio') ? teamA : null,\n      teamB: (teamB && teamB !== 'vazio') ? teamB : null,\n      bet1: {\n        house: (bet1House && bet1House !== 'vazio') ? bet1House : null,\n        odd: processOdd(bet1Odd),\n        type: (bet1Type && bet1Type !== 'vazio') ? bet1Type : null,\n        stake: processAmount(bet1Stake),\n        profit: processAmount(bet1Profit),\n      },\n      bet2: {\n        house: (bet2House && bet2House !== 'vazio') ? bet2House : null,\n        odd: processOdd(bet2Odd),\n        type: (bet2Type && bet2Type !== 'vazio') ? bet2Type : null,\n        stake: processAmount(bet2Stake),\n        profit: processAmount(bet2Profit),\n      },\n      profitPercentage: processPercentage(profitPercentage),\n    };\n  }\n\n  // Legacy methods for compatibility - all route to new implementation\n  async processImage(imageBase64: string, customPrompt?: string): Promise<OCRResult> {\n    const buffer = Buffer.from(imageBase64, 'base64');\n    return this.processDocument(buffer, 'image/jpeg', customPrompt);\n  }\n\n  async processImageFromBuffer(imageBuffer: Buffer, customPrompt?: string): Promise<OCRResult> {\n    return this.processDocument(imageBuffer, 'image/jpeg', customPrompt);\n  }\n\n  async processFileFromBuffer(fileBuffer: Buffer, mimeType: string, customPrompt?: string): Promise<OCRResult> {\n    return this.processDocument(fileBuffer, mimeType, customPrompt);\n  }\n\n  async processPDF(pdfBuffer: Buffer, customPrompt?: string): Promise<OCRResult> {\n    return this.processDocument(pdfBuffer, 'application/pdf', customPrompt);\n  }\n}","path":null,"size_bytes":9844,"size_tokens":null},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"pdfplumber>=0.11.7\",\n]\n","path":null,"size_bytes":170,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3848,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1592,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10481,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/pages/management.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { BetCard } from \"@/components/bet-card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { DatePickerWithRange } from \"@/components/ui/date-range-picker\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { TrendingUp, DollarSign, Clock, CheckCircle, XCircle, X, ArrowUpDown, Plus, RotateCcw, Loader2, RefreshCw, TrendingDown, ListChecks } from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport type { SurebetSetWithBets, BettingHouse, BettingHouseWithAccountHolder } from \"@shared/schema\";\nimport type { DateRange } from \"react-day-picker\";\n\ninterface FilterValues {\n  status?: string;\n  checked?: string;\n  house?: string;\n  eventDateRange?: DateRange;\n  createdDateRange?: DateRange;\n}\n\nconst removeAccents = (str: string): string => {\n  return str.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n};\n\nexport default function Management() {\n  const [filters, setFilters] = useState<FilterValues>({ status: 'pending' });\n  const [tempFilters, setTempFilters] = useState<FilterValues>({ status: 'pending' });\n  const [chronologicalSort, setChronologicalSort] = useState(true);\n  const [, setLocation] = useLocation();\n  const [editingBet, setEditingBet] = useState<any>(null);\n  const [editingNumericFields, setEditingNumericFields] = useState<{\n    profitPercentage: string;\n    bet1Odd: string;\n    bet1Stake: string;\n    bet2Odd: string;\n    bet2Stake: string;\n  }>({ profitPercentage: '', bet1Odd: '', bet1Stake: '', bet2Odd: '', bet2Stake: '' });\n  const [lastUpdate, setLastUpdate] = useState(new Date());\n  const [timeDisplay, setTimeDisplay] = useState('Agora mesmo');\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [deletingBetId, setDeletingBetId] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState('');\n\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      const now = new Date();\n      const diffInSeconds = Math.floor((now.getTime() - lastUpdate.getTime()) / 1000);\n\n      if (diffInSeconds < 60) {\n        setTimeDisplay(`Há ${diffInSeconds}s`);\n      } else if (diffInSeconds < 3600) {\n        const diffInMinutes = Math.floor(diffInSeconds / 60);\n        setTimeDisplay(`Há ${diffInMinutes}m`);\n      } else if (diffInSeconds < 86400) {\n        const diffInHours = Math.floor(diffInSeconds / 3600);\n        setTimeDisplay(`Há ${diffInHours}h`);\n      } else {\n        const diffInDays = Math.floor(diffInSeconds / 86400);\n        setTimeDisplay(`Há ${diffInDays}d`);\n      }\n    }, 1000);\n\n    return () => clearInterval(intervalId);\n  }, [lastUpdate]);\n\n  // Load surebet sets from the API - optimized with staleTime\n  const { data: surebetSets = [], isLoading, refetch, error } = useQuery<SurebetSetWithBets[]>({\n    queryKey: [\"/api/surebet-sets\"],\n    staleTime: 30000, // Cache for 30 seconds to optimize performance\n    refetchInterval: 60000,\n  });\n\n  const handleRefresh = async () => {\n    setIsRefreshing(true);\n    try {\n      await refetch();\n      setLastUpdate(new Date());\n      setTimeDisplay('Agora mesmo');\n    } finally {\n      setIsRefreshing(false);\n    }\n  };\n\n  // Load betting houses from API - optimized with staleTime\n  const { data: bettingHouses = [] } = useQuery<BettingHouseWithAccountHolder[]>({\n    queryKey: [\"/api/betting-houses\"],\n    staleTime: 300000, // Cache for 5 minutes (betting houses don't change often)\n  });\n\n  // Mutation for updating bet results\n  const updateBetMutation = useMutation({\n    mutationFn: async ({ betId, result }: { betId: string; result: \"won\" | \"lost\" | \"returned\" | \"half_won\" | \"half_returned\" }) => {\n      const response = await apiRequest(\"PUT\", `/api/bets/${betId}`, { result });\n      return response.json();\n    },\n    onMutate: async ({ betId, result }) => {\n      await queryClient.cancelQueries({ queryKey: [\"/api/surebet-sets\"] });\n      const previousData = queryClient.getQueryData<SurebetSetWithBets[]>([\"/api/surebet-sets\"]);\n\n      queryClient.setQueryData<SurebetSetWithBets[]>([\"/api/surebet-sets\"], (old) => {\n        if (!old) return old;\n        return old.map(set => {\n          // Check if this set contains the bet being updated\n          const hasBet = set.bets.some(b => b.id === betId);\n          if (!hasBet) return set;\n\n          // Clear actualProfit for ALL bets in the set to avoid showing stale values\n          const updatedBets = set.bets.map(bet => \n            bet.id === betId \n              ? { ...bet, result, actualProfit: null }\n              : { ...bet, actualProfit: null }\n          );\n          \n          const allHaveResults = updatedBets.every(b => b.result != null);\n          return {\n            ...set,\n            bets: updatedBets,\n            status: allHaveResults ? \"resolved\" : set.status\n          };\n        });\n      });\n\n      return { previousData };\n    },\n    onSuccess: (updatedBet) => {\n      // Update all bets in the set with the actualProfit from backend\n      queryClient.setQueryData<SurebetSetWithBets[]>([\"/api/surebet-sets\"], (old) => {\n        if (!old) return old;\n        return old.map(set => {\n          const hasBet = set.bets.some(b => b.id === updatedBet.id);\n          if (!hasBet) return set;\n\n          // Update ALL bets in the set with the actualProfit (backend calculated it for all)\n          const updatedBets = set.bets.map(bet => \n            bet.id === updatedBet.id \n              ? { ...bet, ...updatedBet } // Update the modified bet\n              : updatedBet.actualProfit !== null && updatedBet.actualProfit !== undefined\n                ? { ...bet, actualProfit: updatedBet.actualProfit } // Sync actualProfit to siblings\n                : bet\n          );\n          \n          return {\n            ...set,\n            bets: updatedBets,\n            status: updatedBet.actualProfit !== null ? \"resolved\" : set.status\n          };\n        });\n      });\n    },\n    onError: (err, variables, context) => {\n      if (context?.previousData) {\n        queryClient.setQueryData([\"/api/surebet-sets\"], context.previousData);\n      }\n    },\n    onSettled: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/surebet-sets\"] });\n      setLastUpdate(new Date());\n      setTimeDisplay('Agora mesmo');\n    },\n  });\n\n  // Mutation for checking/unchecking surebet set\n  const updateStatusMutation = useMutation({\n    mutationFn: async ({ surebetSetId, isChecked }: { surebetSetId: string; isChecked: boolean }) => {\n      const response = await apiRequest(\"PATCH\", `/api/surebet-sets/${surebetSetId}/status`, { isChecked });\n      return response.json();\n    },\n    onMutate: async ({ surebetSetId, isChecked }) => {\n      await queryClient.cancelQueries({ queryKey: [\"/api/surebet-sets\"] });\n      const previousData = queryClient.getQueryData<SurebetSetWithBets[]>([\"/api/surebet-sets\"]);\n\n      queryClient.setQueryData<SurebetSetWithBets[]>([\"/api/surebet-sets\"], (old) => {\n        if (!old) return old;\n        return old.map(set => \n          set.id === surebetSetId ? { ...set, isChecked } : set\n        );\n      });\n\n      return { previousData };\n    },\n    onError: (err, variables, context) => {\n      if (context?.previousData) {\n        queryClient.setQueryData([\"/api/surebet-sets\"], context.previousData);\n      }\n    },\n    onSettled: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/surebet-sets\"] });\n      setLastUpdate(new Date());\n      setTimeDisplay('Agora mesmo');\n    },\n  });\n\n  // Mutation for reset\n  const resetMutation = useMutation({\n    mutationFn: async (surebetSetId: string) => {\n      const response = await apiRequest(\"POST\", `/api/surebet-sets/${surebetSetId}/reset`);\n      return response.json();\n    },\n    onMutate: async (surebetSetId) => {\n      await queryClient.cancelQueries({ queryKey: [\"/api/surebet-sets\"] });\n      const previousData = queryClient.getQueryData<SurebetSetWithBets[]>([\"/api/surebet-sets\"]);\n\n      queryClient.setQueryData<SurebetSetWithBets[]>([\"/api/surebet-sets\"], (old) => {\n        if (!old) return old;\n        return old.map(set => {\n          if (set.id === surebetSetId) {\n            return {\n              ...set,\n              status: \"pending\",\n              bets: set.bets.map(bet => ({\n                ...bet,\n                result: null,\n                actualProfit: null\n              }))\n            };\n          }\n          return set;\n        });\n      });\n\n      return { previousData };\n    },\n    onError: (err, variables, context) => {\n      if (context?.previousData) {\n        queryClient.setQueryData([\"/api/surebet-sets\"], context.previousData);\n      }\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/surebet-sets\"] });\n      setLastUpdate(new Date());\n      setTimeDisplay('Agora mesmo');\n    },\n  });\n\n  // Mutation for delete with optimistic update\n  const deleteMutation = useMutation({\n    mutationFn: async (surebetSetId: string) => {\n      const response = await apiRequest(\"DELETE\", `/api/surebet-sets/${surebetSetId}`);\n      return response.json();\n    },\n    onMutate: async (surebetSetId) => {\n      // Cancel outgoing refetches\n      await queryClient.cancelQueries({ queryKey: [\"/api/surebet-sets\"] });\n\n      // Snapshot previous value\n      const previousData = queryClient.getQueryData<SurebetSetWithBets[]>([\"/api/surebet-sets\"]);\n\n      // Optimistically remove the bet from the list\n      queryClient.setQueryData<SurebetSetWithBets[]>([\"/api/surebet-sets\"], (old) => {\n        if (!old) return old;\n        return old.filter(set => set.id !== surebetSetId);\n      });\n\n      return { previousData };\n    },\n    onError: (err, variables, context) => {\n      // Rollback on error\n      if (context?.previousData) {\n        queryClient.setQueryData([\"/api/surebet-sets\"], context.previousData);\n      }\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/surebet-sets\"] });\n      setLastUpdate(new Date());\n      setTimeDisplay('Agora mesmo');\n      setDeletingBetId(null);\n    },\n  });\n\n  // Mutation for updating surebet set and bets\n  const updateSurebetMutation = useMutation({\n    mutationFn: async (data: any) => {\n      await apiRequest(\"PUT\", `/api/surebet-sets/${data.id}`, {\n        eventDate: data.eventDate,\n        sport: data.sport,\n        league: data.league,\n        teamA: data.teamA,\n        teamB: data.teamB,\n        profitPercentage: String(data.profitPercentage),\n      });\n\n      await apiRequest(\"PUT\", `/api/bets/${data.bet1.id}`, {\n        bettingHouseId: data.bet1.bettingHouseId,\n        betType: data.bet1.betType,\n        odd: String(data.bet1.odd),\n        stake: String(data.bet1.stake),\n      });\n\n      await apiRequest(\"PUT\", `/api/bets/${data.bet2.id}`, {\n        bettingHouseId: data.bet2.bettingHouseId,\n        betType: data.bet2.betType,\n        odd: String(data.bet2.odd),\n        stake: String(data.bet2.stake),\n      });\n      \n      return data;\n    },\n    onMutate: async (data) => {\n      await queryClient.cancelQueries({ queryKey: [\"/api/surebet-sets\"] });\n      const previousData = queryClient.getQueryData<SurebetSetWithBets[]>([\"/api/surebet-sets\"]);\n\n      queryClient.setQueryData<SurebetSetWithBets[]>([\"/api/surebet-sets\"], (old) => {\n        if (!old) return old;\n        return old.map(set => {\n          if (set.id === data.id) {\n            return {\n              ...set,\n              eventDate: data.eventDate,\n              sport: data.sport,\n              league: data.league,\n              teamA: data.teamA,\n              teamB: data.teamB,\n              profitPercentage: String(data.profitPercentage),\n              bets: set.bets.map((bet, index) => {\n                if (index === 0) {\n                  return {\n                    ...bet,\n                    bettingHouseId: data.bet1.bettingHouseId,\n                    betType: data.bet1.betType,\n                    odd: String(data.bet1.odd),\n                    stake: String(data.bet1.stake),\n                  };\n                } else {\n                  return {\n                    ...bet,\n                    bettingHouseId: data.bet2.bettingHouseId,\n                    betType: data.bet2.betType,\n                    odd: String(data.bet2.odd),\n                    stake: String(data.bet2.stake),\n                  };\n                }\n              })\n            };\n          }\n          return set;\n        });\n      });\n\n      return { previousData };\n    },\n    onError: (err, variables, context) => {\n      if (context?.previousData) {\n        queryClient.setQueryData([\"/api/surebet-sets\"], context.previousData);\n      }\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/surebet-sets\"] });\n      setEditingBet(null);\n      setLastUpdate(new Date());\n      setTimeDisplay('Agora mesmo');\n    },\n  });\n\n  // Transform data\n  const transformedBets = (surebetSets || [])\n    .map((set) => {\n      // Backend já ordena as apostas por createdAt - não reordenar aqui\n      const sortedBets = set.bets;\n\n      return {\n        id: set.id,\n        eventDate: typeof set.eventDate === 'string' ? set.eventDate : (set.eventDate instanceof Date ? set.eventDate.toISOString() : new Date().toISOString()),\n        createdAt: typeof set.createdAt === 'string' ? set.createdAt : (set.createdAt instanceof Date ? set.createdAt.toISOString() : new Date().toISOString()),\n        sport: set.sport || \"N/A\",\n        league: set.league || \"N/A\",\n        teamA: set.teamA || \"Time A\",\n        teamB: set.teamB || \"Time B\",\n        profitPercentage: Number(set.profitPercentage) || 0,\n        status: (set.status || \"pending\") as \"pending\" | \"resolved\",\n        isChecked: set.isChecked || false,\n        bet1: {\n          id: sortedBets[0]?.id || \"\",\n          bettingHouseId: sortedBets[0]?.bettingHouseId || \"\",\n          house: sortedBets[0]?.bettingHouse?.name || \"Casa 1\",\n          accountHolder: sortedBets[0]?.bettingHouse?.accountHolder?.name || \"\",\n          betType: sortedBets[0]?.betType || \"N/A\",\n          odd: Number(sortedBets[0]?.odd) || 0,\n          stake: Number(sortedBets[0]?.stake) || 0,\n          potentialProfit: Number(sortedBets[0]?.potentialProfit) || 0,\n          actualProfit: sortedBets[0]?.actualProfit !== undefined && sortedBets[0]?.actualProfit !== null ? Number(sortedBets[0].actualProfit) : undefined,\n          result: sortedBets[0]?.result as \"won\" | \"lost\" | \"returned\" | \"half_won\" | \"half_returned\" | undefined,\n        },\n        bet2: {\n          id: sortedBets[1]?.id || \"\",\n          bettingHouseId: sortedBets[1]?.bettingHouseId || \"\",\n          house: sortedBets[1]?.bettingHouse?.name || \"Casa 2\",\n          accountHolder: sortedBets[1]?.bettingHouse?.accountHolder?.name || \"\",\n          betType: sortedBets[1]?.betType || \"N/A\",\n          odd: Number(sortedBets[1]?.odd) || 0,\n          stake: Number(sortedBets[1]?.stake) || 0,\n          potentialProfit: Number(sortedBets[1]?.potentialProfit) || 0,\n          actualProfit: sortedBets[1]?.actualProfit !== undefined && sortedBets[1]?.actualProfit !== null ? Number(sortedBets[1].actualProfit) : undefined,\n          result: sortedBets[1]?.result as \"won\" | \"lost\" | \"returned\" | \"half_won\" | \"half_returned\" | undefined,\n        },\n        // bet3 is optional - only include if there's a third bet\n        ...(sortedBets[2] && {\n          bet3: {\n            id: sortedBets[2].id,\n            bettingHouseId: sortedBets[2].bettingHouseId,\n            house: sortedBets[2].bettingHouse?.name || \"Casa 3\",\n            accountHolder: sortedBets[2].bettingHouse?.accountHolder?.name || \"\",\n            betType: sortedBets[2].betType || \"N/A\",\n            odd: Number(sortedBets[2].odd) || 0,\n            stake: Number(sortedBets[2].stake) || 0,\n            potentialProfit: Number(sortedBets[2].potentialProfit) || 0,\n            actualProfit: sortedBets[2].actualProfit !== undefined && sortedBets[2].actualProfit !== null ? Number(sortedBets[2].actualProfit) : undefined,\n            result: sortedBets[2].result as \"won\" | \"lost\" | \"returned\" | \"half_won\" | \"half_returned\" | undefined,\n          }\n        }),\n      };\n    });\n\n  // Apply filters\n  const filteredBets = transformedBets.filter((bet) => {\n    // Apply search query filter\n    if (searchQuery) {\n      const query = removeAccents(searchQuery.toLowerCase().trim());\n      const searchableText = removeAccents(`${bet.teamA} ${bet.teamB} ${bet.sport} ${bet.league}`.toLowerCase());\n      if (!searchableText.includes(query)) {\n        return false;\n      }\n    }\n\n    if (filters.status && bet.status !== filters.status) return false;\n    \n    if (filters.checked) {\n      // Filtro de conferência só mostra apostas pendentes\n      if (bet.status !== \"pending\") return false;\n      if (filters.checked === \"checked\" && !bet.isChecked) return false;\n      if (filters.checked === \"unchecked\" && bet.isChecked) return false;\n    }\n    \n    if (filters.house) {\n      const hasHouse = bet.bet1.house === filters.house || bet.bet2.house === filters.house;\n      if (!hasHouse) return false;\n    }\n\n    if (filters.eventDateRange?.from || filters.eventDateRange?.to) {\n      const eventDate = new Date(bet.eventDate);\n      if (filters.eventDateRange.from) {\n        const fromDate = new Date(filters.eventDateRange.from);\n        fromDate.setHours(0, 0, 0, 0);\n        if (eventDate < fromDate) return false;\n      }\n      if (filters.eventDateRange.to) {\n        const toDate = new Date(filters.eventDateRange.to);\n        toDate.setHours(23, 59, 59, 999);\n        if (eventDate > toDate) return false;\n      }\n    }\n\n    if (filters.createdDateRange?.from || filters.createdDateRange?.to) {\n      const createdDate = new Date(bet.createdAt);\n      if (filters.createdDateRange.from) {\n        const fromDate = new Date(filters.createdDateRange.from);\n        fromDate.setHours(0, 0, 0, 0);\n        if (createdDate < fromDate) return false;\n      }\n      if (filters.createdDateRange.to) {\n        const toDate = new Date(filters.createdDateRange.to);\n        toDate.setHours(23, 59, 59, 999);\n        if (createdDate > toDate) return false;\n      }\n    }\n\n    return true;\n  })\n  .sort((a, b) => {\n    if (chronologicalSort) {\n      // Ordenar por data do evento (mais antiga primeiro)\n      return new Date(a.eventDate).getTime() - new Date(b.eventDate).getTime();\n    }\n    // Ordenação padrão (por ordem de criação)\n    return 0;\n  });\n\n  // Calculate metrics\n  const pendingBets = filteredBets.filter(bet => bet.status === \"pending\");\n  const resolvedBets = filteredBets.filter(bet => bet.status === \"resolved\");\n\n  // Calculate stakes (supports 2 or 3 bets)\n  const totalStakePending = pendingBets.reduce((sum, bet) => {\n    let stake = bet.bet1.stake + bet.bet2.stake;\n    if (bet.bet3) stake += bet.bet3.stake;\n    return sum + stake;\n  }, 0);\n  \n  const totalStakeResolved = resolvedBets.reduce((sum, bet) => {\n    let stake = bet.bet1.stake + bet.bet2.stake;\n    if (bet.bet3) stake += bet.bet3.stake;\n    return sum + stake;\n  }, 0);\n  \n  const totalStake = totalStakePending + totalStakeResolved;\n\n  // Calculate real profit for resolved bets using actualProfit from database (supports 2 or 3 bets)\n  const calculateRealProfit = (bet: typeof filteredBets[0]) => {\n    const { bet1, bet2, bet3 } = bet;\n    \n    // For triple bets, all 3 must have results\n    if (bet3) {\n      if (!bet1.result || !bet2.result || !bet3.result) return 0;\n      \n      // Use actualProfit from database (all bets have same value)\n      if (bet3.actualProfit !== undefined && bet3.actualProfit !== null) {\n        return parseFloat(String(bet3.actualProfit));\n      }\n    } else {\n      // For dual bets, both must have results\n      if (!bet1.result || !bet2.result) return 0;\n    }\n\n    // Use actualProfit from database (all bets have same value)\n    if (bet1.actualProfit !== undefined && bet1.actualProfit !== null) {\n      return parseFloat(String(bet1.actualProfit));\n    }\n    if (bet2.actualProfit !== undefined && bet2.actualProfit !== null) {\n      return parseFloat(String(bet2.actualProfit));\n    }\n    \n    return 0;\n  };\n\n  const totalProfitResolved = resolvedBets.reduce((sum, bet) => sum + calculateRealProfit(bet), 0);\n  \n  // Calculate potential profit for pending bets (supports 2 or 3 bets)\n  const totalProfitPending = pendingBets.reduce((sum, bet) => {\n    // Use the first bet's potential profit (they should all be the same for a surebet)\n    return sum + bet.bet1.potentialProfit;\n  }, 0);\n  const totalProfitTotal = totalProfitResolved + totalProfitPending;\n\n  const handleTempFilterChange = (key: keyof FilterValues, value: any) => {\n    setTempFilters({ ...tempFilters, [key]: value === 'all' ? undefined : value });\n  };\n\n  const applyFilters = () => {\n    setFilters(tempFilters);\n  };\n\n  const clearFilters = () => {\n    setFilters({});\n    setTempFilters({});\n  };\n\n  const hasActiveFilters = Object.values(filters).some(value => {\n    if (value === undefined || value === \"\" || value === null) return false;\n    if (typeof value === 'object' && value !== null) {\n      return Object.values(value).some(v => v !== undefined);\n    }\n    return true;\n  });\n\n  const uniqueHouseNames = Array.from(new Set(bettingHouses.map(house => house.name)));\n\n  const handleEdit = (surebetSetId: string) => {\n    const bet = transformedBets.find(b => b.id === surebetSetId);\n    if (bet) {\n      // Extrai data/hora diretamente da string ISO sem conversão de timezone\n      // Formato esperado: \"2025-10-02T22:00:00.000Z\" -> \"2025-10-02T22:00\"\n      const eventDateStr = String(bet.eventDate);\n      const dateTimeLocal = eventDateStr.substring(0, 16);\n\n      setEditingBet({\n        id: bet.id,\n        eventDate: dateTimeLocal,\n        sport: bet.sport,\n        league: bet.league,\n        teamA: bet.teamA,\n        teamB: bet.teamB,\n        profitPercentage: bet.profitPercentage,\n        bet1: {\n          id: bet.bet1.id,\n          bettingHouseId: bet.bet1.bettingHouseId,\n          house: bet.bet1.house,\n          accountHolder: bet.bet1.accountHolder,\n          betType: bet.bet1.betType,\n          odd: bet.bet1.odd,\n          stake: bet.bet1.stake,\n        },\n        bet2: {\n          id: bet.bet2.id,\n          bettingHouseId: bet.bet2.bettingHouseId,\n          house: bet.bet2.house,\n          accountHolder: bet.bet2.accountHolder,\n          betType: bet.bet2.betType,\n          odd: bet.bet2.odd,\n          stake: bet.bet2.stake,\n        },\n      });\n\n      setEditingNumericFields({\n        profitPercentage: bet.profitPercentage.toString().replace('.', ','),\n        bet1Odd: bet.bet1.odd.toString().replace('.', ','),\n        bet1Stake: bet.bet1.stake.toString().replace('.', ','),\n        bet2Odd: bet.bet2.odd.toString().replace('.', ','),\n        bet2Stake: bet.bet2.stake.toString().replace('.', ','),\n      });\n    }\n  };\n\n  const handleSaveEdit = () => {\n    if (!editingBet) return;\n\n    const profitPercentage = parseFloat(editingNumericFields.profitPercentage.replace(',', '.'));\n    const bet1Odd = parseFloat(editingNumericFields.bet1Odd.replace(',', '.'));\n    const bet1Stake = parseFloat(editingNumericFields.bet1Stake.replace(',', '.'));\n    const bet2Odd = parseFloat(editingNumericFields.bet2Odd.replace(',', '.'));\n    const bet2Stake = parseFloat(editingNumericFields.bet2Stake.replace(',', '.'));\n\n    updateSurebetMutation.mutate({\n      ...editingBet,\n      profitPercentage,\n      bet1: { ...editingBet.bet1, odd: bet1Odd, stake: bet1Stake },\n      bet2: { ...editingBet.bet2, odd: bet2Odd, stake: bet2Stake },\n    });\n  };\n\n  return (\n    <div className=\"container mx-auto p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Gerenciamento</h1>\n          <p className=\"text-muted-foreground\">\n            Análise detalhada de apostas\n            {hasActiveFilters && (\n              <span className=\"ml-2 text-primary font-medium\" data-testid=\"text-filtered-count\">\n                • {filteredBets.length} {filteredBets.length === 1 ? 'resultado' : 'resultados'}\n              </span>\n            )}\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button\n            variant={chronologicalSort ? \"default\" : \"outline\"}\n            onClick={() => setChronologicalSort(!chronologicalSort)}\n            data-testid=\"button-chronological-sort-management\"\n          >\n            <ArrowUpDown className=\"w-4 h-4 mr-2\" />\n            {chronologicalSort ? \"Ordenado por Data\" : \"Ordenar por Data\"}\n          </Button>\n          <Link href=\"/upload\">\n            <Button data-testid=\"button-new-bet-management\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Nova Aposta\n            </Button>\n          </Link>\n        </div>\n      </div>\n\n      {/* Metrics Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\n        <Card data-testid=\"card-total-bets\">\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total de Apostas</CardTitle>\n            <ListChecks className=\"h-4 w-4 text-primary\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-primary\">\n              {filteredBets.length}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              {pendingBets.length} pendentes • {resolvedBets.length} resolvidas\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-profit-total\">\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Lucro Total do Período</CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-primary\" />\n          </CardHeader>\n          <CardContent>\n            <div className={`text-2xl font-bold ${totalProfitTotal >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n              R$ {totalProfitTotal.toFixed(2)}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Resolvido + Pendente\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-profit-resolved\">\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Lucro Resolvido</CardTitle>\n            <CheckCircle className=\"h-4 w-4 text-green-600\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">\n              R$ {totalProfitResolved.toFixed(2)}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              {resolvedBets.length} apostas resolvidas\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-profit-pending\">\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Lucro Pendente</CardTitle>\n            <Clock className=\"h-4 w-4 text-orange-600\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-orange-600\">\n              R$ {totalProfitPending.toFixed(2)}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              {pendingBets.length} apostas pendentes\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-stake-pending\">\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Valor Apostado (Pendente)</CardTitle>\n            <DollarSign className=\"h-4 w-4 text-blue-600\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">R$ {totalStakePending.toFixed(2)}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              Em andamento\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters */}\n      <Card data-testid=\"card-filters\">\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle>Filtros</CardTitle>\n            {hasActiveFilters && (\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                onClick={clearFilters}\n                data-testid=\"button-clear-filters\"\n              >\n                <X className=\"h-4 w-4 mr-1\" />\n                Limpar\n              </Button>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"status-filter\" className=\"text-sm\">Status</Label>\n              <Select \n                value={tempFilters.status || \"\"} \n                onValueChange={(value) => handleTempFilterChange(\"status\", value || undefined)}\n              >\n                <SelectTrigger id=\"status-filter\" data-testid=\"select-status-filter\" className=\"w-full\">\n                  <SelectValue placeholder=\"Todos\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Todos</SelectItem>\n                  <SelectItem value=\"pending\">Pendentes</SelectItem>\n                  <SelectItem value=\"resolved\">Resolvidas</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"checked-filter\" className=\"text-sm\">Conferência</Label>\n              <Select \n                value={tempFilters.checked || \"\"} \n                onValueChange={(value) => handleTempFilterChange(\"checked\", value || undefined)}\n              >\n                <SelectTrigger id=\"checked-filter\" data-testid=\"select-checked-filter\" className=\"w-full\">\n                  <SelectValue placeholder=\"Todas\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Todas</SelectItem>\n                  <SelectItem value=\"checked\">Conferido</SelectItem>\n                  <SelectItem value=\"unchecked\">Não Conferido</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"house-filter\" className=\"text-sm\">Casa de Apostas</Label>\n              <Select \n                value={tempFilters.house || \"\"} \n                onValueChange={(value) => handleTempFilterChange(\"house\", value || undefined)}\n              >\n                <SelectTrigger id=\"house-filter\" data-testid=\"select-house-filter\" className=\"w-full\">\n                  <SelectValue placeholder=\"Todas\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Todas</SelectItem>\n                  {uniqueHouseNames.map((house) => (\n                    <SelectItem key={house} value={house}>\n                      {house}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label className=\"text-sm\">Data do Jogo</Label>\n              <DatePickerWithRange\n                selected={tempFilters.eventDateRange}\n                onSelect={(range) => setTempFilters({ ...tempFilters, eventDateRange: range })}\n                placeholder=\"Selecione o período\"\n                data-testid=\"event-date-range-filter\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label className=\"text-sm\">Data de Inserção</Label>\n              <DatePickerWithRange\n                selected={tempFilters.createdDateRange}\n                onSelect={(range) => setTempFilters({ ...tempFilters, createdDateRange: range })}\n                placeholder=\"Selecione o período\"\n                data-testid=\"created-date-range-filter\"\n              />\n            </div>\n          </div>\n\n          <div className=\"flex justify-end\">\n            <Button\n              onClick={applyFilters}\n              data-testid=\"button-apply-filters\"\n              className=\"w-full md:w-auto\"\n            >\n              Aplicar Filtros\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Bet Cards */}\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between gap-4\">\n          <div className=\"flex items-center gap-3 flex-1\">\n            <h2 className=\"text-xl font-semibold whitespace-nowrap\">\n              Apostas Ativas ({filteredBets.length} {filteredBets.length === 1 ? 'aposta' : 'apostas'})\n            </h2>\n            <Input\n              type=\"text\"\n              placeholder=\"Buscar por time, esporte ou liga...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"max-w-xs\"\n              data-testid=\"input-search-bets-management\"\n            />\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-sm text-muted-foreground\" data-testid=\"text-last-update\">\n              Atualizado: {timeDisplay}\n            </span>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={handleRefresh}\n              disabled={isRefreshing}\n              data-testid=\"button-refresh-management\"\n            >\n              {isRefreshing ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Atualizando...\n                </>\n              ) : (\n                <>\n                  <RefreshCw className=\"w-4 h-4 mr-2\" />\n                  Atualizar\n                </>\n              )}\n            </Button>\n          </div>\n        </div>\n        {isLoading ? (\n          <Card>\n            <CardContent className=\"flex flex-col items-center justify-center py-12\">\n              <Loader2 className=\"h-12 w-12 animate-spin text-muted-foreground mb-4\" />\n              <h3 className=\"text-lg font-semibold mb-2\">Carregando apostas...</h3>\n              <p className=\"text-muted-foreground text-center\">\n                Buscando suas surebets no banco de dados\n              </p>\n            </CardContent>\n          </Card>\n        ) : error ? (\n          <Card>\n            <CardContent className=\"flex flex-col items-center justify-center py-12\">\n              <TrendingDown className=\"h-12 w-12 text-destructive mb-4\" />\n              <h3 className=\"text-lg font-semibold mb-2\">Erro ao carregar apostas</h3>\n              <p className=\"text-muted-foreground text-center mb-4\">\n                Não foi possível carregar as apostas. Tente novamente.\n              </p>\n              <Button onClick={handleRefresh}>\n                Tentar novamente\n              </Button>\n            </CardContent>\n          </Card>\n        ) : filteredBets.length === 0 ? (\n          <Card>\n            <CardContent className=\"flex flex-col items-center justify-center py-12\">\n              <TrendingUp className=\"h-12 w-12 text-muted-foreground mb-4\" />\n              <h3 className=\"text-lg font-semibold mb-2\">Nenhuma aposta encontrada</h3>\n              <p className=\"text-muted-foreground text-center mb-4\">\n                {hasActiveFilters ? \"Nenhuma aposta encontrada com os filtros aplicados\" : \"Comece adicionando sua primeira aposta surebet\"}\n              </p>\n              {!hasActiveFilters && (\n                <Link href=\"/upload\">\n                  <Button>\n                    <Plus className=\"w-4 h-4 mr-2\" />\n                    Adicionar Aposta\n                  </Button>\n                </Link>\n              )}\n            </CardContent>\n          </Card>\n        ) : (\n          filteredBets.map((bet) => (\n            <BetCard\n              key={bet.id}\n              {...bet}\n              onResolve={(betId, result) => updateBetMutation.mutate({ betId, result })}\n              onStatusChange={(surebetSetId, isChecked) => updateStatusMutation.mutate({ surebetSetId, isChecked })}\n              onReset={(surebetSetId) => resetMutation.mutate(surebetSetId)}\n              onEdit={handleEdit}\n              onDelete={(surebetSetId) => setDeletingBetId(surebetSetId)}\n              isResetting={resetMutation.isPending}\n            />\n          ))\n        )}\n      </div>\n\n      {/* Edit Dialog */}\n      <Dialog open={!!editingBet} onOpenChange={(open) => !open && setEditingBet(null)}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>Editar Aposta Surebet</DialogTitle>\n          </DialogHeader>\n\n          {editingBet && (\n            <div className=\"space-y-6\">\n              {/* Event Details */}\n              <div className=\"space-y-4\">\n                <h3 className=\"font-semibold text-lg\">Detalhes do Evento</h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label>Data e Hora do Evento</Label>\n                    <Input\n                      type=\"datetime-local\"\n                      value={editingBet.eventDate}\n                      onChange={(e) => setEditingBet({ ...editingBet, eventDate: e.target.value })}\n                      data-testid=\"input-event-date\"\n                    />\n                  </div>\n                  <div>\n                    <Label>Esporte</Label>\n                    <Input\n                      value={editingBet.sport}\n                      onChange={(e) => setEditingBet({ ...editingBet, sport: e.target.value })}\n                      data-testid=\"input-sport\"\n                    />\n                  </div>\n                  <div>\n                    <Label>Liga</Label>\n                    <Input\n                      value={editingBet.league}\n                      onChange={(e) => setEditingBet({ ...editingBet, league: e.target.value })}\n                      data-testid=\"input-league\"\n                    />\n                  </div>\n                  <div>\n                    <Label>Lucro (%)</Label>\n                    <Input\n                      type=\"text\"\n                      value={editingNumericFields.profitPercentage}\n                      onChange={(e) => {\n                        setEditingNumericFields({ \n                          ...editingNumericFields, \n                          profitPercentage: e.target.value \n                        });\n                      }}\n                      data-testid=\"input-profit-percentage\"\n                    />\n                  </div>\n                  <div>\n                    <Label>Time A</Label>\n                    <Input\n                      value={editingBet.teamA}\n                      onChange={(e) => setEditingBet({ ...editingBet, teamA: e.target.value })}\n                      data-testid=\"input-team-a\"\n                    />\n                  </div>\n                  <div>\n                    <Label>Time B</Label>\n                    <Input\n                      value={editingBet.teamB}\n                      onChange={(e) => setEditingBet({ ...editingBet, teamB: e.target.value })}\n                      data-testid=\"input-team-b\"\n                    />\n                  </div>\n                </div>\n              </div>\n\n              {/* Bet 1 */}\n              <div className=\"space-y-4 p-4 border rounded-lg\">\n                <h3 className=\"font-semibold text-lg\">Aposta 1</h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label>Casa de Aposta</Label>\n                    <Select\n                      value={editingBet.bet1.bettingHouseId}\n                      onValueChange={(value) => {\n                        const selectedHouse = bettingHouses.find(h => h.id === value);\n                        setEditingBet({ \n                          ...editingBet, \n                          bet1: { \n                            ...editingBet.bet1, \n                            bettingHouseId: value,\n                            house: selectedHouse?.name || editingBet.bet1.house,\n                            accountHolder: selectedHouse?.accountHolder?.name || editingBet.bet1.accountHolder\n                          }\n                        });\n                      }}\n                    >\n                      <SelectTrigger data-testid=\"select-bet1-house\">\n                        <SelectValue placeholder=\"Selecione a casa\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {bettingHouses.map(house => (\n                          <SelectItem key={house.id} value={house.id}>\n                            {house.name} {house.accountHolder?.name ? `(${house.accountHolder.name})` : ''}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  <div>\n                    <Label>Tipo de Aposta</Label>\n                    <Input\n                      value={editingBet.bet1.betType}\n                      onChange={(e) => setEditingBet({ \n                        ...editingBet, \n                        bet1: { ...editingBet.bet1, betType: e.target.value }\n                      })}\n                      data-testid=\"input-bet1-type\"\n                    />\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label>Odd</Label>\n                    <Input\n                      type=\"text\"\n                      value={editingNumericFields.bet1Odd}\n                      onChange={(e) => {\n                        setEditingNumericFields({ \n                          ...editingNumericFields, \n                          bet1Odd: e.target.value \n                        });\n                      }}\n                      data-testid=\"input-bet1-odd\"\n                    />\n                  </div>\n                  <div>\n                    <Label>Stake (R$)</Label>\n                    <Input\n                      type=\"text\"\n                      value={editingNumericFields.bet1Stake}\n                      onChange={(e) => {\n                        setEditingNumericFields({ \n                          ...editingNumericFields, \n                          bet1Stake: e.target.value \n                        });\n                      }}\n                      data-testid=\"input-bet1-stake\"\n                    />\n                  </div>\n                </div>\n              </div>\n\n              {/* Bet 2 */}\n              <div className=\"space-y-4 p-4 border rounded-lg\">\n                <h3 className=\"font-semibold text-lg\">Aposta 2</h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label>Casa de Aposta</Label>\n                    <Select\n                      value={editingBet.bet2.bettingHouseId}\n                      onValueChange={(value) => {\n                        const selectedHouse = bettingHouses.find(h => h.id === value);\n                        setEditingBet({ \n                          ...editingBet, \n                          bet2: { \n                            ...editingBet.bet2, \n                            bettingHouseId: value,\n                            house: selectedHouse?.name || editingBet.bet2.house,\n                            accountHolder: selectedHouse?.accountHolder?.name || editingBet.bet2.accountHolder\n                          }\n                        });\n                      }}\n                    >\n                      <SelectTrigger data-testid=\"select-bet2-house\">\n                        <SelectValue placeholder=\"Selecione a casa\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {bettingHouses.map(house => (\n                          <SelectItem key={house.id} value={house.id}>\n                            {house.name} {house.accountHolder?.name ? `(${house.accountHolder.name})` : ''}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  <div>\n                    <Label>Tipo de Aposta</Label>\n                    <Input\n                      value={editingBet.bet2.betType}\n                      onChange={(e) => setEditingBet({ \n                        ...editingBet, \n                        bet2: { ...editingBet.bet2, betType: e.target.value }\n                      })}\n                      data-testid=\"input-bet2-type\"\n                    />\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label>Odd</Label>\n                    <Input\n                      type=\"text\"\n                      value={editingNumericFields.bet2Odd}\n                      onChange={(e) => {\n                        setEditingNumericFields({ \n                          ...editingNumericFields, \n                          bet2Odd: e.target.value \n                        });\n                      }}\n                      data-testid=\"input-bet2-odd\"\n                    />\n                  </div>\n                  <div>\n                    <Label>Stake (R$)</Label>\n                    <Input\n                      type=\"text\"\n                      value={editingNumericFields.bet2Stake}\n                      onChange={(e) => {\n                        setEditingNumericFields({ \n                          ...editingNumericFields, \n                          bet2Stake: e.target.value \n                        });\n                      }}\n                      data-testid=\"input-bet2-stake\"\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setEditingBet(null)} data-testid=\"button-cancel-edit\">\n              Cancelar\n            </Button>\n            <Button onClick={handleSaveEdit} disabled={updateSurebetMutation.isPending} data-testid=\"button-save-edit\">\n              {updateSurebetMutation.isPending ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Salvando...\n                </>\n              ) : (\n                \"Salvar Alterações\"\n              )}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Delete Confirmation AlertDialog */}\n      <AlertDialog open={!!deletingBetId} onOpenChange={(open) => !open && setDeletingBetId(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Confirmar Exclusão</AlertDialogTitle>\n            <AlertDialogDescription>\n              Tem certeza que deseja excluir esta aposta? Esta ação não pode ser desfeita e todos os dados relacionados serão permanentemente removidos.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-delete\">\n              Cancelar\n            </AlertDialogCancel>\n            <AlertDialogAction\n              onClick={() => deletingBetId && deleteMutation.mutate(deletingBetId)}\n              disabled={deleteMutation.isPending}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n              data-testid=\"button-confirm-delete\"\n            >\n              {deleteMutation.isPending ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Excluindo...\n                </>\n              ) : (\n                \"Excluir\"\n              )}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","path":null,"size_bytes":48827,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/pages/bet-burger.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Upload, Trash2, Calendar, DollarSign, TrendingUp } from \"lucide-react\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport type { BettingHouseWithAccountHolder } from \"@shared/schema\";\n\ninterface ParsedBet {\n  eventDate: string;\n  sport: string;\n  league: string;\n  teamA: string;\n  teamB: string;\n  profitPercentage: number;\n  bet1: {\n    house: string;\n    type: string;\n    odd: number;\n    stake: number;\n    profit: number;\n  };\n  bet2: {\n    house: string;\n    type: string;\n    odd: number;\n    stake: number;\n    profit: number;\n  };\n  bet3?: {\n    house: string;\n    type: string;\n    odd: number;\n    stake: number;\n    profit: number;\n  };\n}\n\ninterface EditableData {\n  eventDate: string;\n  profitPercentage: string;\n  sport: string;\n  league: string;\n  teamA: string;\n  teamB: string;\n  bet1House: string;\n  bet1Type: string;\n  bet1Odd: string;\n  bet1Stake: string;\n  bet1Profit: string;\n  bet1SelectedHouseId?: string;\n  bet2House: string;\n  bet2Type: string;\n  bet2Odd: string;\n  bet2Stake: string;\n  bet2Profit: string;\n  bet2SelectedHouseId?: string;\n  bet3House?: string;\n  bet3Type?: string;\n  bet3Odd?: string;\n  bet3Stake?: string;\n  bet3Profit?: string;\n  bet3SelectedHouseId?: string;\n}\n\nexport default function BetBurger() {\n  const { toast } = useToast();\n  const [excelData, setExcelData] = useState(\"\");\n  const [parsedBets, setParsedBets] = useState<ParsedBet[]>([]);\n  const [editableData, setEditableData] = useState<Record<number, EditableData>>({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const { data: bettingHouses = [] } = useQuery<BettingHouseWithAccountHolder[]>({\n    queryKey: [\"/api/betting-houses\"],\n  });\n\n  const parseBetBurgerData = (data: string): ParsedBet[] => {\n    const lines = data.trim().split('\\n').map(line => line.trim()).filter(line => line);\n    const bets: ParsedBet[] = [];\n\n    // Find all header line indices (lines that start with date)\n    const headerIndices: number[] = [];\n    lines.forEach((line, idx) => {\n      // Match both formats with Unicode support for accented months (março, etc.)\n      // Format 1: \"17 nov 06:00\" or \"17 março 06:00\" (allow any non-space chars for month)\n      // Format 2: \"08/11/2025 13:15\"\n      if (line.match(/^\\d{1,2}\\s+[^\\s]{3,}\\s+\\d{2}:\\d{2}/) || line.match(/^\\d{2}\\/\\d{2}\\/\\d{4}\\s+\\d{2}:\\d{2}/)) {\n        headerIndices.push(idx);\n      }\n    });\n\n    // Process each bet group\n    for (let h = 0; h < headerIndices.length; h++) {\n      const startIdx = headerIndices[h];\n      const endIdx = h + 1 < headerIndices.length ? headerIndices[h + 1] : lines.length;\n      const betLines = lines.slice(startIdx, endIdx);\n\n      if (betLines.length < 3) continue; // Need at least header + 2 bets\n\n      // Normalize whitespace (tabs, multiple spaces) to single space for easier parsing\n      const dateTimeMainLine = betLines[0].replace(/\\s+/g, ' ').trim();\n      const bet1Line = betLines[1];\n      const bet2Line = betLines[2];\n      const bet3Line = betLines.length >= 4 ? betLines[3] : null;\n\n      // Parse date/time - support both formats with Unicode months\n      let eventDate = new Date().toISOString().slice(0, 16);\n      \n      // Format 1: \"17 nov 06:00\" or \"17 março 06:00\" -> convert month name (allow accents)\n      const dateTimeMatch1 = dateTimeMainLine.match(/^(\\d{1,2})\\s+([^\\s]+)\\s+(\\d{2}:\\d{2})/);\n      if (dateTimeMatch1) {\n        const [_, day, monthName, time] = dateTimeMatch1;\n        \n        // Normalize month name: remove dots, lowercase, remove common accents\n        const normalizedMonth = monthName.toLowerCase()\n          .replace(/\\./g, '')\n          .replace(/ç/g, 'c')\n          .replace(/á/g, 'a')\n          .replace(/é/g, 'e')\n          .replace(/í/g, 'i')\n          .replace(/ó/g, 'o')\n          .replace(/ú/g, 'u')\n          .replace(/â/g, 'a')\n          .replace(/ê/g, 'e')\n          .replace(/ô/g, 'o')\n          .substring(0, 3); // Take first 3 chars after normalization\n        \n        // Extended month map with Portuguese variants\n        const monthMap: Record<string, string> = {\n          jan: '01', fev: '02', mar: '03', abr: '04', mai: '05', jun: '06',\n          jul: '07', ago: '08', set: '09', out: '10', nov: '11', dez: '12',\n          // English variants\n          feb: '02', apr: '04', may: '05', aug: '08', sep: '09', oct: '10', dec: '12'\n        };\n        const month = monthMap[normalizedMonth] || '01';\n        const year = new Date().getFullYear();\n        eventDate = `${year}-${month}-${day.padStart(2, '0')}T${time}`;\n      }\n      \n      // Format 2: \"08/11/2025 13:15\"\n      const dateTimeMatch2 = dateTimeMainLine.match(/(\\d{2}\\/\\d{2}\\/\\d{4})\\s+(\\d{2}:\\d{2})/);\n      if (dateTimeMatch2) {\n        const [_, datePart, timePart] = dateTimeMatch2;\n        const [day, month, year] = datePart.split('/');\n        eventDate = `${year}-${month}-${day}T${timePart}`;\n      }\n\n      // Parse main line - support both formats with Unicode characters (Portuguese/Spanish accents)\n      // Format: \"DATE TIME SPORT.TEAMA - TEAMB (LEAGUE) PERCENTAGE%\"\n      // Strategy: Find TIME, extract everything after it until first separator, that's the sport\n      \n      // Find the time portion (HH:MM)\n      const timeMatch = dateTimeMainLine.match(/\\d{2}:\\d{2}/);\n      if (!timeMatch) continue;\n      \n      // Get everything after the time\n      const afterTime = dateTimeMainLine.substring(timeMatch.index! + 5).trim();\n      \n      // Find first separator (., ·, –, —) for sport\n      // Use regex to find first occurrence of any separator\n      const separatorMatch = afterTime.match(/[.·–—]/);\n      if (!separatorMatch) continue;\n      \n      const separatorIndex = separatorMatch.index!;\n      const sport = afterTime.substring(0, separatorIndex).trim();\n      \n      // Get everything after the separator for team extraction\n      const afterSeparator = afterTime.substring(separatorIndex + 1);\n      \n      // Extract: TeamA - TeamB (League) Percentage%\n      // Accept both ASCII hyphen (-) and Unicode dashes (–, —) between teams\n      const eventPattern = /(.+?)\\s*[-–—]\\s*(.+?)\\s*\\(([^)]+)\\)\\s*([\\d.]+)%/;\n      const eventMatch = afterSeparator.match(eventPattern);\n      if (!eventMatch) continue;\n      \n      const [, teamA, teamB, league, profitPct] = eventMatch;\n\n      // Parse bet1 (segunda linha com tabs)\n      const bet1Parts = bet1Line.split('\\t').filter(p => p.trim());\n      if (bet1Parts.length < 6) continue;\n\n      const bet1 = {\n        house: bet1Parts[0].trim(),\n        type: bet1Parts[1].trim(),\n        odd: parseFloat(bet1Parts[2]) || 0,\n        stake: parseFloat(bet1Parts[3]) || 0,\n        profit: parseFloat(bet1Parts[5]) || 0,\n      };\n\n      // Parse bet2\n      const bet2Parts = bet2Line.split('\\t').filter(p => p.trim());\n      if (bet2Parts.length < 6) continue;\n\n      const bet2 = {\n        house: bet2Parts[0].trim(),\n        type: bet2Parts[1].trim(),\n        odd: parseFloat(bet2Parts[2]) || 0,\n        stake: parseFloat(bet2Parts[3]) || 0,\n        profit: parseFloat(bet2Parts[5]) || 0,\n      };\n\n      // Parse bet3 if exists\n      let bet3 = undefined;\n      if (bet3Line) {\n        const bet3Parts = bet3Line.split('\\t').filter(p => p.trim());\n        if (bet3Parts.length >= 6) {\n          bet3 = {\n            house: bet3Parts[0].trim(),\n            type: bet3Parts[1].trim(),\n            odd: parseFloat(bet3Parts[2]) || 0,\n            stake: parseFloat(bet3Parts[3]) || 0,\n            profit: parseFloat(bet3Parts[5]) || 0,\n          };\n        }\n      }\n\n      bets.push({\n        eventDate,\n        sport: sport.trim(),\n        league: league.trim(),\n        teamA: teamA.trim(),\n        teamB: teamB.trim(),\n        profitPercentage: parseFloat(profitPct),\n        bet1,\n        bet2,\n        bet3,\n      });\n    }\n\n    return bets;\n  };\n\n  const findMatchingHouse = (houseName: string): string | undefined => {\n    const normalized = houseName.toLowerCase().replace(/[.\\s]/g, '');\n    const match = bettingHouses.find(h => \n      h.name.toLowerCase().replace(/[.\\s]/g, '').includes(normalized) ||\n      normalized.includes(h.name.toLowerCase().replace(/[.\\s]/g, ''))\n    );\n    return match?.id;\n  };\n\n  const handleProcessData = () => {\n    try {\n      const parsed = parseBetBurgerData(excelData);\n      \n      if (parsed.length === 0) {\n        toast({\n          title: \"❌ Erro ao processar\",\n          description: \"Não foi possível extrair apostas dos dados colados. Verifique o formato.\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      setParsedBets(parsed);\n\n      const initialData: Record<number, EditableData> = {};\n      parsed.forEach((bet, index) => {\n        initialData[index] = {\n          eventDate: bet.eventDate,\n          profitPercentage: bet.profitPercentage.toFixed(2),\n          sport: bet.sport,\n          league: bet.league,\n          teamA: bet.teamA,\n          teamB: bet.teamB,\n          bet1House: bet.bet1.house,\n          bet1Type: bet.bet1.type,\n          bet1Odd: bet.bet1.odd.toFixed(3),\n          bet1Stake: bet.bet1.stake.toFixed(2),\n          bet1Profit: bet.bet1.profit.toFixed(2),\n          bet1SelectedHouseId: findMatchingHouse(bet.bet1.house),\n          bet2House: bet.bet2.house,\n          bet2Type: bet.bet2.type,\n          bet2Odd: bet.bet2.odd.toFixed(3),\n          bet2Stake: bet.bet2.stake.toFixed(2),\n          bet2Profit: bet.bet2.profit.toFixed(2),\n          bet2SelectedHouseId: findMatchingHouse(bet.bet2.house),\n          ...(bet.bet3 && {\n            bet3House: bet.bet3.house,\n            bet3Type: bet.bet3.type,\n            bet3Odd: bet.bet3.odd.toFixed(3),\n            bet3Stake: bet.bet3.stake.toFixed(2),\n            bet3Profit: bet.bet3.profit.toFixed(2),\n            bet3SelectedHouseId: findMatchingHouse(bet.bet3.house),\n          }),\n        };\n      });\n\n      setEditableData(initialData);\n\n      toast({\n        title: \"✅ Dados processados!\",\n        description: `${parsed.length} aposta(s) extraída(s) com sucesso.`,\n      });\n    } catch (error) {\n      console.error(\"Erro ao processar dados:\", error);\n      toast({\n        title: \"❌ Erro ao processar\",\n        description: \"Ocorreu um erro ao processar os dados. Verifique o formato.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleClearAll = () => {\n    setExcelData(\"\");\n    setParsedBets([]);\n    setEditableData({});\n  };\n\n  const updateEditableField = (index: number, field: keyof EditableData, value: string) => {\n    setEditableData(prev => ({\n      ...prev,\n      [index]: {\n        ...prev[index],\n        [field]: value,\n      }\n    }));\n  };\n\n  const handleSubmitBets = async () => {\n    setIsSubmitting(true);\n    const errors: string[] = [];\n\n    try {\n      // PASSO 1: Validar TODAS as apostas ANTES de enviar qualquer uma\n      for (let i = 0; i < parsedBets.length; i++) {\n        const data = editableData[i];\n        \n        // Defensive check\n        if (!data) {\n          errors.push(`Aposta ${i + 1}: Dados não encontrados`);\n          continue;\n        }\n        \n        const hasBet3 = parsedBets[i].bet3 !== undefined;\n        \n        // Validação de campos obrigatórios\n        const missingFields: string[] = [];\n        \n        if (!data.eventDate) missingFields.push(\"Data/Hora\");\n        if (!data.sport?.trim()) missingFields.push(\"Esporte\");\n        if (!data.league?.trim()) missingFields.push(\"Liga\");\n        if (!data.teamA?.trim()) missingFields.push(\"Time A\");\n        if (!data.teamB?.trim()) missingFields.push(\"Time B\");\n        if (!data.profitPercentage) missingFields.push(\"Lucro %\");\n        \n        if (!data.bet1SelectedHouseId) missingFields.push(\"Titular Aposta 1\");\n        if (!data.bet1Type?.trim()) missingFields.push(\"Tipo Aposta 1\");\n        if (!data.bet2SelectedHouseId) missingFields.push(\"Titular Aposta 2\");\n        if (!data.bet2Type?.trim()) missingFields.push(\"Tipo Aposta 2\");\n        \n        if (hasBet3) {\n          if (!data.bet3SelectedHouseId) missingFields.push(\"Titular Aposta 3\");\n          if (!data.bet3Type?.trim()) missingFields.push(\"Tipo Aposta 3\");\n        }\n        \n        if (missingFields.length > 0) {\n          errors.push(`Aposta ${i + 1}: ${missingFields.join(\", \")}`);\n          continue;\n        }\n\n        // Validação de valores numéricos\n        const bet1Odd = parseFloat(data.bet1Odd);\n        const bet1Stake = parseFloat(data.bet1Stake);\n        const bet1Profit = parseFloat(data.bet1Profit);\n        const bet2Odd = parseFloat(data.bet2Odd);\n        const bet2Stake = parseFloat(data.bet2Stake);\n        const bet2Profit = parseFloat(data.bet2Profit);\n\n        if (isNaN(bet1Odd) || isNaN(bet1Stake) || isNaN(bet1Profit) || isNaN(bet2Odd) || isNaN(bet2Stake) || isNaN(bet2Profit)) {\n          errors.push(`Aposta ${i + 1}: Valores numéricos inválidos (bet1 ou bet2)`);\n          continue;\n        }\n\n        if (hasBet3) {\n          const bet3Odd = parseFloat(data.bet3Odd || '0');\n          const bet3Stake = parseFloat(data.bet3Stake || '0');\n          const bet3Profit = parseFloat(data.bet3Profit || '0');\n          \n          if (isNaN(bet3Odd) || isNaN(bet3Stake) || isNaN(bet3Profit)) {\n            errors.push(`Aposta ${i + 1}: Valores numéricos inválidos (bet3)`);\n            continue;\n          }\n        }\n      }\n\n      // Se houver QUALQUER erro, bloquear envio completo\n      if (errors.length > 0) {\n        toast({\n          title: \"⚠️ Não é possível enviar\",\n          description: `Preencha TODOS os campos de TODAS as apostas antes de enviar:\\n\\n${errors.join('\\n')}`,\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      // PASSO 2: Se passou na validação, enviar TODAS as apostas\n      let created = 0;\n      let failed = 0;\n      const submitErrors: string[] = [];\n\n      for (let i = 0; i < parsedBets.length; i++) {\n        const data = editableData[i];\n        const hasBet3 = parsedBets[i].bet3 !== undefined;\n\n        const bet1Odd = parseFloat(data.bet1Odd);\n        const bet1Stake = parseFloat(data.bet1Stake);\n        const bet1Profit = parseFloat(data.bet1Profit);\n        const bet2Odd = parseFloat(data.bet2Odd);\n        const bet2Stake = parseFloat(data.bet2Stake);\n        const bet2Profit = parseFloat(data.bet2Profit);\n\n        let bet3Odd, bet3Stake, bet3Profit;\n        if (hasBet3) {\n          bet3Odd = parseFloat(data.bet3Odd || '0');\n          bet3Stake = parseFloat(data.bet3Stake || '0');\n          bet3Profit = parseFloat(data.bet3Profit || '0');\n        }\n\n        try {\n          const surebetSetData = {\n            eventDate: data.eventDate || null,\n            sport: data.sport,\n            league: data.league,\n            teamA: data.teamA,\n            teamB: data.teamB,\n            profitPercentage: data.profitPercentage.toString(),\n            status: \"pending\",\n          };\n\n          const bet1Data = {\n            betType: data.bet1Type,\n            odd: bet1Odd.toFixed(3),\n            stake: bet1Stake.toFixed(2),\n            potentialProfit: bet1Profit.toFixed(2),\n            bettingHouseId: data.bet1SelectedHouseId,\n          };\n\n          const bet2Data = {\n            betType: data.bet2Type,\n            odd: bet2Odd.toFixed(3),\n            stake: bet2Stake.toFixed(2),\n            potentialProfit: bet2Profit.toFixed(2),\n            bettingHouseId: data.bet2SelectedHouseId,\n          };\n\n          const betsArray = [bet1Data, bet2Data];\n          \n          if (hasBet3 && bet3Odd && bet3Stake && bet3Profit) {\n            betsArray.push({\n              betType: data.bet3Type!,\n              odd: bet3Odd.toFixed(3),\n              stake: bet3Stake.toFixed(2),\n              potentialProfit: bet3Profit.toFixed(2),\n              bettingHouseId: data.bet3SelectedHouseId!,\n            });\n          }\n\n          const response = await fetch('/api/surebet-sets', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n              surebetSet: surebetSetData,\n              bets: betsArray,\n            }),\n          });\n\n          if (response.ok) {\n            created++;\n          } else {\n            const errorText = await response.text();\n            submitErrors.push(`Aposta ${i + 1}: ${errorText}`);\n            failed++;\n          }\n        } catch (error: any) {\n          console.error(`Erro ao criar aposta ${i + 1}:`, error);\n          submitErrors.push(`Aposta ${i + 1}: ${error.message || 'Erro desconhecido'}`);\n          failed++;\n        }\n      }\n\n      // Mostrar resultados do envio\n      if (created > 0) {\n        toast({\n          title: \"✅ Apostas criadas com sucesso!\",\n          description: `${created} aposta(s) adicionada(s) ao sistema${failed > 0 ? `. ${failed} falhou(aram)` : ''}`,\n        });\n\n        if (failed === 0) {\n          setTimeout(() => {\n            handleClearAll();\n          }, 1500);\n        }\n      }\n\n      if (submitErrors.length > 0) {\n        console.error('Erros na criação:', submitErrors);\n        toast({\n          title: \"⚠️ Alguns erros ocorreram\",\n          description: `${failed} aposta(s) não puderam ser criadas. Verifique o console.`,\n          variant: \"destructive\",\n        });\n      }\n\n    } finally {\n      setIsSubmitting(false);\n    }\n\n    queryClient.invalidateQueries({ queryKey: ['/api/surebet-sets'] });\n  };\n\n  return (\n    <div className=\"container mx-auto p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Bet Burger</h1>\n          <p className=\"text-muted-foreground\">Cole dados do Excel para adicionar apostas</p>\n        </div>\n      </div>\n\n      {parsedBets.length === 0 ? (\n        <Card>\n          <CardHeader>\n            <CardTitle>Colar Dados do Excel</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"excel-data\">Dados do Bet Burger</Label>\n              <Textarea\n                id=\"excel-data\"\n                placeholder=\"Cole aqui os dados do Excel (Data/Hora, linha principal, aposta 1, aposta 2)...\"\n                value={excelData}\n                onChange={(e) => setExcelData(e.target.value)}\n                className=\"min-h-[200px] font-mono text-sm\"\n                data-testid=\"textarea-excel-data\"\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                Formato esperado: Data/Hora na primeira linha, depois Esporte.Time1 - Time2 (Liga) %, seguido das 2 apostas\n              </p>\n            </div>\n\n            <div className=\"flex gap-2\">\n              <Button\n                onClick={handleProcessData}\n                disabled={!excelData.trim()}\n                data-testid=\"button-process-data\"\n              >\n                <Upload className=\"w-4 h-4 mr-2\" />\n                Processar Dados\n              </Button>\n              <Button\n                variant=\"outline\"\n                onClick={handleClearAll}\n                disabled={!excelData.trim()}\n                data-testid=\"button-clear-data\"\n              >\n                <Trash2 className=\"w-4 h-4 mr-2\" />\n                Limpar\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      ) : (\n        <>\n          <div className=\"flex items-center justify-between\">\n            <p className=\"text-sm text-muted-foreground\">\n              {parsedBets.length} aposta(s) extraída(s) • Revise os dados antes de enviar\n            </p>\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"outline\"\n                onClick={handleClearAll}\n                data-testid=\"button-reset\"\n              >\n                <Trash2 className=\"w-4 h-4 mr-2\" />\n                Recomeçar\n              </Button>\n              <Button\n                onClick={handleSubmitBets}\n                disabled={isSubmitting}\n                data-testid=\"button-submit-bets\"\n              >\n                {isSubmitting ? \"Enviando...\" : \"Adicionar Todas as Apostas ao Sistema\"}\n              </Button>\n            </div>\n          </div>\n\n          <div className=\"space-y-8\">\n            {parsedBets.map((bet, index) => {\n              const data = editableData[index];\n              if (!data) return null;\n\n              return (\n                <div key={index} className=\"space-y-4 p-4 border rounded-lg bg-card\">\n                  <h3 className=\"text-lg font-semibold\">Aposta {index + 1}</h3>\n\n                  {/* Event Information Card */}\n                  <Card>\n                    <CardHeader>\n                      <CardTitle className=\"text-base flex items-center gap-2\">\n                        <Calendar className=\"w-4 h-4\" />\n                        Informações do Evento\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                        <div className=\"space-y-2\">\n                          <Label>Data e Hora</Label>\n                          <Input\n                            type=\"datetime-local\"\n                            value={data.eventDate}\n                            onChange={(e) => updateEditableField(index, 'eventDate', e.target.value)}\n                            data-testid={`input-event-date-${index}`}\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Lucro (%)</Label>\n                          <Input\n                            type=\"number\"\n                            step=\"0.01\"\n                            value={data.profitPercentage}\n                            onChange={(e) => updateEditableField(index, 'profitPercentage', e.target.value)}\n                            data-testid={`input-profit-${index}`}\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Esporte</Label>\n                          <Input\n                            value={data.sport}\n                            onChange={(e) => updateEditableField(index, 'sport', e.target.value)}\n                            data-testid={`input-sport-${index}`}\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Liga</Label>\n                          <Input\n                            value={data.league}\n                            onChange={(e) => updateEditableField(index, 'league', e.target.value)}\n                            data-testid={`input-league-${index}`}\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Time A</Label>\n                          <Input\n                            value={data.teamA}\n                            onChange={(e) => updateEditableField(index, 'teamA', e.target.value)}\n                            data-testid={`input-teamA-${index}`}\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Time B</Label>\n                          <Input\n                            value={data.teamB}\n                            onChange={(e) => updateEditableField(index, 'teamB', e.target.value)}\n                            data-testid={`input-teamB-${index}`}\n                          />\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  {/* Bet 1 Card */}\n                  <Card className=\"border-blue-200 dark:border-blue-800\">\n                    <CardHeader className=\"bg-blue-50 dark:bg-blue-950\">\n                      <CardTitle className=\"text-base flex items-center gap-2\">\n                        <DollarSign className=\"w-4 h-4\" />\n                        Aposta 1\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"pt-6\">\n                      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                        <div className=\"space-y-2\">\n                          <Label>Casa de Apostas</Label>\n                          <Input\n                            value={data.bet1House}\n                            onChange={(e) => updateEditableField(index, 'bet1House', e.target.value)}\n                            data-testid={`input-bet1-house-${index}`}\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Titular da Conta</Label>\n                          <Select\n                            value={data.bet1SelectedHouseId || \"\"}\n                            onValueChange={(value) => updateEditableField(index, 'bet1SelectedHouseId', value)}\n                          >\n                            <SelectTrigger data-testid={`select-bet1-holder-${index}`}>\n                              <SelectValue placeholder=\"Selecione o titular\" />\n                            </SelectTrigger>\n                            <SelectContent>\n                              {bettingHouses.map((house) => (\n                                <SelectItem key={house.id} value={house.id}>\n                                  {house.accountHolder?.name || 'Sem titular'} - {house.name}\n                                </SelectItem>\n                              ))}\n                            </SelectContent>\n                          </Select>\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Tipo</Label>\n                          <Input\n                            value={data.bet1Type}\n                            onChange={(e) => updateEditableField(index, 'bet1Type', e.target.value)}\n                            data-testid={`input-bet1-type-${index}`}\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Odd</Label>\n                          <Input\n                            type=\"number\"\n                            step=\"0.001\"\n                            value={data.bet1Odd}\n                            onChange={(e) => updateEditableField(index, 'bet1Odd', e.target.value)}\n                            data-testid={`input-bet1-odd-${index}`}\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Stake (R$)</Label>\n                          <Input\n                            type=\"number\"\n                            step=\"0.01\"\n                            value={data.bet1Stake}\n                            onChange={(e) => updateEditableField(index, 'bet1Stake', e.target.value)}\n                            data-testid={`input-bet1-stake-${index}`}\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Lucro Potencial (R$)</Label>\n                          <Input\n                            type=\"number\"\n                            step=\"0.01\"\n                            value={data.bet1Profit}\n                            onChange={(e) => updateEditableField(index, 'bet1Profit', e.target.value)}\n                            data-testid={`input-bet1-profit-${index}`}\n                          />\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  {/* Bet 2 Card */}\n                  <Card className=\"border-purple-200 dark:border-purple-800\">\n                    <CardHeader className=\"bg-purple-50 dark:bg-purple-950\">\n                      <CardTitle className=\"text-base flex items-center gap-2\">\n                        <TrendingUp className=\"w-4 h-4\" />\n                        Aposta 2\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"pt-6\">\n                      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                        <div className=\"space-y-2\">\n                          <Label>Casa de Apostas</Label>\n                          <Input\n                            value={data.bet2House}\n                            onChange={(e) => updateEditableField(index, 'bet2House', e.target.value)}\n                            data-testid={`input-bet2-house-${index}`}\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Titular da Conta</Label>\n                          <Select\n                            value={data.bet2SelectedHouseId || \"\"}\n                            onValueChange={(value) => updateEditableField(index, 'bet2SelectedHouseId', value)}\n                          >\n                            <SelectTrigger data-testid={`select-bet2-holder-${index}`}>\n                              <SelectValue placeholder=\"Selecione o titular\" />\n                            </SelectTrigger>\n                            <SelectContent>\n                              {bettingHouses.map((house) => (\n                                <SelectItem key={house.id} value={house.id}>\n                                  {house.accountHolder?.name || 'Sem titular'} - {house.name}\n                                </SelectItem>\n                              ))}\n                            </SelectContent>\n                          </Select>\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Tipo</Label>\n                          <Input\n                            value={data.bet2Type}\n                            onChange={(e) => updateEditableField(index, 'bet2Type', e.target.value)}\n                            data-testid={`input-bet2-type-${index}`}\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Odd</Label>\n                          <Input\n                            type=\"number\"\n                            step=\"0.001\"\n                            value={data.bet2Odd}\n                            onChange={(e) => updateEditableField(index, 'bet2Odd', e.target.value)}\n                            data-testid={`input-bet2-odd-${index}`}\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Stake (R$)</Label>\n                          <Input\n                            type=\"number\"\n                            step=\"0.01\"\n                            value={data.bet2Stake}\n                            onChange={(e) => updateEditableField(index, 'bet2Stake', e.target.value)}\n                            data-testid={`input-bet2-stake-${index}`}\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Lucro Potencial (R$)</Label>\n                          <Input\n                            type=\"number\"\n                            step=\"0.01\"\n                            value={data.bet2Profit}\n                            onChange={(e) => updateEditableField(index, 'bet2Profit', e.target.value)}\n                            data-testid={`input-bet2-profit-${index}`}\n                          />\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  {/* Bet 3 Card (conditional) */}\n                  {parsedBets[index].bet3 && (\n                    <Card className=\"border-green-200 dark:border-green-800\">\n                      <CardHeader className=\"bg-green-50 dark:bg-green-950\">\n                        <CardTitle className=\"text-base flex items-center gap-2\">\n                          <TrendingUp className=\"w-4 h-4\" />\n                          Aposta 3\n                        </CardTitle>\n                      </CardHeader>\n                      <CardContent className=\"pt-6\">\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                          <div className=\"space-y-2\">\n                            <Label>Casa de Apostas</Label>\n                            <Input\n                              value={data.bet3House || ''}\n                              onChange={(e) => updateEditableField(index, 'bet3House', e.target.value)}\n                              data-testid={`input-bet3-house-${index}`}\n                            />\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label>Titular da Conta</Label>\n                            <Select\n                              value={data.bet3SelectedHouseId || \"\"}\n                              onValueChange={(value) => updateEditableField(index, 'bet3SelectedHouseId', value)}\n                            >\n                              <SelectTrigger data-testid={`select-bet3-holder-${index}`}>\n                                <SelectValue placeholder=\"Selecione o titular\" />\n                              </SelectTrigger>\n                              <SelectContent>\n                                {bettingHouses.map((house) => (\n                                  <SelectItem key={house.id} value={house.id}>\n                                    {house.accountHolder?.name || 'Sem titular'} - {house.name}\n                                  </SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label>Tipo</Label>\n                            <Input\n                              value={data.bet3Type || ''}\n                              onChange={(e) => updateEditableField(index, 'bet3Type', e.target.value)}\n                              data-testid={`input-bet3-type-${index}`}\n                            />\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label>Odd</Label>\n                            <Input\n                              type=\"number\"\n                              step=\"0.001\"\n                              value={data.bet3Odd || ''}\n                              onChange={(e) => updateEditableField(index, 'bet3Odd', e.target.value)}\n                              data-testid={`input-bet3-odd-${index}`}\n                            />\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label>Stake (R$)</Label>\n                            <Input\n                              type=\"number\"\n                              step=\"0.01\"\n                              value={data.bet3Stake || ''}\n                              onChange={(e) => updateEditableField(index, 'bet3Stake', e.target.value)}\n                              data-testid={`input-bet3-stake-${index}`}\n                            />\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label>Lucro Potencial (R$)</Label>\n                            <Input\n                              type=\"number\"\n                              step=\"0.01\"\n                              value={data.bet3Profit || ''}\n                              onChange={(e) => updateEditableField(index, 'bet3Profit', e.target.value)}\n                              data-testid={`input-bet3-profit-${index}`}\n                            />\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n\n          {/* Botões no final da página */}\n          <div className=\"flex items-center justify-end gap-2 pt-6 border-t\">\n            <Button\n              variant=\"outline\"\n              onClick={handleClearAll}\n              data-testid=\"button-reset-bottom\"\n            >\n              <Trash2 className=\"w-4 h-4 mr-2\" />\n              Recomeçar\n            </Button>\n            <Button\n              onClick={handleSubmitBets}\n              disabled={isSubmitting}\n              data-testid=\"button-submit-bets-bottom\"\n            >\n              {isSubmitting ? \"Enviando...\" : \"Adicionar Todas as Apostas ao Sistema\"}\n            </Button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n","path":null,"size_bytes":37376,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","path":null,"size_bytes":2066,"size_tokens":null},"replit.md":{"content":"# Surebet Management System\n\n## Overview\n\nA comprehensive web application for managing and tracking surebet operations. It features automated OCR PDF processing for extracting betting data, managing dual-bet scenarios (one bet wins, other loses), and streamlining the workflow from data entry to profit tracking and reporting. The system supports bulk operations and aims to reduce manual errors and processing time.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n**Default Management Page Filters**:\n- Management page always opens with \"Pendente\" status filter pre-selected\n- \"Ordenar por Data\" button is always active by default\n- User can still change filters manually after opening the page\n\n## System Architecture\n\n### Frontend\n- **Framework**: React 18 with TypeScript (SPA)\n- **Routing**: Wouter\n- **UI**: Shadcn/ui (Radix UI + Tailwind CSS), Material Design adaptation with betting-specific color schemes\n- **State Management**: TanStack Query (server state), React hooks (local state)\n- **Form Handling**: React Hook Form with Zod validation\n- **Styling**: Tailwind CSS with custom CSS variables (light/dark modes)\n\n### Backend\n- **Runtime**: Node.js with Express.js\n- **Language**: TypeScript (ES modules)\n- **API**: RESTful\n- **File Handling**: Multer (for image uploads, 10MB limit)\n- **Error Handling**: Centralized middleware\n- **Development**: Vite for HMR\n\n### Data Storage\n- **Database**: PostgreSQL (Neon serverless)\n- **ORM**: Drizzle ORM (type-safe queries, migrations)\n- **Schema**: Normalized structure for account holders, betting houses, surebet sets, and individual bets. Uses Decimal for financial calculations and UUID for primary keys.\n\n### Authentication and Authorization\n- **Session Management**: Express sessions with PostgreSQL store (connect-pg-simple)\n- **Security**: CORS, secure session cookies\n- **Access Control**: Route-level protection (planned)\n\n### Key Architectural Decisions\n- **OCR-First Data Entry**: Prioritizes automated data extraction from PDFs using `pdfplumber` to reduce manual entry and errors.\n- **Dual & Triple-Bet Structure**: Models each surebet as a set of 2 OR 3 opposing bets across different houses, ensuring guaranteed profit regardless of outcome. System fully supports both formats.\n- **Progressive Enhancement**: Core functionality is available, with OCR automation enhancing the user experience.\n- **Financial Precision**: Uses decimal data types (10,2 for amounts, 8,2 for odds) to prevent floating-point errors.\n- **Responsive Design**: Mobile-first approach with adaptable UI.\n- **Timezone Handling**: Preserves event dates/times as entered by users without UTC conversion across the stack.\n- **Performance Optimization**: Implemented batch queries with `inArray` and strategic database indexes to optimize data fetching.\n- **Real-time Search**: Instant, case-insensitive, accent-insensitive search on both Dashboard and Management pages.\n- **Dashboard Visual Redesign**: Dedicated visual analytics page with summary cards and an interactive cumulative profit line chart (Recharts), independent of bet management.\n- **Bet Position Stability**: Ensures stable bet ordering using deterministic SQL ordering (`ORDER BY createdAt ASC, id ASC`) to prevent position swaps.\n- **\"Meio Green\" Feature**: Added functionality for resolving bets as \"half won\" or \"half returned\" with precise profit calculations.\n- **New User Onboarding**: Batch upload automatically detects unmatched betting houses via `useMemo`, displays blocking alert with \"quick create\" button, creates default holder (\"Titular Padrão\") and all unmatched houses. Uses `createResource` helper for error handling, refetches queries to update dropdowns, surfaces backend errors with house names, handles partial failures gracefully.\n\n## External Dependencies\n\n- **OCR Processing**: `pdfplumber` (Python library for PDF text extraction)\n  - Enhanced profit and bet type extraction.\n  - Improved sport detection.\n  - **November 17, 2025**: Fixed critical 3-bet extraction bug - parser now correctly extracts all 3 bets when present, breaking loop only after all detected bets are mapped.\n- **Image Processing**: Base64 encoding for API transmission.\n- **QR Code Reading**: `jsQR` library (client-side processing for QR codes).\n- **BetBurger Integration**: Custom parser for BetBurger Excel data format with full system compatibility.\n  - **November 2025**: Fixed critical submission bug - changed from TanStack mutation to direct fetch() matching batch-upload payload structure\n  - Payload format: `{surebetSet: {...}, bets: [...]}` with all fields as strings and `status: \"pending\"`\n  - 100% compatible with Management, Dashboard, graphs, and profit calculations\n  - **November 17, 2025**: Enhanced parser with full localized format support:\n    - Accepts accented Portuguese months (março, nov., etc.)\n    - Supports Unicode separators (middle dot ·, en-dash –, em-dash —)\n    - Handles Unicode dashes between team names\n    - Automatically detects 2 vs 3 bet scenarios\n  - **November 17, 2025**: Fixed atomic validation - system now validates ALL bets before submitting any, preventing partial submissions when some bets are incomplete\n- **Database Hosting**: Neon (serverless PostgreSQL).\n- **UI Components**: Shadcn/ui, Radix UI.\n- **Development Tools**: Replit integration (runtime error overlay, cartographer).","path":null,"size_bytes":5384,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2359,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4885,"size_tokens":null},"server/migration-service.ts":{"content":"import { Pool } from 'pg';\n\nexport interface TableStats {\n  name: string;\n  count: number;\n}\n\nexport interface MigrationStats {\n  tables: TableStats[];\n  totalRecords: number;\n}\n\nexport class MigrationService {\n  private sourcePool: Pool;\n\n  constructor() {\n    this.sourcePool = new Pool({ \n      connectionString: process.env.DATABASE_URL,\n      ssl: { rejectUnauthorized: false }\n    });\n  }\n\n  async getStats(): Promise<MigrationStats> {\n    const tables = ['users', 'account_holders', 'betting_houses', 'surebet_sets', 'bets', 'session'];\n    const stats: TableStats[] = [];\n    let totalRecords = 0;\n\n    for (const table of tables) {\n      try {\n        const result = await this.sourcePool.query(`SELECT COUNT(*) as count FROM ${table}`);\n        const count = parseInt(result.rows[0].count);\n        stats.push({ name: table, count });\n        totalRecords += count;\n      } catch (error) {\n        stats.push({ name: table, count: 0 });\n      }\n    }\n\n    return { tables: stats, totalRecords };\n  }\n\n  async exportToSQL(): Promise<string> {\n    const lines: string[] = [];\n    \n    lines.push('-- Supabase Migration Script');\n    lines.push('-- Generated: ' + new Date().toISOString());\n    lines.push('-- Run this script in Supabase SQL Editor or via psql');\n    lines.push('');\n    \n    lines.push('-- Drop existing tables (in reverse order of dependencies)');\n    lines.push('DROP TABLE IF EXISTS session CASCADE;');\n    lines.push('DROP TABLE IF EXISTS bets CASCADE;');\n    lines.push('DROP TABLE IF EXISTS surebet_sets CASCADE;');\n    lines.push('DROP TABLE IF EXISTS betting_houses CASCADE;');\n    lines.push('DROP TABLE IF EXISTS account_holders CASCADE;');\n    lines.push('DROP TABLE IF EXISTS users CASCADE;');\n    lines.push('');\n\n    lines.push('-- Create tables');\n    lines.push(`\nCREATE TABLE users (\n  id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n  email TEXT NOT NULL UNIQUE,\n  password TEXT NOT NULL,\n  name TEXT NOT NULL,\n  role TEXT NOT NULL DEFAULT 'user',\n  created_at TIMESTAMP DEFAULT NOW()\n);\n\nCREATE TABLE account_holders (\n  id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n  user_id VARCHAR REFERENCES users(id),\n  name TEXT NOT NULL,\n  email TEXT,\n  username TEXT,\n  created_at TIMESTAMP DEFAULT NOW()\n);\n\nCREATE TABLE betting_houses (\n  id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n  user_id VARCHAR REFERENCES users(id),\n  name TEXT NOT NULL,\n  notes TEXT,\n  account_holder_id VARCHAR REFERENCES account_holders(id),\n  created_at TIMESTAMP DEFAULT NOW()\n);\n\nCREATE TABLE surebet_sets (\n  id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n  user_id VARCHAR REFERENCES users(id),\n  event_date TIMESTAMP,\n  sport TEXT,\n  league TEXT,\n  team_a TEXT,\n  team_b TEXT,\n  profit_percentage DECIMAL(5,2),\n  status TEXT DEFAULT 'pending',\n  is_checked BOOLEAN DEFAULT false,\n  created_at TIMESTAMP DEFAULT NOW()\n);\n\nCREATE TABLE bets (\n  id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n  surebet_set_id VARCHAR REFERENCES surebet_sets(id),\n  betting_house_id VARCHAR REFERENCES betting_houses(id),\n  bet_type TEXT NOT NULL,\n  odd DECIMAL(8,3) NOT NULL,\n  stake DECIMAL(10,2) NOT NULL,\n  potential_profit DECIMAL(10,2) NOT NULL,\n  result TEXT,\n  actual_profit DECIMAL(10,2),\n  created_at TIMESTAMP DEFAULT NOW()\n);\n\nCREATE TABLE session (\n  sid VARCHAR NOT NULL PRIMARY KEY,\n  sess JSON NOT NULL,\n  expire TIMESTAMP(6) NOT NULL\n);\n\nCREATE INDEX idx_session_expire ON session(expire);\nCREATE INDEX idx_bets_surebet_set ON bets(surebet_set_id);\nCREATE INDEX idx_surebet_sets_user ON surebet_sets(user_id);\nCREATE INDEX idx_betting_houses_user ON betting_houses(user_id);\nCREATE INDEX idx_account_holders_user ON account_holders(user_id);\n`);\n    lines.push('');\n\n    const tables = [\n      { name: 'users', order: 1 },\n      { name: 'account_holders', order: 2 },\n      { name: 'betting_houses', order: 3 },\n      { name: 'surebet_sets', order: 4 },\n      { name: 'bets', order: 5 },\n      { name: 'session', order: 6 }\n    ];\n\n    for (const table of tables) {\n      lines.push(`-- Data for ${table.name}`);\n      \n      try {\n        const result = await this.sourcePool.query(`SELECT * FROM ${table.name}`);\n        \n        if (result.rows.length === 0) {\n          lines.push(`-- No data in ${table.name}`);\n          lines.push('');\n          continue;\n        }\n\n        const columns = Object.keys(result.rows[0]);\n        \n        for (const row of result.rows) {\n          const values = columns.map(col => {\n            const val = row[col];\n            if (val === null || val === undefined) return 'NULL';\n            if (typeof val === 'boolean') return val ? 'TRUE' : 'FALSE';\n            if (typeof val === 'number') return String(val);\n            if (val instanceof Date) return `'${val.toISOString()}'`;\n            if (typeof val === 'object') return `'${JSON.stringify(val).replace(/'/g, \"''\")}'`;\n            return `'${String(val).replace(/'/g, \"''\")}'`;\n          }).join(', ');\n          \n          lines.push(`INSERT INTO ${table.name} (${columns.join(', ')}) VALUES (${values});`);\n        }\n        \n        lines.push('');\n      } catch (error) {\n        lines.push(`-- Error exporting ${table.name}: ${error instanceof Error ? error.message : 'Unknown'}`);\n        lines.push('');\n      }\n    }\n\n    lines.push('-- Migration complete!');\n    lines.push(`-- Total tables: ${tables.length}`);\n    \n    return lines.join('\\n');\n  }\n}\n","path":null,"size_bytes":5401,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null}},"version":2}